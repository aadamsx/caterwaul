// Caterwaul JS | Spencer Tipping
// Licensed under the terms of the MIT source code license
caterwaul.configuration('std.qs',(function (qs_template,qse_template,literal_template,gensym_2_gmjsve1t_cz6ti){return function (gensym_2_gmjsve1t_cz6tj){this.macro(qs_template,function (tree,gensym_2_gmjsve1t_cz6tk){return new this.ref(tree)}).macro(qse_template,function (tree,gensym_2_gmjsve1t_cz6tl){return new this.ref(this.macroexpand(tree))}).macro(literal_template,function (tree,gensym_2_gmjsve1t_cz6tm){return tree})}})(caterwaul.parse('qs[_]'),caterwaul.parse('qse[_]'),caterwaul.parse('literal[_]'))).tconfiguration('std.qs','std.qg',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6u9=caterwaul.parse('qg[_]');
return (function (gensym_2_gmjsve1t_cz6tn){this.rmacro(gensym_2_gmjsve1t_cz6u9,function (expression,gensym_2_gmjsve1t_cz6to){return expression.as('(')})})})())).tconfiguration('std.qs std.qg','std.fn',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6ub=caterwaul.parse('fn[_][_]');
var gensym_2_gmjsve1t_cz6uc=caterwaul.parse('qg[function (vars,gensym_2_gmjsve1t_cz6tr){return expression}]');
var gensym_2_gmjsve1t_cz6ud=caterwaul.parse('fn_[_]');
var gensym_2_gmjsve1t_cz6ue=caterwaul.parse('qg[function (gensym_2_gmjsve1t_cz6tt){return expression}]');
var gensym_2_gmjsve1t_cz6uf=caterwaul.parse('fb[_][_]');
var gensym_2_gmjsve1t_cz6ug=caterwaul.parse('fn[_t][fn_[fn[vars][e].apply(_t,arguments)]](this)');
var gensym_2_gmjsve1t_cz6uh=caterwaul.parse('fb_[_]');
var gensym_2_gmjsve1t_cz6ui=caterwaul.parse('fn[_t][fn_[fn_[e].apply(_t,arguments)]](this)');
var gensym_2_gmjsve1t_cz6uj=caterwaul.parse('fc[_][_]');
var gensym_2_gmjsve1t_cz6uk=caterwaul.parse('(fn[vars][body,undefined])');
var gensym_2_gmjsve1t_cz6ul=caterwaul.parse('fc_[_]');
var gensym_2_gmjsve1t_cz6um=caterwaul.parse('(fn[vars][body,undefined])');
return (function (gensym_2_gmjsve1t_cz6tp){this.configure('std.qg').rmacro(gensym_2_gmjsve1t_cz6ub,function (vars,expression,gensym_2_gmjsve1t_cz6tq){return gensym_2_gmjsve1t_cz6uc.replace({vars:vars,expression:expression})}).rmacro(gensym_2_gmjsve1t_cz6ud,function (expression,gensym_2_gmjsve1t_cz6ts){return gensym_2_gmjsve1t_cz6ue.replace({expression:expression})}).rmacro(gensym_2_gmjsve1t_cz6uf,function (vars,expression,gensym_2_gmjsve1t_cz6tu){return gensym_2_gmjsve1t_cz6ug.replace({_t:this.gensym(),vars:vars,e:expression})}).rmacro(gensym_2_gmjsve1t_cz6uh,function (expression,gensym_2_gmjsve1t_cz6tv){return gensym_2_gmjsve1t_cz6ui.replace({_t:this.gensym(),e:expression})}).rmacro(gensym_2_gmjsve1t_cz6uj,function (vars,body,gensym_2_gmjsve1t_cz6tw){return gensym_2_gmjsve1t_cz6uk.replace({vars:vars,body:body})}).rmacro(gensym_2_gmjsve1t_cz6ul,function (body,gensym_2_gmjsve1t_cz6tx){return gensym_2_gmjsve1t_cz6um.replace({body:body})})})})())).tconfiguration('std.qs std.qg std.fn','std.obj',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6uo=caterwaul.parse('_/mb/_');
var gensym_2_gmjsve1t_cz6up=caterwaul.parse('((function (_o,gensym_2_gmjsve1t_cz6tr){return _o.m&&(function (gensym_2_gmjsve1t_cz6tt){return _o.m.apply(_o,arguments)})}))(o)');
var gensym_2_gmjsve1t_cz6uq=caterwaul.parse('_/mb[_]');
var gensym_2_gmjsve1t_cz6ur=caterwaul.parse('((function (_o,_m,gensym_2_gmjsve1t_cz6tr){return _o[_m]&&(function (gensym_2_gmjsve1t_cz6tt){return _o[_m].apply(_o,arguments)})}))(o,m)');
var gensym_2_gmjsve1t_cz6us=caterwaul.parse('_/se._[_]');
var gensym_2_gmjsve1t_cz6ut=caterwaul.parse('((function (n,gensym_2_gmjsve1t_cz6tr){return b,n})).call(this,v)');
var gensym_2_gmjsve1t_cz6uu=caterwaul.parse('_/se[_]');
var gensym_2_gmjsve1t_cz6uv=caterwaul.parse('v/se._[b]');
var gensym_2_gmjsve1t_cz6uw=caterwaul.parse('_/re._[_]');
var gensym_2_gmjsve1t_cz6ux=caterwaul.parse('((function (n,gensym_2_gmjsve1t_cz6tr){return b})).call(this,v)');
var gensym_2_gmjsve1t_cz6uy=caterwaul.parse('_/re[_]');
var gensym_2_gmjsve1t_cz6uz=caterwaul.parse('v/re._[b]');
return (function (gensym_2_gmjsve1t_cz6ty){this.configure('std.qg std.fn').rmacro(gensym_2_gmjsve1t_cz6uo,(function (object,method,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6up.replace({_o:this.gensym(),o:object,m:method})})).rmacro(gensym_2_gmjsve1t_cz6uq,(function (object,method,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6ur.replace({_o:this.gensym(),_m:this.gensym(),o:object,m:method})})).rmacro(gensym_2_gmjsve1t_cz6us,(function (v,n,b,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6ut.replace({b:b,n:n,v:v})})).rmacro(gensym_2_gmjsve1t_cz6uu,(function (v,b,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6uv.replace({b:b,v:v})})).rmacro(gensym_2_gmjsve1t_cz6uw,(function (v,n,b,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6ux.replace({b:b,n:n,v:v})})).rmacro(gensym_2_gmjsve1t_cz6uy,(function (v,b,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6uz.replace({b:b,v:v})}))})})())).tconfiguration('std.qs std.qg std.fn','std.bind',caterwaul.precompiled_internal((function (){var let_in=caterwaul.parse('let[_] in _');
var let_brackets=caterwaul.parse('let[_][_]');
var lets_in=caterwaul.parse('let*[_] in _');
var lets_brackets=caterwaul.parse('let*[_][_]');
var gensym_2_gmjsve1t_cz6v4=caterwaul.parse('qg[function (gensym_2_gmjsve1t_cz6u0){var vars;\nreturn expression}].call(this)');
var gensym_2_gmjsve1t_cz6v6=caterwaul.parse('qg[function (vars,gensym_2_gmjsve1t_cz6u1){return e}].call(this,values)');
var gensym_2_gmjsve1t_cz6v7=caterwaul.parse('l[_] in _');
var gensym_2_gmjsve1t_cz6v8=caterwaul.parse('l[_][_]');
var gensym_2_gmjsve1t_cz6v9=caterwaul.parse('_,where[_]');
var gensym_2_gmjsve1t_cz6va=caterwaul.parse('l*[_] in _');
var gensym_2_gmjsve1t_cz6vb=caterwaul.parse('l*[_][_]');
var gensym_2_gmjsve1t_cz6vc=caterwaul.parse('_,where*[_]');
return (function (gensym_2_gmjsve1t_cz6tz){this.configure('std.qg');
var lf=(function (gensym_2_gmjsve1t_cz6v1,gensym_2_gmjsve1t_cz6tr){return (function (gensym_2_gmjsve1t_cz6tt){return (function (form,gensym_2_gmjsve1t_cz6tr){return this.rmacro(form,l_expander)}).apply(gensym_2_gmjsve1t_cz6v1,arguments)})})(this),lsf=(function (gensym_2_gmjsve1t_cz6v2,gensym_2_gmjsve1t_cz6tr){return (function (gensym_2_gmjsve1t_cz6tt){return (function (form,gensym_2_gmjsve1t_cz6tr){return this.rmacro(form,l_star_expander)}).apply(gensym_2_gmjsve1t_cz6v2,arguments)})})(this),l_star_expander=(function (gensym_2_gmjsve1t_cz6v3,gensym_2_gmjsve1t_cz6tr){return (function (gensym_2_gmjsve1t_cz6tt){return (function (vars,expression,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6v4.replace({vars:this.macroexpand(vars),expression:expression})}).apply(gensym_2_gmjsve1t_cz6v3,arguments)})})(this),l_expander=(function (gensym_2_gmjsve1t_cz6v5,gensym_2_gmjsve1t_cz6tr){return (function (gensym_2_gmjsve1t_cz6tt){return (function (vars,expression,gensym_2_gmjsve1t_cz6tr){return vars=this.macroexpand(vars).flatten(','),gensym_2_gmjsve1t_cz6v6.replace({vars:vars.map((function (n,gensym_2_gmjsve1t_cz6tr){return n[0]})).unflatten(),e:expression,values:vars.map((function (n,gensym_2_gmjsve1t_cz6tr){return n[1]})).unflatten()})}).apply(gensym_2_gmjsve1t_cz6v5,arguments)})})(this);
lf(gensym_2_gmjsve1t_cz6v7),lf(gensym_2_gmjsve1t_cz6v8),lf(let_in),lf(let_brackets).rmacro(gensym_2_gmjsve1t_cz6v9,(function (expression,vars,gensym_2_gmjsve1t_cz6tr){return l_expander(vars,expression)}));
lsf(gensym_2_gmjsve1t_cz6va),lsf(gensym_2_gmjsve1t_cz6vb),lsf(lets_in),lsf(lets_brackets).rmacro(gensym_2_gmjsve1t_cz6vc,(function (expression,vars,gensym_2_gmjsve1t_cz6tr){return l_star_expander(vars,expression)}))})})()),{let_in:caterwaul.parse('let [_] in _'),let_brackets:caterwaul.parse('let [_][_]'),lets_in:caterwaul.parse('let*[_] in _'),lets_brackets:caterwaul.parse('let*[_][_]')}).tconfiguration('std.qs std.qg std.fn','std.lvalue',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6ve=caterwaul.parse('_(_)=_');
var gensym_2_gmjsve1t_cz6vf=caterwaul.parse('base=qg[function (params,gensym_2_gmjsve1t_cz6u3){return value}]');
return (function (gensym_2_gmjsve1t_cz6u2){this.rmacro(gensym_2_gmjsve1t_cz6ve,(function (base,params,value,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6vf.replace({base:base,params:params,value:value})}))})})())).tconfiguration('std.qs std.qg std.fn','std.cond',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6vh=caterwaul.parse('_,when[_]');
var gensym_2_gmjsve1t_cz6vi=caterwaul.parse('qg[l]&&qg[r]');
var gensym_2_gmjsve1t_cz6vj=caterwaul.parse('_,unless[_]');
var gensym_2_gmjsve1t_cz6vk=caterwaul.parse(' !qg[l]&&qg[r]');
return (function (gensym_2_gmjsve1t_cz6u4){this.configure('std.qg').rmacro(gensym_2_gmjsve1t_cz6vh,(function (expr,cond,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6vi.replace({l:cond,r:expr})})).rmacro(gensym_2_gmjsve1t_cz6vj,(function (expr,cond,gensym_2_gmjsve1t_cz6tr){return gensym_2_gmjsve1t_cz6vk.replace({l:cond,r:expr})}))})})())).tconfiguration('std.qs std.qg std.fn','std.ref',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6vm=caterwaul.parse('caterwaul');
return (function (gensym_2_gmjsve1t_cz6u5){this.macro(gensym_2_gmjsve1t_cz6vm,(function (gensym_2_gmjsve1t_cz6tt){return new this.ref(this)}))})})())).tconfiguration('std.qs std.fn std.bind','std.string',caterwaul.precompiled_internal((function (){var gensym_2_gmjsve1t_cz6vo=caterwaul.parse('_');
return (function (gensym_2_gmjsve1t_cz6u6){this.rmacro(gensym_2_gmjsve1t_cz6vo,(function (string,gensym_2_gmjsve1t_cz6tr){return string.is_string()&&/#\{[^\}]+\}/.test(string.data)&&(function (gensym_2_gmjsve1t_cz6u0){var q=string.data.charAt(0),s=string.as_escaped_string(),eq=new RegExp('\\\\'+q,'g'),strings=s.split(/#\{[^\}]+\}/),xs=[],result=new this.syntax('+');
return s.replace(/#\{([^\}]+)\}/g,(function (_,s,gensym_2_gmjsve1t_cz6tr){return xs.push(s),''})),this.util.map((function (gensym_2_gmjsve1t_cz6vp,gensym_2_gmjsve1t_cz6tr){return (function (gensym_2_gmjsve1t_cz6tt){return (function (x,i,gensym_2_gmjsve1t_cz6tr){return result.push(new this.syntax(q+(i<strings.length?strings[i]:'')+q)).push(new this.syntax('(',this.parse(xs[i].replace(eq,q))))}).apply(gensym_2_gmjsve1t_cz6vp,arguments)})})(this),xs),new this.syntax('(',result.push(new this.syntax(q+(xs.length<strings.length?strings[strings.length-1]:'')+q)).unflatten())}).call(this)}))})})())).configuration('std',function (gensym_2_gmjsve1t_cz6u7){this.configure('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string')});
