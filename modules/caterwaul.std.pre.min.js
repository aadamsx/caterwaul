// Caterwaul JS | Spencer Tipping
// Licensed under the terms of the MIT source code license
caterwaul.configuration('std.qs',(function (qs_template,qse_template,literal_template,gensym_2_gmjq2khw_6k0orn){return function (gensym_2_gmjq2khw_6k0oro){this.macro(qs_template,function (tree,gensym_2_gmjq2khw_6k0orp){return new this.ref(tree)}).macro(qse_template,function (tree,gensym_2_gmjq2khw_6k0orq){return new this.ref(this.macroexpand(tree))}).macro(literal_template,function (tree,gensym_2_gmjq2khw_6k0orr){return tree})}})(caterwaul.parse('qs[_]'),caterwaul.parse('qse[_]'),caterwaul.parse('literal[_]'))).tconfiguration('std.qs','std.qg',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0ose=caterwaul.parse('qg[_]');
return (function (gensym_2_gmjq2khw_6k0ors){this.rmacro(gensym_2_gmjq2khw_6k0ose,function (expression,gensym_2_gmjq2khw_6k0ort){return expression.as('(')})})})())).tconfiguration('std.qs std.qg','std.fn',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0osg=caterwaul.parse('fn[_][_]');
var gensym_2_gmjq2khw_6k0osh=caterwaul.parse('qg[function (vars,gensym_2_gmjq2khw_6k0orw){return expression}]');
var gensym_2_gmjq2khw_6k0osi=caterwaul.parse('fn_[_]');
var gensym_2_gmjq2khw_6k0osj=caterwaul.parse('qg[function (gensym_2_gmjq2khw_6k0ory){return expression}]');
var gensym_2_gmjq2khw_6k0osk=caterwaul.parse('fb[_][_]');
var gensym_2_gmjq2khw_6k0osl=caterwaul.parse('fn[_t][fn_[fn[vars][e].apply(_t,arguments)]](this)');
var gensym_2_gmjq2khw_6k0osm=caterwaul.parse('fb_[_]');
var gensym_2_gmjq2khw_6k0osn=caterwaul.parse('fn[_t][fn_[fn_[e].apply(_t,arguments)]](this)');
var gensym_2_gmjq2khw_6k0oso=caterwaul.parse('fc[_][_]');
var gensym_2_gmjq2khw_6k0osp=caterwaul.parse('(fn[vars][body,undefined])');
var gensym_2_gmjq2khw_6k0osq=caterwaul.parse('fc_[_]');
var gensym_2_gmjq2khw_6k0osr=caterwaul.parse('(fn[vars][body,undefined])');
return (function (gensym_2_gmjq2khw_6k0oru){this.configure('std.qg').rmacro(gensym_2_gmjq2khw_6k0osg,function (vars,expression,gensym_2_gmjq2khw_6k0orv){return gensym_2_gmjq2khw_6k0osh.replace({vars:vars,expression:expression})}).rmacro(gensym_2_gmjq2khw_6k0osi,function (expression,gensym_2_gmjq2khw_6k0orx){return gensym_2_gmjq2khw_6k0osj.replace({expression:expression})}).rmacro(gensym_2_gmjq2khw_6k0osk,function (vars,expression,gensym_2_gmjq2khw_6k0orz){return gensym_2_gmjq2khw_6k0osl.replace({_t:this.gensym(),vars:vars,e:expression})}).rmacro(gensym_2_gmjq2khw_6k0osm,function (expression,gensym_2_gmjq2khw_6k0os0){return gensym_2_gmjq2khw_6k0osn.replace({_t:this.gensym(),e:expression})}).rmacro(gensym_2_gmjq2khw_6k0oso,function (vars,body,gensym_2_gmjq2khw_6k0os1){return gensym_2_gmjq2khw_6k0osp.replace({vars:vars,body:body})}).rmacro(gensym_2_gmjq2khw_6k0osq,function (body,gensym_2_gmjq2khw_6k0os2){return gensym_2_gmjq2khw_6k0osr.replace({body:body})})})})())).tconfiguration('std.qs std.qg std.fn','std.obj',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0ost=caterwaul.parse('_/mb/_');
var gensym_2_gmjq2khw_6k0osu=caterwaul.parse('((function (_o,gensym_2_gmjq2khw_6k0orw){return _o.m&&(function (gensym_2_gmjq2khw_6k0ory){return _o.m.apply(_o,arguments)})}))(o)');
var gensym_2_gmjq2khw_6k0osv=caterwaul.parse('_/mb[_]');
var gensym_2_gmjq2khw_6k0osw=caterwaul.parse('((function (_o,_m,gensym_2_gmjq2khw_6k0orw){return _o[_m]&&(function (gensym_2_gmjq2khw_6k0ory){return _o[_m].apply(_o,arguments)})}))(o,m)');
var gensym_2_gmjq2khw_6k0osx=caterwaul.parse('_/se._[_]');
var gensym_2_gmjq2khw_6k0osy=caterwaul.parse('((function (n,gensym_2_gmjq2khw_6k0orw){return b,n})).call(this,v)');
var gensym_2_gmjq2khw_6k0osz=caterwaul.parse('_/se[_]');
var gensym_2_gmjq2khw_6k0ot0=caterwaul.parse('v/se._[b]');
var gensym_2_gmjq2khw_6k0ot1=caterwaul.parse('_/re._[_]');
var gensym_2_gmjq2khw_6k0ot2=caterwaul.parse('((function (n,gensym_2_gmjq2khw_6k0orw){return b})).call(this,v)');
var gensym_2_gmjq2khw_6k0ot3=caterwaul.parse('_/re[_]');
var gensym_2_gmjq2khw_6k0ot4=caterwaul.parse('v/re._[b]');
return (function (gensym_2_gmjq2khw_6k0os3){this.configure('std.qg std.fn').rmacro(gensym_2_gmjq2khw_6k0ost,(function (object,method,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0osu.replace({_o:this.gensym(),o:object,m:method})})).rmacro(gensym_2_gmjq2khw_6k0osv,(function (object,method,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0osw.replace({_o:this.gensym(),_m:this.gensym(),o:object,m:method})})).rmacro(gensym_2_gmjq2khw_6k0osx,(function (v,n,b,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0osy.replace({b:b,n:n,v:v})})).rmacro(gensym_2_gmjq2khw_6k0osz,(function (v,b,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0ot0.replace({b:b,v:v})})).rmacro(gensym_2_gmjq2khw_6k0ot1,(function (v,n,b,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0ot2.replace({b:b,n:n,v:v})})).rmacro(gensym_2_gmjq2khw_6k0ot3,(function (v,b,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0ot4.replace({b:b,v:v})}))})})())).tconfiguration('std.qs std.qg std.fn','std.bind',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0ot9=caterwaul.parse('qg[function (gensym_2_gmjq2khw_6k0os5){var vars;\nreturn expression}].call(this)');
var gensym_2_gmjq2khw_6k0otb=caterwaul.parse('qg[function (vars,gensym_2_gmjq2khw_6k0os6){return e}].call(this,values)');
var gensym_2_gmjq2khw_6k0otc=caterwaul.parse('l[_] in _');
var gensym_2_gmjq2khw_6k0otd=caterwaul.parse('l[_][_]');
var gensym_2_gmjq2khw_6k0ote=caterwaul.parse('_,where[_]');
var gensym_2_gmjq2khw_6k0otf=caterwaul.parse('l*[_] in _');
var gensym_2_gmjq2khw_6k0otg=caterwaul.parse('l*[_][_]');
var gensym_2_gmjq2khw_6k0oth=caterwaul.parse('_,where*[_]');
return (function (gensym_2_gmjq2khw_6k0os4){this.configure('std.qg');
var lf=(function (gensym_2_gmjq2khw_6k0ot6,gensym_2_gmjq2khw_6k0orw){return (function (gensym_2_gmjq2khw_6k0ory){return (function (form,gensym_2_gmjq2khw_6k0orw){return this.rmacro(form,l_expander)}).apply(gensym_2_gmjq2khw_6k0ot6,arguments)})})(this),lsf=(function (gensym_2_gmjq2khw_6k0ot7,gensym_2_gmjq2khw_6k0orw){return (function (gensym_2_gmjq2khw_6k0ory){return (function (form,gensym_2_gmjq2khw_6k0orw){return this.rmacro(form,l_star_expander)}).apply(gensym_2_gmjq2khw_6k0ot7,arguments)})})(this),l_star_expander=(function (gensym_2_gmjq2khw_6k0ot8,gensym_2_gmjq2khw_6k0orw){return (function (gensym_2_gmjq2khw_6k0ory){return (function (vars,expression,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0ot9.replace({vars:this.macroexpand(vars),expression:expression})}).apply(gensym_2_gmjq2khw_6k0ot8,arguments)})})(this),l_expander=(function (gensym_2_gmjq2khw_6k0ota,gensym_2_gmjq2khw_6k0orw){return (function (gensym_2_gmjq2khw_6k0ory){return (function (vars,expression,gensym_2_gmjq2khw_6k0orw){return vars=this.macroexpand(vars).flatten(','),gensym_2_gmjq2khw_6k0otb.replace({vars:vars.map((function (n,gensym_2_gmjq2khw_6k0orw){return n[0]})).unflatten(),e:expression,values:vars.map((function (n,gensym_2_gmjq2khw_6k0orw){return n[1]})).unflatten()})}).apply(gensym_2_gmjq2khw_6k0ota,arguments)})})(this);
lf(gensym_2_gmjq2khw_6k0otc),lf(gensym_2_gmjq2khw_6k0otd),lf(let_in),lf(let_brackets).rmacro(gensym_2_gmjq2khw_6k0ote,(function (expression,vars,gensym_2_gmjq2khw_6k0orw){return l_expander(vars,expression)}));
lsf(gensym_2_gmjq2khw_6k0otf),lsf(gensym_2_gmjq2khw_6k0otg),lsf(lets_in),lsf(lets_brackets).rmacro(gensym_2_gmjq2khw_6k0oth,(function (expression,vars,gensym_2_gmjq2khw_6k0orw){return l_star_expander(vars,expression)}))})})()),{let_in:caterwaul.parse('let [_] in _'),let_brackets:caterwaul.parse('let [_][_]'),lets_in:caterwaul.parse('let*[_] in _'),lets_brackets:caterwaul.parse('let*[_][_]')}).tconfiguration('std.qs std.qg std.fn','std.lvalue',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0otj=caterwaul.parse('_(_)=_');
var gensym_2_gmjq2khw_6k0otk=caterwaul.parse('base=qg[function (params,gensym_2_gmjq2khw_6k0os8){return value}]');
return (function (gensym_2_gmjq2khw_6k0os7){this.rmacro(gensym_2_gmjq2khw_6k0otj,(function (base,params,value,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0otk.replace({base:base,params:params,value:value})}))})})())).tconfiguration('std.qs std.qg std.fn','std.cond',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0otm=caterwaul.parse('_,when[_]');
var gensym_2_gmjq2khw_6k0otn=caterwaul.parse('qg[l]&&qg[r]');
var gensym_2_gmjq2khw_6k0oto=caterwaul.parse('_,unless[_]');
var gensym_2_gmjq2khw_6k0otp=caterwaul.parse(' !qg[l]&&qg[r]');
return (function (gensym_2_gmjq2khw_6k0os9){this.configure('std.qg').rmacro(gensym_2_gmjq2khw_6k0otm,(function (expr,cond,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0otn.replace({l:cond,r:expr})})).rmacro(gensym_2_gmjq2khw_6k0oto,(function (expr,cond,gensym_2_gmjq2khw_6k0orw){return gensym_2_gmjq2khw_6k0otp.replace({l:cond,r:expr})}))})})())).tconfiguration('std.qs std.qg std.fn','std.ref',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0otr=caterwaul.parse('caterwaul');
return (function (gensym_2_gmjq2khw_6k0osa){this.macro(gensym_2_gmjq2khw_6k0otr,(function (gensym_2_gmjq2khw_6k0ory){return new this.ref(this)}))})})())).tconfiguration('std.qs std.fn std.bind','std.string',caterwaul.precompiled_internal((function (){var gensym_2_gmjq2khw_6k0ott=caterwaul.parse('_');
return (function (gensym_2_gmjq2khw_6k0osb){this.rmacro(gensym_2_gmjq2khw_6k0ott,(function (string,gensym_2_gmjq2khw_6k0orw){return string.is_string()&&/#\{[^\}]+\}/.test(string.data)&&(function (gensym_2_gmjq2khw_6k0os5){var q=string.data.charAt(0),s=string.as_escaped_string(),eq=new RegExp('\\\\'+q,'g'),strings=s.split(/#\{[^\}]+\}/),xs=[],result=new this.syntax('+');
return s.replace(/#\{([^\}]+)\}/g,(function (_,s,gensym_2_gmjq2khw_6k0orw){return xs.push(s),''})),this.util.map((function (gensym_2_gmjq2khw_6k0otu,gensym_2_gmjq2khw_6k0orw){return (function (gensym_2_gmjq2khw_6k0ory){return (function (x,i,gensym_2_gmjq2khw_6k0orw){return result.push(new this.syntax(q+(i<strings.length?strings[i]:'')+q)).push(new this.syntax('(',this.parse(xs[i].replace(eq,q))))}).apply(gensym_2_gmjq2khw_6k0otu,arguments)})})(this),xs),new this.syntax('(',result.push(new this.syntax(q+(xs.length<strings.length?strings[strings.length-1]:'')+q)).unflatten())}).call(this)}))})})())).configuration('std',function (gensym_2_gmjq2khw_6k0osc){this.configure('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string')});
