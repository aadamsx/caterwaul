// Caterwaul JS | Spencer Tipping
// Licensed under the terms of the MIT source code license
caterwaul.configuration('continuation.core',function (gensym_2_gmjq25de_9d4lyd){this.shallow('continuation',{})}).tconfiguration('std','continuation.unwind',caterwaul.precompiled_internal((function (){var gensym_2_gmjq25de_9d4lyn=caterwaul.parse('unwind_protect[_][_]');
var gensym_2_gmjq25de_9d4lyq=caterwaul.parse('_f((function (gensym_2_gmjq25de_9d4lyo){return (function (){return (function (e){return _escape}).apply(gensym_2_gmjq25de_9d4lyo,arguments)})})(this),(function (gensym_2_gmjq25de_9d4lyp){return (function (){return (function (){return _body}).apply(gensym_2_gmjq25de_9d4lyp,arguments)})})(this))');
var gensym_2_gmjq25de_9d4lyr=caterwaul.parse('caterwaul.continuation.unwind_protect');
var gensym_2_gmjq25de_9d4lys=caterwaul.parse('unwind[_]');
var gensym_2_gmjq25de_9d4lyt=caterwaul.parse('caterwaul.continuation.unwind(_e)');
return (function (gensym_2_gmjq25de_9d4lye){((function (_){return _.unwind_protect=function (escape,f,gensym_2_gmjq25de_9d4lyf){try {return f()}catch (e){return escape(e)}},_.unwind=function (e,gensym_2_gmjq25de_9d4lyg){throw e},_})).call(this,this.configure('std.fn continuation.core').continuation);
this.rmacro(gensym_2_gmjq25de_9d4lyn,(function (escape,body){return gensym_2_gmjq25de_9d4lyq.replace({_f:gensym_2_gmjq25de_9d4lyr,_escape:escape,_body:body})})).rmacro(gensym_2_gmjq25de_9d4lys,(function (e){return gensym_2_gmjq25de_9d4lyt.replace({_e:e})}))})})())).tconfiguration('std','continuation.cps',caterwaul.precompiled_internal((function (){var gensym_2_gmjq25de_9d4lyv=caterwaul.parse('(function (_){return _f}).call(this,_c)');
var gensym_2_gmjq25de_9d4lyw=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjq25de_9d4lyx=caterwaul.parse('_f[_v][_b]');
var gensym_2_gmjq25de_9d4lyy=caterwaul.parse('fb');
var gensym_2_gmjq25de_9d4lyz=caterwaul.parse('fn');
var gensym_2_gmjq25de_9d4lz1=caterwaul.parse('l/_form[_,_< -_] in _');
var gensym_2_gmjq25de_9d4lz2=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjq25de_9d4lz3=caterwaul.parse('l/_form[_< -_] in _');
var gensym_2_gmjq25de_9d4lz4=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjq25de_9d4lz5=caterwaul.parse('l/_form[_,_< -_][_]');
var gensym_2_gmjq25de_9d4lz6=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjq25de_9d4lz7=caterwaul.parse('l/_form[_< -_][_]');
var gensym_2_gmjq25de_9d4lz8=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjq25de_9d4lz0=caterwaul.parse('l/cps[cs][_f]');
var gensym_2_gmjq25de_9d4lz9=caterwaul.parse('_/_form[_]');
var gensym_2_gmjq25de_9d4lza=caterwaul.parse('_f/_form._[_b]');
var gensym_2_gmjq25de_9d4lzb=caterwaul.parse('_/_form._[_]');
var gensym_2_gmjq25de_9d4lzc=caterwaul.parse('(function (_){return _f}).call(this,_c)');
var gensym_2_gmjq25de_9d4lzd=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjq25de_9d4lze=caterwaul.parse('_f[_v][_b]');
var gensym_2_gmjq25de_9d4lzf=caterwaul.parse('fb');
var gensym_2_gmjq25de_9d4lzg=caterwaul.parse('fn');
var gensym_2_gmjq25de_9d4lzh=caterwaul.parse('cps');
var gensym_2_gmjq25de_9d4lzi=caterwaul.parse('cpb');
var gensym_2_gmjq25de_9d4lzj=caterwaul.parse('cps');
var gensym_2_gmjq25de_9d4lzk=caterwaul.parse('cpb');
return (function (gensym_2_gmjq25de_9d4lyh){(function (){var cps_convert=(function (v,f,b,bound){return gensym_2_gmjq25de_9d4lyv.replace({_c:gensym_2_gmjq25de_9d4lyw.macroexpand(gensym_2_gmjq25de_9d4lyx.replace({_f:bound?gensym_2_gmjq25de_9d4lyy:gensym_2_gmjq25de_9d4lyz})).replace({_v:v.as('(')[0],_b:b}),_f:f})}),l_cps_def=(function (t,form,bound){return (function (inductive,base){return t.rmacro(gensym_2_gmjq25de_9d4lz1.replace({_form:form}),inductive).rmacro(gensym_2_gmjq25de_9d4lz2.parse(('let/'+(form.serialize())+'[_, _ <- _] in _')),inductive).rmacro(gensym_2_gmjq25de_9d4lz3.replace({_form:form}),base).rmacro(gensym_2_gmjq25de_9d4lz4.parse(('let/'+(form.serialize())+'[   _ <- _] in _')),base).rmacro(gensym_2_gmjq25de_9d4lz5.replace({_form:form}),inductive).rmacro(gensym_2_gmjq25de_9d4lz6.parse(('let/'+(form.serialize())+'[_, _ <- _][_]')),inductive).rmacro(gensym_2_gmjq25de_9d4lz7.replace({_form:form}),base).rmacro(gensym_2_gmjq25de_9d4lz8.parse(('let/'+(form.serialize())+'[   _ <- _][_]')),base)}).call(this,(function (cs,v,f,b){return gensym_2_gmjq25de_9d4lz0.replace({cs:cs,_f:cps_convert(v,f,b,bound)})}),(function (v,f,b){return cps_convert(v,f,b,bound)}))}),cps_def=(function (t,form,bound){return t.rmacro(gensym_2_gmjq25de_9d4lz9.replace({_form:form}),(function (f,b){return gensym_2_gmjq25de_9d4lza.replace({_form:form,_f:f,_b:b})})).rmacro(gensym_2_gmjq25de_9d4lzb.replace({_form:form}),(function (f,v,b){return gensym_2_gmjq25de_9d4lzc.replace({_c:gensym_2_gmjq25de_9d4lzd.macroexpand(gensym_2_gmjq25de_9d4lze.replace({_f:bound?gensym_2_gmjq25de_9d4lzf:gensym_2_gmjq25de_9d4lzg})).replace({_v:v,_b:b}),_f:f})}))});
return ((function (_){return cps_def(_,gensym_2_gmjq25de_9d4lzh,false),cps_def(_,gensym_2_gmjq25de_9d4lzi,true),l_cps_def(_,gensym_2_gmjq25de_9d4lzj,false),l_cps_def(_,gensym_2_gmjq25de_9d4lzk,true),_})).call(this,this.configure('std.fn continuation.core'))}).call(this)})})())).tconfiguration('std','continuation.delimited',caterwaul.precompiled_internal((function (){var gensym_2_gmjq25de_9d4lzm=caterwaul.parse('call/cc[_]');
var gensym_2_gmjq25de_9d4lzn=caterwaul.parse('qg[caterwaul.continuation.call_cc.call(this,_f)]');
var gensym_2_gmjq25de_9d4lzo=caterwaul.parse('call/tail[_(_)]');
var gensym_2_gmjq25de_9d4lzp=caterwaul.parse('qg[caterwaul.continuation.call_tail.call(_f,_args)]');
return (function (gensym_2_gmjq25de_9d4lyi){(function (magic){return ((function (_){return _.call_cc=function (f,gensym_2_gmjq25de_9d4lyj){var escaped=false,cc=function (x,gensym_2_gmjq25de_9d4lyk){escaped=true;
throw x},frame={magic:magic,continuation:f,parameters:[cc]};
try {while ((frame=frame.continuation.apply(this,frame.parameters))&&frame&&frame.magic===magic);
return frame}catch (e){if (escaped)return e;
else throw e}},_.call_tail=(function (){return {magic:magic,continuation:this,parameters:arguments}}),_})).call(this,this.continuation)}).call(this,this.configure('std.qg continuation.core').continuation.magic=this.magic('continuation.delimited'));
this.rmacro(gensym_2_gmjq25de_9d4lzm,(function (f){return gensym_2_gmjq25de_9d4lzn.replace({_f:f})})).rmacro(gensym_2_gmjq25de_9d4lzo,(function (f,args){return gensym_2_gmjq25de_9d4lzp.replace({_f:f,_args:args})}))})})())).configuration('continuation',function (gensym_2_gmjq25de_9d4lyl){this.configure('continuation.core continuation.unwind continuation.cps continuation.delimited')});
