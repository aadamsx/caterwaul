caterwaul.configuration('continuation.core',function (){this.shallow('continuation',{})}).tconfiguration('std','continuation.unwind',function (){this.configure('std.fn continuation.core').continuation/se[_.unwind_protect=function (escape,f){try {return f()}catch (e){return escape(e)}},_.unwind=function (e){throw e}];this.rmacro(qs[unwind_protect[_][_]],fn[escape,body][qse[_f(fb[e][_escape],fb_[_body])].replace({_f:new this.ref(this.continuation.unwind_protect),_escape:escape,_body:body})]).rmacro(qs[unwind[_]],fn[e][qs[_f(_e)].replace({_f:new this.ref(this.continuation.unwind),_e:e})])}).tconfiguration('std','continuation.cps',function (){let*[cps_convert(v,f,b,bound)=f.replace({_:caterwaul.macroexpand(qs[_f[_v][_b]].replace({_f:bound?qs[fb]:qs[fn]})).replace({_v:v.as('(')[0],_b:b})}),let_cps_def(t,form,bound)=t.rmacro(qs[let/_form[_,_<-_][_]].replace({_form:form}),fn[cs,v,f,b][qs[let/cps[cs][_f]].replace({cs:cs,_f:cps_convert(v,f,b,bound)})]).rmacro(qs[let/_form[_<-_][_]].replace({_form:form}),fn[v,f,b][cps_convert(v,f,b,bound)]),cps_def(t,form,bound)=t.rmacro(qs[_(_)/_form[_]].replace({_form:form}),fn[f,ps,b][qse[_f(_ps)/_form._[_b]].replace({_form:form,_f:f,_ps:ps,_b:b})]).rmacro(qs[_(_)/_form._[_]].replace({_form:form}),fn[f,ps,v,b][qs[_f(_ps)].replace({_f:f,_ps:ps.replace({_:caterwaul.macroexpand(qs[_f[_v][_b]].replace({_f:bound?qs[fb]:qs[fn]})).replace({_v:v,_b:b})})})])] in this.configure('std.fn continuation.core')/se[let_cps_def(_,qs[cps],false),let_cps_def(_,qs[cpb],true),cps_def(_,qs[cps],false),cps_def(_,qs[cpb],true)]}).tconfiguration('std','continuation.delimited',function (){let[magic=this.configure('continuation.core').continuation.magic=this.magic('continuation.delimited')] in this.continuation/se[_.call_cc=function (f){var escaped=false,cc=function (x){escaped=true;throw x},frame={magic:magic,continuation:f,parameters:[cc]};try {while ((frame=frame.continuation.apply(this,frame.parameters))&&frame&&frame.magic===magic);return frame}catch (e){if (escaped)return e;else throw e}},_.call_tail()={magic:magic,continuation:this,parameters:arguments}];this.rmacro(qs[call/cc[_]],fn[f][qs[qg[_call_cc.call(this,_f)]].replace({_call_cc:new this.ref(this.continuation.call_cc),_f:f})]).rmacro(qs[call/tail[_(_)]],fn[f,args][qs[qg[_call_tail.call(_f,_args)]].replace({_call_tail:new this.ref(this.continuation.call_tail),_f:f,_args:args})])}).configuration('continuation',function (){this.configure('continuation.core continuation.unwind continuation.cps continuation.delimited')});