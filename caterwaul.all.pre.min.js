// Caterwaul JS | Spencer Tipping
// Licensed under the terms of the MIT source code license
(function (f){return f(f,(function (x){return function (){return  ++x}})(0))})(function (initializer,unique,undefined){var qw=function (x){return x.split(/\s+/)},id=function (x){return x},se=function (x,f){return f&&f.call(x,x)||x},genval=(function (n,m,u){return function (){return [u,n, ++m]}})( +new Date(),Math.random()*(1<<30)>>>0,unique()),genint=function (){var v=genval();
return (v[0]<<2)+v[0]+(v[1]<<1)+v[1]+v[2]},gensym=function (){var v=genval();
return ['gensym',v[0].toString(36),v[1].toString(36),v[2].toString(36)].join('_')},bind=function (f,t){return f.binding===t?f:f.original?bind(f.original,t):merge(function (){return f.apply(t,arguments)},{original:f,binding:t})},map=function (f,xs){for (var i=0,ys=[],l=xs.length;
i<l;
 ++i)ys.push(f(xs[i],i));
return ys},hash=function (s){for (var i=0,xs=qw(s),o={},l=xs.length;
i<l;
 ++i)o[xs[i]]=true;
return annotate_keys(o)},merge=function (o){for (var i=1,l=arguments.length,_;
i<l;
 ++i)if (_=arguments[i])for (var k in _)has(_,k)&&(o[k]=_[k]);
return o},extend=function (f){merge.apply(null,[f.prototype].concat(Array.prototype.slice.call(arguments,1)));
return f},is_caterwaul=gensym(),max_length_key=gensym(),annotate_keys=function (o){var max=0;
for (var k in o)own.call(o,k)&&(max=k.length>max?k.length:max);
o[max_length_key]=max;
return o},has=function (o,p){return p!=null&& !(p.length>o[max_length_key])&&own.call(o,p)},own=Object.prototype.hasOwnProperty;
var configurable=(function (){var associator_for=function (f){return function (name,behavior,value){return f[name]=(f.behaviors[f.attributes[name]=behavior]||id).call(f,value),f}},shallow_copy=function (x){return x&&(x.constructor===Array?x.slice():x.clone?x.clone():merge({},x))},copy_of=function (f){var g=merge(function (){return g.init.apply(g,arguments)},{behaviors:shallow_copy(f.behaviors),attributes:{}});
return se(g,function (g){(g.associate=associator_for(g))('behavior','method',function (name,definition){this.behaviors[name]=definition;
return this.associate(name,'method',function (attribute,value){return this.associate(attribute,name,value)})}).behavior('method',g.behaviors.method);
for (var k in f.attributes)has(f.attributes,k)&&g.associate(k,f.attributes[k],f[k])})},replica=se(function (){return copy_of({behaviors:{method:function (v){return bind(v,this)}}}).behavior('field').behavior('shallow',shallow_copy)},function (f){f.init=f});
return function (){return replica().shallow('configurations',{}).shallow('has',{}).method('configuration',function (name,f){this.configurations[name]=f;
return this}).method('tconfiguration',function (configs,name,f,bindings){this.configurations[name]=this.clone(configs)(f,bindings);
return this}).method('namespace',function (s){return this[s]||this.shallow(s,{})[s]}).method('alias',function (from,to){return this.method(to,function (){return this[from].apply(this,arguments)})}).method('clone',function (){return arguments.length?this.clone().configure.apply(null,arguments):copy_of(this)}).method('configure',function (){for (var i=0,l=arguments.length,_;
_=arguments[i],i<l;
 ++i)if (_.constructor===String)for (var cs=qw(arguments[i]),j=0,lj=cs.length;
_=cs[j],j<lj;
 ++j)if (this.configurations[_])this.has[_]||(this.has[_]=this.configurations[_].call(this,this)||this);
else throw new Error('error: configuration "'+_+'" does not exist');
else _ instanceof Array?this.configure.apply(this,_.slice()):_.call(this,this);
return this})}})();
var caterwaul_global=caterwaul=(function (){var _caterwaul=typeof caterwaul==='undefined'?undefined:caterwaul;
return se(configurable(),function (){this.deglobalize=function (){caterwaul=_caterwaul;
return this}})})();
caterwaul_global.method('global',function (){return caterwaul_global}).method('id',function (){return this._id||(this._id=genint())}).field('is_caterwaul',is_caterwaul).field('initializer',initializer).field('unique',unique).field('gensym',gensym).field('genint',genint).method('reinitialize',function (transform,erase_configurations){var c=transform(this.initializer),result=c(c,this.unique).deglobalize();
erase_configurations||(result.configurations=this.configurations);
return result}).method('magic',(function (table){return function (name){return table[name]||(table[name]={})}}));
var lex_op=hash('. new ++ -- u++ u-- u+ u- typeof u~ u! ! * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || ? = += -= *= /= %= &= |= ^= <<= >>= >>>= : , '+'return throw case var const break continue void else u; ;'),lex_table=function (s){for (var i=0,xs=[false];
i<8;
 ++i)xs.push.apply(xs,xs);
for (var i=0,l=s.length;
i<l;
 ++i)xs[s.charCodeAt(i)]=true;
return xs},lex_float=lex_table('.0123456789'),lex_decimal=lex_table('0123456789'),lex_integer=lex_table('0123456789abcdefABCDEFx'),lex_exp=lex_table('eE'),lex_space=lex_table(' \n\r\t'),lex_bracket=lex_table('()[]{}'),lex_opener=lex_table('([{'),lex_punct=lex_table('+-*/%&|^!~=<>?:;.,'),lex_eol=lex_table('\n\r'),lex_regexp_suffix=lex_table('gims'),lex_quote=lex_table('\'"/'),lex_slash='/'.charCodeAt(0),lex_star='*'.charCodeAt(0),lex_back='\\'.charCodeAt(0),lex_x='x'.charCodeAt(0),lex_dot='.'.charCodeAt(0),lex_zero='0'.charCodeAt(0),lex_postfix_unary=hash('++ --'),lex_ident=lex_table('$_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'),parse_reduce_order=map(hash,['function','( [ . [] ()','new delete','u++ u-- ++ -- typeof u~ u! u+ u-','* / %','+ -','<< >> >>>','< > <= >= instanceof in','== != === !==','&','^','|','&&','||','case','?','= += -= *= /= %= &= |= ^= <<= >>= >>>=',':',',','return throw break continue void','var const','if else try catch finally for switch with while do',';']),parse_associates_right=hash('= += -= *= /= %= &= ^= |= <<= >>= >>>= ~ ! new typeof u+ u- -- ++ u-- u++ ? if else function try catch finally for switch case with while do'),parse_inverse_order=(function (xs){for (var o={},i=0,l=xs.length;
i<l;
 ++i)for (var k in xs[i])has(xs[i],k)&&(o[k]=i);
return annotate_keys(o)})(parse_reduce_order),parse_index_forward=(function (rs){for (var xs=[],i=0,l=rs.length,_=null;
_=rs[i],xs[i]=true,i<l;
 ++i)for (var k in _)if (has(_,k)&&(xs[i]=xs[i]&& !has(parse_associates_right,k)))break ;
return xs})(parse_reduce_order),parse_lr=hash('[] . () * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || = += -= *= /= %= &= |= ^= <<= >>= >>>= , : ;'),parse_r_until_block=annotate_keys({'function':2,'if':1,'do':1,'catch':1,'try':1,'for':1,'while':1,'with':1,'switch':1}),parse_accepts=annotate_keys({'if':'else','do':'while','catch':'finally','try':'catch'}),parse_invocation=hash('[] ()'),parse_r_optional=hash('return throw break continue else'),parse_r=hash('u+ u- u! u~ u++ u-- new typeof finally case var const void delete'),parse_block=hash('; {'),parse_invisible=hash('i;'),parse_l=hash('++ --'),parse_group=annotate_keys({'(':')','[':']','{':'}','?':':'}),parse_ambiguous_group=hash('[ ('),parse_ternary=hash('?'),parse_not_a_value=hash('function if for while catch'),parse_also_expression=hash('function');
(function (){var syntax_node_inspect=function (x){return x?x.inspect():'(<>)'},syntax_node_tostring=function (x){return x?x.serialize?x.serialize():x.toString():''},syntax_structure_common={_replace:function (n){return (n.l=this.l)&&(this.l.r=n),(n.r=this.r)&&(this.r.l=n),this},_append_to:function (n){return n&&n._append(this),this},_reparent:function (n){return this.p&&this.p[0]===this&&(this.p[0]=n),this},_fold_l:function (n){return this._append(this.l&&this.l._unlink(this))},_append:function (n){return (this[this.length++]=n)&&(n.p=this),this},_fold_r:function (n){return this._append(this.r&&this.r._unlink(this))},_sibling:function (n){return n.p=this.p,(this.r=n).l=this},_fold_lr:function (){return this._fold_l()._fold_r()},_wrap:function (n){return n.p=this._replace(n).p,this._reparent(n),delete this.l,delete this.r,this._append_to(n)},_fold_rr:function (){return this._fold_r()._fold_r()},_unlink:function (n){return this.l&&(this.l.r=this.r),this.r&&(this.r.l=this.l),delete this.l,delete this.r,this._reparent(n)},pop:function (){return  --this.length,this},push:function (x){return this[this.length++]=x,this},id:function (){var id=genint();
return (this.id=function (){return id})()},each:function (f){for (var i=0,l=this.length;
i<l;
 ++i)f(this[i],i);
return this},map:function (f){for (var n=new this.constructor(this),i=0,l=this.length;
i<l;
 ++i)n.push(f(this[i],i)||this[i]);
return n},nmap:function (f){for (var n=new this.constructor(this),i=0,l=this.length,r;
i<l;
 ++i)(r=f(this[i],i))&&n.push(r);
return n},reach:function (f){f(this);
this.each(function (n){n&&n.reach(f)});
return this},rmap:function (f){var r=f(this);
return  !r||r===this?this.map(function (n){return n&&n.rmap(f)}):r.data===undefined?new this.constructor(r):r},rnmap:function (f){var r=f(this);
return r===this?this.nmap(function (n){return n&&n.rnmap(f)}):r&&r.data===undefined?new this.constructor(r):r},clone:function (){return this.rmap(function (){return false})},collect:function (p){var ns=[];
this.reach(function (n){p(n)&&ns.push(n)});
return ns},replace:function (rs){return this.rnmap(function (n){return own.call(rs,n.data)?rs[n.data]:n})},repopulated_with:function (xs){return new this.constructor(this.data,xs)},change:function (i,x){return se(new this.constructor(this.data,Array.prototype.slice.call(this)),function (n){n[i]=x})},compose_single:function (i,f){return this.change(i,f(this[i]))},traverse:function (f){f({entering:this});
f({exiting:this.each(function (n){n&&n.traverse(f)})});
return this},flatten:function (d){d=d||this.data;
return d!==this.data?this.as(d): !(has(parse_lr,d)&&this.length)?this:has(parse_associates_right,d)?se(new this.constructor(d),bind(function (n){for (var i=this;
i&&i.data===d;
i=i[1])n.push(i[0]);
n.push(i)},this)):se(new this.constructor(d),bind(function (n){for (var i=this,ns=[];
i.data===d;
i=i[0])i[1]&&ns.push(i[1]);
ns.push(i);
for (i=ns.length-1;
i>=0;
 --i)n.push(ns[i])},this))},unflatten:function (){var right=has(parse_associates_right,this.data);
return this.length<=2?this:se(new this.constructor(this.data),bind(function (n){if (right)for (var i=0,l=this.length-1;
i<l;
 ++i)n=n.push(this[i]).push(i<l-2?new this.constructor(this.data):this[i])[1];
else for (var i=this.length-1;
i>=1;
 --i)n=n.push(i>1?new this.constructor(this.data):this[0]).push(this[i])[0]},this))},as:function (d){return this.data===d?this:new this.constructor(d).push(this)},is_string:function (){return /['"]/.test(this.data.charAt(0))},as_escaped_string:function (){return this.data.substr(1,this.data.length-2)},is_number:function (){return /^-?(0x|\d|\.\d+)/.test(this.data)},as_number:function (){return Number(this.data)},is_boolean:function (){return this.data==='true'||this.data==='false'},as_boolean:function (){return this.data==='true'},is_regexp:function (){return /^\/./.test(this.data)},as_escaped_regexp:function (){return this.data.substring(1,this.data.lastIndexOf('/'))},has_grouped_block:function (){return has(parse_r_until_block,this.data)},is_block:function (){return has(parse_block,this.data)},is_blockless_keyword:function (){return has(parse_r_optional,this.data)},is_null_or_undefined:function (){return this.data==='null'||this.data==='undefined'},is_constant:function (){return this.is_number()||this.is_string()||this.is_boolean()||this.is_regexp()||this.is_null_or_undefined()},left_is_lvalue:function (){return /=$/.test(this.data)||/\+\+$/.test(this.data)||/--$/.test(this.data)},is_empty:function (){return  !this.length},has_parameter_list:function (){return this.data==='function'||this.data==='catch'},has_lvalue_list:function (){return this.data==='var'||this.data==='const'},is_dereference:function (){return this.data==='.'||this.data==='[]'},is_invocation:function (){return this.data==='()'},is_contextualized_invocation:function (){return this.is_invocation()&&this[0]&&this[0].is_dereference()},is_invisible:function (){return has(parse_invisible,this.data)},is_binary_operator:function (){return has(parse_lr,this.data)},is_prefix_unary_operator:function (){return has(parse_r,this.data)},is_postfix_unary_operator:function (){return has(parse_l,this.data)},is_unary_operator:function (){return this.is_prefix_unary_operator()||this.is_postfix_unary_operator()},accepts:function (e){return parse_accepts[this.data]&&this.accepts[parse.data]===(e.data||e)},bindings:function (hash){var result=hash||{};
this.reach(function (n){if (n.binds_a_value)result[n.data]=n.value});
return result},match:function (pattern){return macro_try_match(pattern,this)},ends_with_block:function (){var block=this[parse_r_until_block[this.data]];
return this.data==='{'||has(parse_r_until_block,this.data)&&(this.data!=='function'||this.length===3)&&block&&block.ends_with_block()},toString:function (){return this.inspect()},inspect:function (){return (this.l?'(left) <- ':'')+'('+this.data+(this.length?' '+map(syntax_node_inspect,this).join(' '):'')+')'+(this.r?' -> '+this.r.inspect():'')},serialize:function (xs){var op=this.data,space=/\w/.test(op.charAt(op.length-1))?' ':'';
return op===';'?this.length?map(syntax_node_tostring,this).join(';\n'):';':has(parse_invisible,op)?map(syntax_node_tostring,this).join(space):has(parse_invocation,op)?map(syntax_node_tostring,[this[0],op.charAt(0),this[1],op.charAt(1)]).join(space):has(parse_ternary,op)?map(syntax_node_tostring,[this[0],op,this[1],parse_group[op],this[2]]).join(space):has(parse_group,op)?op+map(syntax_node_tostring,this).join(space)+parse_group[op]:has(parse_lr,op)?this.length?map(syntax_node_tostring,this).join(space+op+space):op:has(parse_r,op)||has(parse_r_optional,op)?op.replace(/^u/,' ')+space+(this[0]?this[0].serialize():''):has(parse_r_until_block,op)?has(parse_accepts,op)&&this[1]&&this[2]&&parse_accepts[op]===this[2].data&& !this[1].ends_with_block()?op+space+map(syntax_node_tostring,[this[0],this[1],';\n',this[2]]).join(''):op+space+map(syntax_node_tostring,this).join(''):has(parse_l,op)?(this[0]?this[0].serialize():'')+space+op:op}};
caterwaul_global.method('define_syntax_structure',function (name,ctor){return this.field(name,extend(ctor,syntax_structure_common))}).field('syntax_structure_common',syntax_structure_common).define_syntax_structure('ref',function (value){if (value instanceof this.constructor){this.value=value.value;
this.data=value.data}else {this.value=value;
this.data=gensym()}},{length:0,binds_a_value:true}).define_syntax_structure('syntax',function (data){if (data instanceof this.constructor)this.data=data.data,this.length=0;
else {this.data=data&&data.toString();
this.length=0;
for (var i=1,l=arguments.length,_;
_=arguments[i],i<l;
 ++i)for (var j=0,lj=_.length,it,itc;
_ instanceof Array?(it=_[j],j<lj):(it=_, !j);
 ++j)this._append((itc=it.constructor)===String||itc===Number||itc===Boolean?new this.constructor(it):it)}})})();
caterwaul_global.alias('parse','decompile').method('parse',(function (){return function (input){var s=input.toString(),mark=0,c=0,re=true,esc=false,dot=false,exp=false,close=0,t='',i=0,l=s.length,cs=function (i){return s.charCodeAt(i)},grouping_stack=[],gs_top=null,head=null,parent=null,indexes=map(function (){return []},parse_reduce_order),invocation_nodes=[],all_nodes=[],new_node=function (n){return all_nodes.push(n),n},push=function (n){return head?head._sibling(head=n):(head=n._append_to(parent)),new_node(n)},syntax_node=caterwaul_global.syntax;
while ((mark=i)<l){while (lex_space[c=cs(i)]&&i<l)mark= ++i;
esc=exp=dot=t=false;
if (lex_bracket[c]){t= ! ! ++i;
re=lex_opener[c]}else if (c===lex_slash&&cs(i+1)===lex_star&&(i+=2)){while ( ++i<l&&cs(i)!==lex_slash||cs(i-1)!==lex_star);
t= ! ++i}else if (c===lex_slash&&cs(i+1)===lex_slash){while ( ++i<l&& !lex_eol[cs(i)]);
t=false}else if (lex_quote[c]&&(close=c)&&re&& !(re= !(t=s.charAt(i)))){while ( ++i<l&&(c=cs(i))!==close||esc)esc= !esc&&c===lex_back;
while ( ++i<l&&lex_regexp_suffix[cs(i)]);
t=true}else if (c===lex_zero&&lex_integer[cs(i+1)]){while ( ++i<l&&lex_integer[cs(i)]);
re= !(t=true)}else if (lex_float[c]&&(c!==lex_dot||lex_decimal[cs(i+1)])){while ( ++i<l&&(lex_decimal[c=cs(i)]||(dot^(dot|=c===lex_dot))||(exp^(exp|=lex_exp[c]&& ++i))));
while (i<l&&lex_decimal[cs(i)]) ++i;
re= !(t=true)}else if (lex_punct[c]&&(t=re?'u':'',re=true)){while (i<l&&lex_punct[cs(i)]&&has(lex_op,t+s.charAt(i)))t+=s.charAt(i++);
re= !has(lex_postfix_unary,t)}else {while ( ++i<l&&lex_ident[cs(i)]);
re=has(lex_op,t=s.substring(mark,i))}if (i===mark)throw new Error('Caterwaul lex error at "'+s.substr(mark,40)+'" with leading context "'+s.substr(mark-40,40)+'" (probably a Caterwaul bug)');
if (t===false)continue ;
t=t===true?s.substring(mark,i):t==='u;'?';':t;
t===gs_top?(grouping_stack.pop(),gs_top=grouping_stack[grouping_stack.length-1],head=head?head.p:parent,parent=null):(has(parse_group,t)?(grouping_stack.push(gs_top=parse_group[t]),parent=push(new_node(new syntax_node(t))),head=null):push(new_node(new syntax_node(t))),has(parse_inverse_order,t)&&indexes[parse_inverse_order[t]].push(head||parent));
re|=t===')'&&head.l&&has(parse_r_until_block,head.l.data)}for (var i=0,l=indexes.length,forward,_;
_=indexes[i],forward=parse_index_forward[i],i<l;
 ++i)for (var j=forward?0:_.length-1,lj=_.length,inc=forward?1: -1,node,data;
node=_[j],data=node&&node.data,forward?j<lj:j>=0;
j+=inc)if (has(parse_lr,data))node._fold_lr();
else if (has(parse_ambiguous_group,data)&&node.l&&(node.l.data==='.'|| !(has(lex_op,node.l.data)||has(parse_not_a_value,node.l.data))))invocation_nodes.push(node.l._wrap(new_node(new syntax_node(data+parse_group[data]))).p._fold_r());
else if (has(parse_l,data))node._fold_l();
else if (has(parse_r,data))node._fold_r();
else if (has(parse_ternary,data)){node._fold_lr();
var temp=node[1];
node[1]=node[0];
node[0]=temp}else if (has(parse_r_until_block,data)&&node.r&&node.r.data!==':'){for (var count=0,limit=parse_r_until_block[data];
count<limit&&node.r&& !has(parse_block,node.r.data);
 ++count)node._fold_r();
node.r&&node.r.data!==';'&&node._fold_r();
if (has(parse_accepts,data)&&parse_accepts[data]===(node.r&&node.r.r&&node.r.r.data))node._fold_r().pop()._fold_r();
else if (has(parse_accepts,data)&&parse_accepts[data]===(node.r&&node.r.data))node._fold_r()}else if (has(parse_r_optional,data))node.r&&node.r.data!==';'&&node._fold_r();
for (var i=all_nodes.length-1,_;
_=all_nodes[i],i>=0;
 --i)_.r&&_._wrap(new syntax_node('i;')).p._fold_r();
for (var i=0,l=invocation_nodes.length,_,child;
_=invocation_nodes[i],i<l;
 ++i)(child=_[1]=_[1][0])&&(child.p=_);
while (head.p)head=head.p;
for (var i=all_nodes.length-1;
i>=0;
 --i)delete all_nodes[i].p;
return head}})());
caterwaul_global.method('compile',function (tree,environment){var vars=[],values=[],bindings=merge({},environment||{},tree.bindings()),s=gensym();
for (var k in bindings)if (has(bindings,k))vars.push(k),values.push(bindings[k]);
var code=map(function (v){return v==='this'?'':'var '+v+'='+s+'.'+v},vars).join(';')+';return('+tree.serialize()+')';
try {return (new Function(s,code)).call(bindings['this'],bindings)}catch (e){throw new Error('Caught '+e+' while compiling '+code)}});
caterwaul_global.shallow('bake_listeners',[]).method('bake',function (){for (var i=0,l=this.bake_listeners.length;
i<l;
 ++i)this.bake_listeners[i].call(this);
return this}).method('when_baked',function (f){this.bake_listeners.push(f);
return this}).method('method_until_baked',function (name,f){return this.method(name,f).when_baked(function (){this.method(name,function (){throw new Error('cannot call '+name+' on a baked caterwaul')})})});
(function (){caterwaul_global.method('macro_try_match',function (pattern,t){if (pattern.data==='_')return [t];
if (pattern.data!==t.data||pattern.length!==t.length)return null;
for (var i=0,l=pattern.length,wildcards=[],match=null;
i<l;
 ++i)if (match=macro_try_match(pattern[i],t[i]))Array.prototype.push.apply(wildcards,match);
else return null;
return wildcards});
var variadic_definition=function (f){return function (){for (var i=0,l=arguments.length-1;
i<l;
 ++i)f.call(this,arguments[i],arguments[l]);
return this}};
caterwaul_global.shallow('macro_patterns',[]).shallow('macro_expanders',[]).method_until_baked('macro',variadic_definition(function (pattern,expander){if ( !expander.apply)throw new Error('macro: cannot define macro with non-function expander');
else return this.macro_patterns.push(pattern),this.macro_expanders.push(expander),this})).method_until_baked('rmacro',variadic_definition(function (pattern,expander){if ( !expander.apply)throw new Error('rmacro: cannot define macro with non-function expander');
else return this.macro(pattern,function (){var t=expander.apply(this,arguments);
return t&&this.macroexpand(t)})})).method('macroexpand',function (t){return macro_expand_naive(t,this.macro_patterns,this.macro_expanders,this)}).when_baked(function (){var f=this.create_baked_macroexpander(this.macro_patterns,this.macro_expanders);
this.method('macroexpand',function (t){return t.rmap(function (n){return f.call(this,n)})})})})();
caterwaul_global.method('macro_expand_naive',function (t,macros,expanders){return t.rmap(function (n){for (var i=macros.length-1,macro,match,replacement;
i>=0&&(macro=macros[i]);
 --i)if ((match=macro_try_match(macro,n))&&(replacement=expanders[i].apply(this,match)))return replacement})});
caterwaul_global.method('create_baked_macroexpander',(function (){var resolve_tree_path=function (tree,path){for (var i=0,l=path.length;
i<l;
 ++i)if ( !(tree=tree[path.charCodeAt(i)]))return tree;
return tree},partition_treeset=function (trees,path){for (var r={},i=0,l=trees.length,t,ti;
i<l;
 ++i)(t=resolve_tree_path(ti=trees[i],path))?(t=String.fromCharCode(t.length)+t.data):(t=''),(r[t]||(r[t]=[])).push(ti);
return r},next_path=function (visited,trees){if ( !visited)return '';
for (var k in visited)if (visited.hasOwnProperty(k))for (var i=0,l=visited[k],p;
i<l;
 ++i)if ( !((p=k+String.fromCharCode(i)) in visited)){for (var j=0,lj=trees.length,skip;
j<lj;
 ++j)if (skip=resolve_tree_path(trees[j],p).data==='_')break ;
if ( !skip)return p}},visit_path=function (path,visited,trees){var partitions=partition_treeset(trees,path),kv=function (k,v){var r={};
r[k]=v;
return r};
for (var k in partitions)if (partitions.hasOwnProperty(k))partitions[k]={trees:partitions[k],visited:merge({},visited,kv(path,k.charCodeAt(0)))};
return partitions},split_treeset_on_specification=function (trees,pattern_data,visited){var r=[],visited_count=0,available_paths={},available_count=0;
if (visited!=null){for (var k in visited)if (visited.hasOwnProperty(k)){ ++visited_count;
for (var i=0,l=visited[k];
i<l;
 ++i)available_paths[k+String.fromCharCode(i)]= ++available_count}}else available_paths={'':available_count=1};
for (var p=[],s=false,remaining_paths=null,remaining_count=0,i=0,l=trees.length,t,td;
i<l;
 ++i)if (((td=pattern_data[(t=trees[i]).id()]).non_wildcards===visited_count)!==s)r.push(p),p=[t],s= !s,remaining_paths=null;
else if (s)p.push(t);
else {if (remaining_paths===null)remaining_paths=merge({},available_paths),remaining_count=available_count;
for (var ps=td.wildcard_paths,j=0,lj=ps.length,pj;
j<lj;
 ++j)remaining_count-=remaining_paths.hasOwnProperty(pj=ps[j]),delete remaining_paths[pj];
if (remaining_count)p.push(t);
else r.push(p),r.push([]),p=[t],remaining_paths=null}p.length&&r.push(p);
return r},wildcard_paths=function (t){for (var r=t.data==='_'?['']:[],i=0,l=t.length;
i<l;
 ++i)for (var ps=t[i]&&wildcard_paths(t[i]),j=0,lj=ps.length;
j<lj;
 ++j)r.push(String.fromCharCode(i)+ps[j]);
return r},pattern_data=function (ps,es){for (var r={},i=0,l=ps.length,p;
i<l;
 ++i)r[(p=ps[i]).id()]={expander:es[i],non_wildcards:non_wildcard_node_count(p),wildcard_paths:wildcard_paths(p)};
return r},pattern_match_function_template=caterwaul_global.parse('function (t) {var result; _body}'),empty_variable_mapping_table=function (){return {'':'t'}},partition_template=caterwaul_global.parse('switch (_value) {_cases}'),partition_branch_template=caterwaul_global.parse('case _value: _body; break'),single_macro_attempt_template=caterwaul_global.parse('do {_body} while (false)'),indexed_path_reference_template=caterwaul_global.parse('_base[_index]'),absolute_path_reference_template=caterwaul_global.parse('_base'),generate_path_reference=function (variables,path){return variables[path]?absolute_path_reference_template.replace({_base:variables[path]}):indexed_path_reference_template.replace({_base:generate_path_reference(variables,path.substr(0,path.length-1)),_index:''+path.charCodeAt(path.length-1)})},path_variable_template=caterwaul_global.parse('var _temp = _value; if (! _temp) break'),path_exists_template=caterwaul_global.parse('null'),generate_path_variable=function (variables,path){if (variables[path])return path_exists_template;
var name='t'+genint(),replacements={_value:generate_path_reference(variables,path),_temp:name};
return variables[path]=name,path_variable_template.replace(replacements)},non_wildcard_node_count=function (tree){var r=0;
tree.reach(function (node){r+=node.data!=='_'});
return r},path_reference_array_template=caterwaul_global.parse('[_elements]'),generate_path_reference_array=function (variables,paths){for (var refs=[],i=0,l=paths.length;
i<l;
 ++i)refs.push(generate_path_reference(variables,paths[i]));
return path_reference_array_template.replace({_elements:refs.length>1?new caterwaul_global.syntax(',',refs):refs[0]})},macroexpander_invocation_template=caterwaul_global.parse('if (result = _expander.apply(this, _path_reference_array)) return result'),generate_macroexpander_invocation=function (pattern_data,pattern,variables){return macroexpander_invocation_template.replace({_expander:new ref(pattern_data[pattern.id()].expander),_path_reference_array:generate_path_reference_array(variables,pattern_data[pattern.id()].wildcard_paths)})},length_reference_template=caterwaul_global.parse('_value.length'),data_reference_template=caterwaul_global.parse('_value.data'),generate_partitioned_switch=function (trees,visited,variables,pattern_data){var path=next_path(visited,trees),partitions=visit_path(path,visited,trees),lengths={},length_pairs=[];
for (var k in partitions)if (partitions.hasOwnProperty(k))(lengths[k.charCodeAt(0)]||(lengths[k.charCodeAt(0)]=[])).push(k.substr(1));
for (var k in lengths)if (lengths.hasOwnProperty(k))length_pairs.push([k,lengths[k]]);
var new_variables=merge({},variables),path_reference_variable=generate_path_variable(new_variables,path),variable=new_variables[path],length_reference=length_reference_template.replace({_value:variable}),data_reference=data_reference_template.replace({_value:variable});
for (var length_cases=new caterwaul_global.syntax(';'),i=0,l=length_pairs.length,pair;
i<l;
 ++i){for (var data_cases=new caterwaul_global.syntax(';'),length=(pair=length_pairs[i])[0],values=pair[1],j=0,lj=values.length,p,v;
j<lj;
 ++j)p=partitions[String.fromCharCode(length)+(v=values[j])],data_cases.push(partition_branch_template.replace({_value:'"'+v.replace(/([\\"])/g,'\\$1')+'"',_body:generate_decision_tree(p.trees,path,p.visited,new_variables,pattern_data)}));
lj&&length_cases.push(partition_branch_template.replace({_value:''+length_pairs[i][0],_body:partition_template.replace({_value:data_reference,_cases:data_cases})}))}return single_macro_attempt_template.replace({_body:new caterwaul_global.syntax(';',path_reference_variable,length_cases.length?partition_template.replace({_value:length_reference,_cases:length_cases}):[])})},generate_unpartitioned_sequence=function (trees,variables,pattern_data){for (var r=new caterwaul_global.syntax(';'),i=0,l=trees.length;
i<l;
 ++i)r.push(generate_macroexpander_invocation(pattern_data,trees[i],variables));
return r},generate_decision_tree=function (trees,path,visited,variables,pattern_data){for (var r=new caterwaul_global.syntax(';'),sts=split_treeset_on_specification(trees,pattern_data,visited),i=0,l=sts.length;
i<l;
 ++i)sts[i].length&&r.push(i&1?generate_unpartitioned_sequence(sts[i],variables,pattern_data):generate_partitioned_switch(sts[i],visited,variables,pattern_data));
return r};
return function (patterns,expanders){for (var i=patterns.length-1,rps=[],res=[];
i>=0;
 --i)rps.push(patterns[i]),res.push(expanders[i]);
return this.compile(pattern_match_function_template.replace({_body:generate_decision_tree(rps,null,null,empty_variable_mapping_table(),pattern_data(rps,res))}))}})());
caterwaul_global.method('macro_form',function (name,define){var names=name+'s',form=name+'_form',forms=name+'_forms',define_name='define_'+name;
return this.shallow(names,[]).method(name,function (name,definition){for (var i=0,fs=this[forms],l=fs.length,d=this[define_name];
i<l;
 ++i)d.call(this,name,definition,fs[i]);
return this[names].push({name:name,definition:definition}),this}).shallow(forms,[]).method(form,function (form){for (var i=0,xs=this[names],l=xs.length,d=this[define_name];
i<l;
 ++i)d.call(this,xs[i].name,xs[i].description,form);
return this[forms].push(form),this}).method(define_name,function (){return define.apply(this,arguments),this})});
caterwaul_global.field('precompiled_internal_table',{}).method('precompiled_internal',function (f){var k=gensym();
this.precompiled_internal_table[k]=f;
return k}).method('is_precompiled',function (f){return f.constructor===String&&this.precompiled_internal_table[f]}).method('precompile',(function (){var nontrivial_function_pattern=caterwaul_global.parse('function (_) {_}'),trivial_function_pattern=caterwaul_global.parse('function () {_}'),nontrivial_function_gensym_template=caterwaul_global.parse('function (_args, _gensym) {_body}'),trivial_function_gensym_template=caterwaul_global.parse('function (_gensym) {_body}'),mark_nontrivial_function_macro=function (references){return function (args,body){var s=gensym(),result=nontrivial_function_gensym_template.replace({_args:args,_gensym:s,_body:annotate_functions_in(body,references)});
return references[s]={tree:result},result}},mark_trivial_function_macro=function (references){return function (body){var s=gensym(),result=trivial_function_gensym_template.replace({_gensym:s,_body:annotate_functions_in(body,references)});
return references[s]={tree:result},result}},annotate_functions_in=function (tree,references){return macro_expand_naive(tree,[trivial_function_pattern,nontrivial_function_pattern],[mark_trivial_function_macro(references),mark_nontrivial_function_macro(references)],null)},nontrivial_gensym_detection_pattern=caterwaul_global.parse('function (_, _) {_}'),trivial_gensym_detection_pattern=caterwaul_global.parse('function (_) {_}'),wrapped_compile=function (original,references){return function (tree,environment){var matches=tree.match(nontrivial_gensym_detection_pattern),k=matches&&matches[1].data;
if ( !matches)matches=tree.match(trivial_gensym_detection_pattern),k=matches&&matches[0].data;
if (matches&&references[k])if (references[k].compiled)throw new Error('detected multiple compilations of '+references[k].tree.serialize());
else references[k].compiled=tree,references[k].environment=environment;
return original.call(this,tree,environment)}},already_compiled_template=caterwaul_global.parse('caterwaul.precompiled_internal(_x)'),signal_already_compiled=function (tree){return already_compiled_template.replace({_x:tree})},closure_template=caterwaul_global.parse('(function () {_vars; return (_value)})()'),closure_variable_template=caterwaul_global.parse('var _var = _value'),closure_null_template=caterwaul_global.parse('null'),syntax_ref_template=caterwaul_global.parse('caterwaul.parse(_string)'),caterwaul_ref_template=caterwaul_global.parse('caterwaul.clone(_string)'),syntax_ref_string=function (ref){return '\''+ref.serialize().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/'/g,'\\\'')+'\''},caterwaul_ref_string=function (has){var ks=[];
for (var k in has)own.call(has,k)&&ks.push(k);
return '\''+ks.join(' ')+'\''},serialize_ref=function (value,name,seen){if ( !value)return ''+value;
else if (value.constructor===caterwaul_global.syntax)return seen[value.id()]||(seen[value.id()]=name,syntax_ref_template.replace({_string:syntax_ref_string(value)}));
else if (value.is_caterwaul===is_caterwaul)return seen[value.id()]||(seen[value.id()]=name,caterwaul_ref_template.replace({_string:caterwaul_ref_string(value.has)}));
else throw new Error('syntax ref value is not serializable: '+value)},variables_for=function (tree,environment){var names=[],values=[],seen={};
for (var k in environment)if (own.call(environment,k))names.push(k),values.push(serialize_ref(environment[k],k,seen));
tree.reach(function (n){if (n&&n.binds_a_value)names.push(n.data),values.push(serialize_ref(n.value,n.data,seen))});
for (var vars=[],i=0,l=names.length;
i<l;
 ++i)vars.push(closure_variable_template.replace({_var:names[i],_value:values[i]}));
return names.length?new caterwaul_global.syntax(';',vars):closure_null_template},precompiled_closure=function (tree,environment){return closure_template.replace({_vars:variables_for(tree,environment),_value:tree})},precompiled_function=function (tree,environment){return signal_already_compiled(precompiled_closure(tree,environment))},substitute_precompiled=function (references){return function (args_or_gensym,gensym_or_body,body){var ref=references[args_or_gensym.data]||references[gensym_or_body.data];
return ref&&ref.compiled&&precompiled_function(ref.compiled,ref.environment)}},perform_substitution=function (references,tree){var expander=substitute_precompiled(references);
return macro_expand_naive(tree,[trivial_gensym_detection_pattern,nontrivial_gensym_detection_pattern],[expander,expander],null)},annotated_caterwaul=function (caterwaul,references){return caterwaul.clone().field('compile',wrapped_compile(caterwaul.compile,references))},trace_execution=function (caterwaul,f){var references={},annotated=references.annotated=annotate_functions_in(caterwaul_global.parse(f),references);
caterwaul.compile(annotated,{caterwaul:annotated_caterwaul(caterwaul,references)})();
return references};
return function (f){var references=trace_execution(this,f);
return this.compile(perform_substitution(references,references.annotated))}})());
caterwaul_global.shallow('after_functions',[]).method('after',function (){if (arguments.length){for (var i=0,l=arguments.length;
i<l;
 ++i)this.after_functions.push(arguments[i]);
return this}else return this.after_functions});
caterwaul_global.method('init_not_precompiled',function (f,environment){var result=f.constructor===this.syntax?this.macroexpand(f):this.compile(this(this.decompile(f)),environment);
if (f.constructor===this.syntax)for (var i=0,l=this.after_functions.length;
i<l;
 ++i)result=this.after_functions[i](result);
return result}).method('init',function (f,environment){return this.is_precompiled(f)||this.init_not_precompiled(f,environment)});
return caterwaul_global});
caterwaul.configuration('std.qs',(function (qs_template,qse_template,literal_template,gensym_2_gmjt2wvy_7xdxur){return function (gensym_2_gmjt2wvy_7xdxus){this.macro(qs_template,function (tree,gensym_2_gmjt2wvy_7xdxut){return new this.ref(tree)}).macro(qse_template,function (tree,gensym_2_gmjt2wvy_7xdxuu){return new this.ref(this.macroexpand(tree))}).macro(literal_template,function (tree,gensym_2_gmjt2wvy_7xdxuv){return tree})}})(caterwaul.parse('qs[_]'),caterwaul.parse('qse[_]'),caterwaul.parse('literal[_]'))).tconfiguration('std.qs','std.qg',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxvi=caterwaul.parse('qg[_]');
return (function (gensym_2_gmjt2wvy_7xdxuw){this.rmacro(gensym_2_gmjt2wvy_7xdxvi,function (expression,gensym_2_gmjt2wvy_7xdxux){return expression.as('(')})})})())).tconfiguration('std.qs std.qg','std.fn',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxvk=caterwaul.parse('fn[_][_]');
var gensym_2_gmjt2wvy_7xdxvl=caterwaul.parse('qg[function (vars,gensym_2_gmjt2wvy_7xdxv0){return expression}]');
var gensym_2_gmjt2wvy_7xdxvm=caterwaul.parse('fn_[_]');
var gensym_2_gmjt2wvy_7xdxvn=caterwaul.parse('qg[function (gensym_2_gmjt2wvy_7xdxv2){return expression}]');
var gensym_2_gmjt2wvy_7xdxvo=caterwaul.parse('fb[_][_]');
var gensym_2_gmjt2wvy_7xdxvp=caterwaul.parse('fn[_t][fn_[fn[vars][e].apply(_t,arguments)]](this)');
var gensym_2_gmjt2wvy_7xdxvq=caterwaul.parse('fb_[_]');
var gensym_2_gmjt2wvy_7xdxvr=caterwaul.parse('fn[_t][fn_[fn_[e].apply(_t,arguments)]](this)');
var gensym_2_gmjt2wvy_7xdxvs=caterwaul.parse('fc[_][_]');
var gensym_2_gmjt2wvy_7xdxvt=caterwaul.parse('(fn[vars][body,undefined])');
var gensym_2_gmjt2wvy_7xdxvu=caterwaul.parse('fc_[_]');
var gensym_2_gmjt2wvy_7xdxvv=caterwaul.parse('(fn[vars][body,undefined])');
return (function (gensym_2_gmjt2wvy_7xdxuy){this.configure('std.qg').rmacro(gensym_2_gmjt2wvy_7xdxvk,function (vars,expression,gensym_2_gmjt2wvy_7xdxuz){return gensym_2_gmjt2wvy_7xdxvl.replace({vars:vars,expression:expression})}).rmacro(gensym_2_gmjt2wvy_7xdxvm,function (expression,gensym_2_gmjt2wvy_7xdxv1){return gensym_2_gmjt2wvy_7xdxvn.replace({expression:expression})}).rmacro(gensym_2_gmjt2wvy_7xdxvo,function (vars,expression,gensym_2_gmjt2wvy_7xdxv3){return gensym_2_gmjt2wvy_7xdxvp.replace({_t:this.gensym(),vars:vars,e:expression})}).rmacro(gensym_2_gmjt2wvy_7xdxvq,function (expression,gensym_2_gmjt2wvy_7xdxv4){return gensym_2_gmjt2wvy_7xdxvr.replace({_t:this.gensym(),e:expression})}).rmacro(gensym_2_gmjt2wvy_7xdxvs,function (vars,body,gensym_2_gmjt2wvy_7xdxv5){return gensym_2_gmjt2wvy_7xdxvt.replace({vars:vars,body:body})}).rmacro(gensym_2_gmjt2wvy_7xdxvu,function (body,gensym_2_gmjt2wvy_7xdxv6){return gensym_2_gmjt2wvy_7xdxvv.replace({body:body})})})})())).tconfiguration('std.qs std.qg std.fn','std.obj',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxvx=caterwaul.parse('_/mb/_');
var gensym_2_gmjt2wvy_7xdxvy=caterwaul.parse('((function (_o,gensym_2_gmjt2wvy_7xdxv0){return _o.m&&(function (gensym_2_gmjt2wvy_7xdxv2){return _o.m.apply(_o,arguments)})}))(o)');
var gensym_2_gmjt2wvy_7xdxvz=caterwaul.parse('_/mb[_]');
var gensym_2_gmjt2wvy_7xdxw0=caterwaul.parse('((function (_o,_m,gensym_2_gmjt2wvy_7xdxv0){return _o[_m]&&(function (gensym_2_gmjt2wvy_7xdxv2){return _o[_m].apply(_o,arguments)})}))(o,m)');
var gensym_2_gmjt2wvy_7xdxw1=caterwaul.parse('_/se._[_]');
var gensym_2_gmjt2wvy_7xdxw2=caterwaul.parse('((function (n,gensym_2_gmjt2wvy_7xdxv0){return b,n})).call(this,v)');
var gensym_2_gmjt2wvy_7xdxw3=caterwaul.parse('_/se[_]');
var gensym_2_gmjt2wvy_7xdxw4=caterwaul.parse('v/se._[b]');
var gensym_2_gmjt2wvy_7xdxw5=caterwaul.parse('_/re._[_]');
var gensym_2_gmjt2wvy_7xdxw6=caterwaul.parse('((function (n,gensym_2_gmjt2wvy_7xdxv0){return b})).call(this,v)');
var gensym_2_gmjt2wvy_7xdxw7=caterwaul.parse('_/re[_]');
var gensym_2_gmjt2wvy_7xdxw8=caterwaul.parse('v/re._[b]');
return (function (gensym_2_gmjt2wvy_7xdxv7){this.configure('std.qg std.fn').rmacro(gensym_2_gmjt2wvy_7xdxvx,(function (object,method,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxvy.replace({_o:this.gensym(),o:object,m:method})})).rmacro(gensym_2_gmjt2wvy_7xdxvz,(function (object,method,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxw0.replace({_o:this.gensym(),_m:this.gensym(),o:object,m:method})})).rmacro(gensym_2_gmjt2wvy_7xdxw1,(function (v,n,b,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxw2.replace({b:b,n:n,v:v})})).rmacro(gensym_2_gmjt2wvy_7xdxw3,(function (v,b,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxw4.replace({b:b,v:v})})).rmacro(gensym_2_gmjt2wvy_7xdxw5,(function (v,n,b,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxw6.replace({b:b,n:n,v:v})})).rmacro(gensym_2_gmjt2wvy_7xdxw7,(function (v,b,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxw8.replace({b:b,v:v})}))})})())).tconfiguration('std.qs std.qg std.fn','std.bind',caterwaul.precompiled_internal((function (){var let_in=caterwaul.parse('let[_] in _');
var let_brackets=caterwaul.parse('let[_][_]');
var lets_in=caterwaul.parse('let*[_] in _');
var lets_brackets=caterwaul.parse('let*[_][_]');
var gensym_2_gmjt2wvy_7xdxwd=caterwaul.parse('qg[function (gensym_2_gmjt2wvy_7xdxv9){var vars;\nreturn expression}].call(this)');
var gensym_2_gmjt2wvy_7xdxwf=caterwaul.parse('qg[function (vars,gensym_2_gmjt2wvy_7xdxva){return e}].call(this,values)');
var gensym_2_gmjt2wvy_7xdxwg=caterwaul.parse('l[_] in _');
var gensym_2_gmjt2wvy_7xdxwh=caterwaul.parse('l[_][_]');
var gensym_2_gmjt2wvy_7xdxwi=caterwaul.parse('_,where[_]');
var gensym_2_gmjt2wvy_7xdxwj=caterwaul.parse('l*[_] in _');
var gensym_2_gmjt2wvy_7xdxwk=caterwaul.parse('l*[_][_]');
var gensym_2_gmjt2wvy_7xdxwl=caterwaul.parse('_,where*[_]');
return (function (gensym_2_gmjt2wvy_7xdxv8){this.configure('std.qg');
var lf=(function (gensym_2_gmjt2wvy_7xdxwa,gensym_2_gmjt2wvy_7xdxv0){return (function (gensym_2_gmjt2wvy_7xdxv2){return (function (form,gensym_2_gmjt2wvy_7xdxv0){return this.rmacro(form,l_expander)}).apply(gensym_2_gmjt2wvy_7xdxwa,arguments)})})(this),lsf=(function (gensym_2_gmjt2wvy_7xdxwb,gensym_2_gmjt2wvy_7xdxv0){return (function (gensym_2_gmjt2wvy_7xdxv2){return (function (form,gensym_2_gmjt2wvy_7xdxv0){return this.rmacro(form,l_star_expander)}).apply(gensym_2_gmjt2wvy_7xdxwb,arguments)})})(this),l_star_expander=(function (gensym_2_gmjt2wvy_7xdxwc,gensym_2_gmjt2wvy_7xdxv0){return (function (gensym_2_gmjt2wvy_7xdxv2){return (function (vars,expression,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxwd.replace({vars:this.macroexpand(vars),expression:expression})}).apply(gensym_2_gmjt2wvy_7xdxwc,arguments)})})(this),l_expander=(function (gensym_2_gmjt2wvy_7xdxwe,gensym_2_gmjt2wvy_7xdxv0){return (function (gensym_2_gmjt2wvy_7xdxv2){return (function (vars,expression,gensym_2_gmjt2wvy_7xdxv0){return vars=this.macroexpand(vars).flatten(','),gensym_2_gmjt2wvy_7xdxwf.replace({vars:vars.map((function (n,gensym_2_gmjt2wvy_7xdxv0){return n[0]})).unflatten(),e:expression,values:vars.map((function (n,gensym_2_gmjt2wvy_7xdxv0){return n[1]})).unflatten()})}).apply(gensym_2_gmjt2wvy_7xdxwe,arguments)})})(this);
lf(gensym_2_gmjt2wvy_7xdxwg),lf(gensym_2_gmjt2wvy_7xdxwh),lf(let_in),lf(let_brackets).rmacro(gensym_2_gmjt2wvy_7xdxwi,(function (expression,vars,gensym_2_gmjt2wvy_7xdxv0){return l_expander(vars,expression)}));
lsf(gensym_2_gmjt2wvy_7xdxwj),lsf(gensym_2_gmjt2wvy_7xdxwk),lsf(lets_in),lsf(lets_brackets).rmacro(gensym_2_gmjt2wvy_7xdxwl,(function (expression,vars,gensym_2_gmjt2wvy_7xdxv0){return l_star_expander(vars,expression)}))})})()),{let_in:caterwaul.parse('let [_] in _'),let_brackets:caterwaul.parse('let [_][_]'),lets_in:caterwaul.parse('let*[_] in _'),lets_brackets:caterwaul.parse('let*[_][_]')}).tconfiguration('std.qs std.qg std.fn','std.lvalue',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxwn=caterwaul.parse('_(_)=_');
var gensym_2_gmjt2wvy_7xdxwo=caterwaul.parse('base=qg[function (params,gensym_2_gmjt2wvy_7xdxvc){return value}]');
return (function (gensym_2_gmjt2wvy_7xdxvb){this.rmacro(gensym_2_gmjt2wvy_7xdxwn,(function (base,params,value,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxwo.replace({base:base,params:params,value:value})}))})})())).tconfiguration('std.qs std.qg std.fn','std.cond',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxwq=caterwaul.parse('_,when[_]');
var gensym_2_gmjt2wvy_7xdxwr=caterwaul.parse('qg[l]&&qg[r]');
var gensym_2_gmjt2wvy_7xdxws=caterwaul.parse('_,unless[_]');
var gensym_2_gmjt2wvy_7xdxwt=caterwaul.parse(' !qg[l]&&qg[r]');
return (function (gensym_2_gmjt2wvy_7xdxvd){this.configure('std.qg').rmacro(gensym_2_gmjt2wvy_7xdxwq,(function (expr,cond,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxwr.replace({l:cond,r:expr})})).rmacro(gensym_2_gmjt2wvy_7xdxws,(function (expr,cond,gensym_2_gmjt2wvy_7xdxv0){return gensym_2_gmjt2wvy_7xdxwt.replace({l:cond,r:expr})}))})})())).tconfiguration('std.qs std.qg std.fn','std.ref',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxwv=caterwaul.parse('caterwaul');
return (function (gensym_2_gmjt2wvy_7xdxve){this.macro(gensym_2_gmjt2wvy_7xdxwv,(function (gensym_2_gmjt2wvy_7xdxv2){return new this.ref(this)}))})})())).tconfiguration('std.qs std.fn std.bind','std.string',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2wvy_7xdxwx=caterwaul.parse('_');
return (function (gensym_2_gmjt2wvy_7xdxvf){this.rmacro(gensym_2_gmjt2wvy_7xdxwx,(function (string,gensym_2_gmjt2wvy_7xdxv0){return string.is_string()&&/#\{[^\}]+\}/.test(string.data)&&(function (gensym_2_gmjt2wvy_7xdxv9){var q=string.data.charAt(0),s=string.as_escaped_string(),eq=new RegExp('\\\\'+q,'g'),strings=s.split(/#\{[^\}]+\}/),xs=[],result=new this.syntax('+');
return s.replace(/#\{([^\}]+)\}/g,(function (_,s,gensym_2_gmjt2wvy_7xdxv0){return xs.push(s),''})),this.util.map((function (gensym_2_gmjt2wvy_7xdxwy,gensym_2_gmjt2wvy_7xdxv0){return (function (gensym_2_gmjt2wvy_7xdxv2){return (function (x,i,gensym_2_gmjt2wvy_7xdxv0){return result.push(new this.syntax(q+(i<strings.length?strings[i]:'')+q)).push(new this.syntax('(',this.parse(xs[i].replace(eq,q))))}).apply(gensym_2_gmjt2wvy_7xdxwy,arguments)})})(this),xs),new this.syntax('(',result.push(new this.syntax(q+(xs.length<strings.length?strings[strings.length-1]:'')+q)).unflatten())}).call(this)}))})})())).configuration('std',function (gensym_2_gmjt2wvy_7xdxvg){this.configure('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string')});
caterwaul.tconfiguration('std.qs std.fn std.bind','macro.defmacro',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2n95_h3mubt=caterwaul.parse('defmacro[_][_]');
var gensym_2_gmjt2n95_h3mubu=caterwaul.parse('null');
var gensym_2_gmjt2n95_h3mubv=caterwaul.parse('defsubst[_][_]');
var gensym_2_gmjt2n95_h3mubw=caterwaul.parse('null');
return (function (gensym_2_gmjt2n95_h3mubo){(function (wildcard){return this.macro(gensym_2_gmjt2n95_h3mubt,(function (pattern,expansion){return this.rmacro(pattern,this.compile(this.macroexpand(expansion))),gensym_2_gmjt2n95_h3mubu})).macro(gensym_2_gmjt2n95_h3mubv,(function (pattern,expansion){return this.rmacro(pattern.rmap(wildcard),(function (wildcards){return (function (){return (function (hash,as){return this.util.map((function (v,i){return hash[v.data]=as[i]}),wildcards),expansion.replace(hash)}).call(this,{},arguments)})}).call(this,pattern.collect(wildcard))),gensym_2_gmjt2n95_h3mubw}))}).call(this,(function (n){return n.data.constructor===String&&n.data.charAt(0)==='_'&&'_'}))})})())).tconfiguration('std.qs std.fn std.bind','macro.with_gensyms',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2n95_h3muby=caterwaul.parse('with_gensyms[_][_]');
var gensym_2_gmjt2n95_h3muc0=caterwaul.parse('qs[_]');
return (function (gensym_2_gmjt2n95_h3mubp){this.rmacro(gensym_2_gmjt2n95_h3muby,(function (vars,expansion){return (function (bindings){return vars.flatten(',').each((function (gensym_2_gmjt2n95_h3mubz){return (function (){return (function (v){return bindings[v.data]=this.gensym()}).apply(gensym_2_gmjt2n95_h3mubz,arguments)})})(this)),gensym_2_gmjt2n95_h3muc0.replace({_:expansion.replace(bindings)})}).call(this,{})}))})})())).tconfiguration('std.qs std.fn','macro.compile_eval',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2n95_h3muc2=caterwaul.parse('compile_eval[_]');
var gensym_2_gmjt2n95_h3muc3=caterwaul.parse('fn_[_]');
return (function (gensym_2_gmjt2n95_h3mubq){this.macro(gensym_2_gmjt2n95_h3muc2,(function (e){return new this.ref(this.compile(this.macroexpand(gensym_2_gmjt2n95_h3muc3.replace({_:e}))).call(this))}))})})())).configuration('macro',function (gensym_2_gmjt2n95_h3mubr){this.configure('macro.defmacro macro.with_gensyms macro.compile_eval')});
caterwaul.tconfiguration('std macro','opt.unroll',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2qnn_c7bgl9=caterwaul.parse('opt.unroll[_,_][_]');
var gensym_2_gmjt2qnn_c7bgle=caterwaul.parse('qg[function (gensym_2_gmjt2qnn_c7bgla,gensym_2_gmjt2qnn_c7bgl6){for (var gensym_2_gmjt2qnn_c7bglb=gensym_2_gmjt2qnn_c7bgla>=0&&gensym_2_gmjt2qnn_c7bgla>>3,gensym_2_gmjt2qnn_c7bglc=gensym_2_gmjt2qnn_c7bgla>=0&&gensym_2_gmjt2qnn_c7bgla&7,_i_=0;\n_i_<gensym_2_gmjt2qnn_c7bglc;\n ++_i_)_body_;\nfor (var gensym_2_gmjt2qnn_c7bgld=0;\ngensym_2_gmjt2qnn_c7bgld<gensym_2_gmjt2qnn_c7bglb;\n ++gensym_2_gmjt2qnn_c7bgld){_body_;\n_i_++;\n_body_;\n_i_++;\n_body_;\n_i_++;\n_body_;\n_i_++;\n_body_;\n_i_++;\n_body_;\n_i_++;\n_body_;\n_i_++;\n_body_;\n_i_++};\nreturn gensym_2_gmjt2qnn_c7bgla}].call(this,_iterations_)');
return (function (gensym_2_gmjt2qnn_c7bgl5){this.rmacro(gensym_2_gmjt2qnn_c7bgl9,(function (variable,iterations,body){return gensym_2_gmjt2qnn_c7bgle.replace({_i_:variable,_body_:body,_iterations_:iterations})}))})})()));
caterwaul.configuration('opt',function (gensym_2_gmjt2qnn_c7bgl7){this.configure('opt.unroll')});
caterwaul.configuration('continuation.core',function (gensym_2_gmjt2hw2_17qyp1){this.shallow('continuation',{})}).tconfiguration('std','continuation.unwind',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2hw2_17qypb=caterwaul.parse('unwind_protect[_][_]');
var gensym_2_gmjt2hw2_17qype=caterwaul.parse('_f((function (gensym_2_gmjt2hw2_17qypc){return (function (){return (function (e){return _escape}).apply(gensym_2_gmjt2hw2_17qypc,arguments)})})(this),(function (gensym_2_gmjt2hw2_17qypd){return (function (){return (function (){return _body}).apply(gensym_2_gmjt2hw2_17qypd,arguments)})})(this))');
var gensym_2_gmjt2hw2_17qypf=caterwaul.parse('caterwaul.continuation.unwind_protect');
var gensym_2_gmjt2hw2_17qypg=caterwaul.parse('unwind[_]');
var gensym_2_gmjt2hw2_17qyph=caterwaul.parse('caterwaul.continuation.unwind(_e)');
return (function (gensym_2_gmjt2hw2_17qyp2){((function (_){return _.unwind_protect=function (escape,f,gensym_2_gmjt2hw2_17qyp3){try {return f()}catch (e){return escape(e)}},_.unwind=function (e,gensym_2_gmjt2hw2_17qyp4){throw e},_})).call(this,this.configure('std.fn continuation.core').continuation);
this.rmacro(gensym_2_gmjt2hw2_17qypb,(function (escape,body){return gensym_2_gmjt2hw2_17qype.replace({_f:gensym_2_gmjt2hw2_17qypf,_escape:escape,_body:body})})).rmacro(gensym_2_gmjt2hw2_17qypg,(function (e){return gensym_2_gmjt2hw2_17qyph.replace({_e:e})}))})})())).tconfiguration('std','continuation.cps',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2hw2_17qypj=caterwaul.parse('(function (_){return _f}).call(this,_c)');
var gensym_2_gmjt2hw2_17qypk=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std');
var gensym_2_gmjt2hw2_17qypl=caterwaul.parse('_f[_v][_b]');
var gensym_2_gmjt2hw2_17qypm=caterwaul.parse('fb');
var gensym_2_gmjt2hw2_17qypn=caterwaul.parse('fn');
var gensym_2_gmjt2hw2_17qypp=caterwaul.parse('l/_form[_,_< -_] in _');
var gensym_2_gmjt2hw2_17qypq=gensym_2_gmjt2hw2_17qypk;
var gensym_2_gmjt2hw2_17qypr=caterwaul.parse('l/_form[_< -_] in _');
var gensym_2_gmjt2hw2_17qyps=gensym_2_gmjt2hw2_17qypk;
var gensym_2_gmjt2hw2_17qypt=caterwaul.parse('l/_form[_,_< -_][_]');
var gensym_2_gmjt2hw2_17qypu=gensym_2_gmjt2hw2_17qypk;
var gensym_2_gmjt2hw2_17qypv=caterwaul.parse('l/_form[_< -_][_]');
var gensym_2_gmjt2hw2_17qypw=gensym_2_gmjt2hw2_17qypk;
var gensym_2_gmjt2hw2_17qypo=caterwaul.parse('l/cps[cs][_f]');
var gensym_2_gmjt2hw2_17qypx=caterwaul.parse('_/_form[_]');
var gensym_2_gmjt2hw2_17qypy=caterwaul.parse('_f/_form._[_b]');
var gensym_2_gmjt2hw2_17qypz=caterwaul.parse('_/_form._[_]');
var gensym_2_gmjt2hw2_17qyq0=caterwaul.parse('(function (_){return _f}).call(this,_c)');
var gensym_2_gmjt2hw2_17qyq1=gensym_2_gmjt2hw2_17qypk;
var gensym_2_gmjt2hw2_17qyq2=caterwaul.parse('_f[_v][_b]');
var gensym_2_gmjt2hw2_17qyq3=caterwaul.parse('fb');
var gensym_2_gmjt2hw2_17qyq4=caterwaul.parse('fn');
var gensym_2_gmjt2hw2_17qyq5=caterwaul.parse('cps');
var gensym_2_gmjt2hw2_17qyq6=caterwaul.parse('cpb');
var gensym_2_gmjt2hw2_17qyq7=caterwaul.parse('cps');
var gensym_2_gmjt2hw2_17qyq8=caterwaul.parse('cpb');
return (function (gensym_2_gmjt2hw2_17qyp5){(function (){var cps_convert=(function (v,f,b,bound){return gensym_2_gmjt2hw2_17qypj.replace({_c:gensym_2_gmjt2hw2_17qypk.macroexpand(gensym_2_gmjt2hw2_17qypl.replace({_f:bound?gensym_2_gmjt2hw2_17qypm:gensym_2_gmjt2hw2_17qypn})).replace({_v:v.as('(')[0],_b:b}),_f:f})}),l_cps_def=(function (t,form,bound){return (function (inductive,base){return t.rmacro(gensym_2_gmjt2hw2_17qypp.replace({_form:form}),inductive).rmacro(gensym_2_gmjt2hw2_17qypq.parse(('let/'+(form.serialize())+'[_, _ <- _] in _')),inductive).rmacro(gensym_2_gmjt2hw2_17qypr.replace({_form:form}),base).rmacro(gensym_2_gmjt2hw2_17qyps.parse(('let/'+(form.serialize())+'[   _ <- _] in _')),base).rmacro(gensym_2_gmjt2hw2_17qypt.replace({_form:form}),inductive).rmacro(gensym_2_gmjt2hw2_17qypu.parse(('let/'+(form.serialize())+'[_, _ <- _][_]')),inductive).rmacro(gensym_2_gmjt2hw2_17qypv.replace({_form:form}),base).rmacro(gensym_2_gmjt2hw2_17qypw.parse(('let/'+(form.serialize())+'[   _ <- _][_]')),base)}).call(this,(function (cs,v,f,b){return gensym_2_gmjt2hw2_17qypo.replace({cs:cs,_f:cps_convert(v,f,b,bound)})}),(function (v,f,b){return cps_convert(v,f,b,bound)}))}),cps_def=(function (t,form,bound){return t.rmacro(gensym_2_gmjt2hw2_17qypx.replace({_form:form}),(function (f,b){return gensym_2_gmjt2hw2_17qypy.replace({_form:form,_f:f,_b:b})})).rmacro(gensym_2_gmjt2hw2_17qypz.replace({_form:form}),(function (f,v,b){return gensym_2_gmjt2hw2_17qyq0.replace({_c:gensym_2_gmjt2hw2_17qyq1.macroexpand(gensym_2_gmjt2hw2_17qyq2.replace({_f:bound?gensym_2_gmjt2hw2_17qyq3:gensym_2_gmjt2hw2_17qyq4})).replace({_v:v,_b:b}),_f:f})}))});
return ((function (_){return cps_def(_,gensym_2_gmjt2hw2_17qyq5,false),cps_def(_,gensym_2_gmjt2hw2_17qyq6,true),l_cps_def(_,gensym_2_gmjt2hw2_17qyq7,false),l_cps_def(_,gensym_2_gmjt2hw2_17qyq8,true),_})).call(this,this.configure('std.fn continuation.core'))}).call(this)})})())).tconfiguration('std','continuation.delimited',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2hw2_17qyqa=caterwaul.parse('call/cc[_]');
var gensym_2_gmjt2hw2_17qyqb=caterwaul.parse('qg[caterwaul.continuation.call_cc.call(this,_f)]');
var gensym_2_gmjt2hw2_17qyqc=caterwaul.parse('call/tail[_(_)]');
var gensym_2_gmjt2hw2_17qyqd=caterwaul.parse('qg[caterwaul.continuation.call_tail.call(_f,_args)]');
return (function (gensym_2_gmjt2hw2_17qyp6){(function (magic){return ((function (_){return _.call_cc=function (f,gensym_2_gmjt2hw2_17qyp7){var escaped=false,cc=function (x,gensym_2_gmjt2hw2_17qyp8){escaped=true;
throw x},frame={magic:magic,continuation:f,parameters:[cc]};
try {while ((frame=frame.continuation.apply(this,frame.parameters))&&frame&&frame.magic===magic);
return frame}catch (e){if (escaped)return e;
else throw e}},_.call_tail=(function (){return {magic:magic,continuation:this,parameters:arguments}}),_})).call(this,this.continuation)}).call(this,this.configure('std.qg continuation.core').continuation.magic=this.magic('continuation.delimited'));
this.rmacro(gensym_2_gmjt2hw2_17qyqa,(function (f){return gensym_2_gmjt2hw2_17qyqb.replace({_f:f})})).rmacro(gensym_2_gmjt2hw2_17qyqc,(function (f,args){return gensym_2_gmjt2hw2_17qyqd.replace({_f:f,_args:args})}))})})())).configuration('continuation',function (gensym_2_gmjt2hw2_17qyp9){this.configure('continuation.core continuation.unwind continuation.cps continuation.delimited')});
caterwaul.tconfiguration('std','seq.core',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8ut){this.shallow('seq',{core:((function (_){return _.prototype=((function (p){return p.constructor=_,p})).call(this,[]),_})).call(this,(function (){return null}))})})})())).tconfiguration('std opt continuation','seq.finite.core',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8uu){this.configure('seq.core').seq.finite=((function (c){return c.prototype=((function (_){return _.size=(function (){return this.l||this.length}),_.slice=(function (){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)_.push(this[i]);
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){_.push(this[i]);
i++;
_.push(this[i]);
i++;
_.push(this[i]);
i++;
_.push(this[i]);
i++;
_.push(this[i]);
i++;
_.push(this[i]);
i++;
_.push(this[i]);
i++;
_.push(this[i]);
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,this.size()),_})).call(this,[])}),_.constructor=c,_})).call(this,new this.seq.core()),c})).call(this,((function (xs){return this.length=this.l=xs?(function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)this[i]=xs[i];
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){this[i]=xs[i];
i++;
this[i]=xs[i];
i++;
this[i]=xs[i];
i++;
this[i]=xs[i];
i++;
this[i]=xs[i];
i++;
this[i]=xs[i];
i++;
this[i]=xs[i];
i++;
this[i]=xs[i];
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,xs.size?xs.size():xs.length):0,undefined})))})})())).tconfiguration('std opt continuation','seq.finite.serialization',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8uv){((function (_){return _.toString=(function (){return ('seq['+(this.slice().join(", "))+']')}),_.join=(function (x){return this.slice().join(x)}),_})).call(this,this.configure('seq.finite.core').seq.finite.prototype)})})())).tconfiguration('std opt continuation','seq.finite.mutability',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8uw){(function (push,slice){return ((function (_){return _.push=(function (){return (function (as){return ((function (_){return this.length=this.l,this})).call(this,(function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)this[this.l++]=as[i];
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++;
this[this.l++]=as[i];
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,as.length))}).call(this,arguments)}),_.pop=(function (){return ((function (_){return delete this[this.length=this.l],_})).call(this,this[ --this.l])}),_.concat=(function (xs){return ((function (_){return _.push.apply(_,slice.call(xs)),_})).call(this,new this.constructor(this))}),_})).call(this,this.configure('seq.finite.core').seq.finite.prototype)}).call(this,Array.prototype.push,Array.prototype.slice)})})())).tconfiguration('std opt continuation','seq.finite.object',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8ux){(function (own){return ((function (_){return _.keys=(function (o,all){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8uy){for (var k in o)if (all||own.call(o,k))_.push(k)})(),_})).call(this,new _())}),_.values=(function (o,all){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8uz){for (var k in o)if (all||own.call(o,k))_.push(o[k])})(),_})).call(this,new _())}),_.pairs=(function (o,all){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8v0){for (var k in o)if (all||own.call(o,k))_.push([k,o[k]])})(),_})).call(this,new _())}),_.prototype.object=(function (o){return ((function (_){return this.each((function (p){return _[p[0]]=p[1]})),_})).call(this,(o||{}))}),_})).call(this,this.configure('seq.finite.core').seq.finite)}).call(this,Object.prototype.hasOwnProperty)})})())).tconfiguration('std opt continuation','seq.finite.traversal',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8v1){((function (_){return _.map=(function (f){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)_.push(f.call(this,this[i],i));
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++;
_.push(f.call(this,this[i],i));
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,this.l),_})).call(this,new this.constructor())}),_.filter=(function (f){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)(f.call(this,this[i],i))&&(_.push(this[i]));
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++;
(f.call(this,this[i],i))&&(_.push(this[i]));
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,this.l),_})).call(this,new this.constructor())}),_.each=(function (f){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)f.call(_,_[i],i);
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++;
f.call(_,_[i],i);
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,_.l),_})).call(this,this)}),_.reversed=(function (){return ((function (_){return (function (l){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)_.push(this[l-i-1]);
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++;
_.push(this[l-i-1]);
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,l)}).call(this,this.l),_})).call(this,new this.constructor())}),_.flat_map=(function (f){return ((function (_){return this.each((function (x,xi){return (((function (xs){return xs.each?xs:new this.constructor(xs)})).call(this,f.call(this,x,xi))).each((function (x){return _.push(x)}))})),_})).call(this,new this.constructor())}),_.foldl=(function (f,x){return (function (x,xi){return (this.l>=xi)&&((function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)x=f.call(this,x,this[i+xi],i+xi);
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++;
x=f.call(this,x,this[i+xi],i+xi);
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,this.l-xi),x)}).call(this,arguments.length>1?x:this[0],2-arguments.length)}),_.foldr=(function (f,x){return (function (x,xi,l){return (l>=xi-1)&&((function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++;
x=f.call(this,this[l-(i+xi)],x,l-(i+xi));
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,l-(xi-1)),x)}).call(this,arguments.length>1?x:this[this.l-1],3-arguments.length,this.l)}),_})).call(this,this.configure('seq.finite.core seq.finite.mutability').seq.finite.prototype)})})())).tconfiguration('std opt continuation','seq.finite.zip',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2ug2_eud8vi=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
return (function (gensym_2_gmjt2ug2_eud8v2){((function (_){return (function (seq,slice){return _.prototype.zip=(function (){return (function (as,options){return (as[as.size()-1].constructor===Object)&&(gensym_2_gmjt2ug2_eud8vi.util.merge(options,as.pop())),(function (l,f){return ((function (_){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++;
_.push(f.apply({i:i},as.map((function (x){return x[i]})).slice()));
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,l),_})).call(this,new this.constructor())}).call(this,as.map((function (x){return x.size?x.size():x.length})).foldl(options.outer?(function (x,y){return Math.max(x,y)}):(function (x,y){return Math.min(x,y)})),options.f)}).call(this,new seq([this].concat(slice.call(arguments))),{f:(function (){return new seq(arguments)}),outer:false})})}).call(this,_,Array.prototype.slice),_})).call(this,this.configure('seq.finite.traversal').seq.finite)})})())).tconfiguration('std opt continuation','seq.finite.quantification',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2ug2_eud8vk=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
return (function (gensym_2_gmjt2ug2_eud8v3){((function (_){return _.exists=(function (f){return (gensym_2_gmjt2ug2_eud8vk.continuation.call_cc.call(this,(function (gensym_2_gmjt2ug2_eud8vl){return (function (){return (function (cc){return (function (gensym_2_gmjt2ug2_eud8pi){for (var gensym_2_gmjt2ug2_eud8pj=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi>>3,gensym_2_gmjt2ug2_eud8pk=gensym_2_gmjt2ug2_eud8pi>=0&&gensym_2_gmjt2ug2_eud8pi&7,i=0;
i<gensym_2_gmjt2ug2_eud8pk;
 ++i)((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
for (var gensym_2_gmjt2ug2_eud8pl=0;
gensym_2_gmjt2ug2_eud8pl<gensym_2_gmjt2ug2_eud8pj;
 ++gensym_2_gmjt2ug2_eud8pl){((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++;
((function (_){return _&&cc(_)})).call(this,f.call(this,this[i],i));
i++};
return gensym_2_gmjt2ug2_eud8pi}).call(this,this.l),false}).apply(gensym_2_gmjt2ug2_eud8vl,arguments)})})(this)))}),_.forall=(function (f){return  !this.exists((function (){return  !f.apply(this,arguments)}))}),_})).call(this,this.configure('seq.finite.core').seq.finite.prototype)})})())).tconfiguration('std opt continuation','seq.infinite.core',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8v4){this.configure('seq.core').seq.infinite=((function (_){return (function (i){return _.def=(function (name,ctor,h,t){return i[name]=((function (_){return _.prototype=((function (_){return _.h=h,_.t=t,_.constructor=ctor,_})).call(this,new i()),_})).call(this,ctor)})}).call(this,_),_.def('cons',(function (h,t){return this._h=h,this._t=t}),(function (){return this._h}),(function (){return this._t})),_.def('k',(function (x){return this._x=x}),(function (){return this._x}),(function (){return this})),_})).call(this,((function (_){return (function (ctor){return _.prototype=((function (_){return _.constructor=ctor,_})).call(this,new this.seq.core())}).call(this,_),_})).call(this,(function (){return null})))})})())).tconfiguration('std opt continuation','seq.infinite.y',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8v5){this.configure('seq.infinite.core').seq.infinite.def('y',((function (f,x){return this._f=f,this._x=x,undefined})),(function (){return this._x}),(function (){return new this.constructor(this._f,this._f(this._x))}))})})())).tconfiguration('std opt continuation','seq.infinite.transform',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2ug2_eud8vp=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2ug2_eud8vq=gensym_2_gmjt2ug2_eud8vp;
return (function (gensym_2_gmjt2ug2_eud8v6){((function (_){return _.prototype.map=(function (f){return new _.map(f,this)}),_.def('map',((function (f,xs){return this._f=f,this._xs=xs,undefined})),(function (){return this._f(this._xs.h())}),(function (){return new this.constructor(this._f,this._xs.t())})),_.prototype.filter=(function (f){return new _.filter(f,this)}),_.def('filter',((function (f,xs){return this._f=f,this._xs=(function (){var next=(function (s){return (function (cc){return f(s.h())?cc(s):(gensym_2_gmjt2ug2_eud8vp.continuation.call_tail.call(next(s.t()),cc))})});
return (gensym_2_gmjt2ug2_eud8vq.continuation.call_cc.call(this,next(xs)))}).call(this),undefined})),(function (){return this._xs.h()}),(function (){return new this.constructor(this._f,this._xs.t())})),_})).call(this,this.configure('seq.infinite.core').seq.infinite)})})())).tconfiguration('std opt continuation','seq.infinite.traversal',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2ug2_eud8vs=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2ug2_eud8vt=gensym_2_gmjt2ug2_eud8vs;
var gensym_2_gmjt2ug2_eud8vu=gensym_2_gmjt2ug2_eud8vs;
var gensym_2_gmjt2ug2_eud8vv=gensym_2_gmjt2ug2_eud8vs;
return (function (gensym_2_gmjt2ug2_eud8v7){(function (finite){return ((function (_){return _.drop=(function (f){return (function (){var next=(function (s){return (function (cc){return f(s.h())?(gensym_2_gmjt2ug2_eud8vs.continuation.call_tail.call(next(s.t()),cc)):cc(s)})});
return (gensym_2_gmjt2ug2_eud8vt.continuation.call_cc.call(this,next(this)))}).call(this)}),_.take=(function (f){return (function (){var xs=new finite(),next=(function (s){return (function (cc){return (function (h){return f(h)?(xs.push(h),(gensym_2_gmjt2ug2_eud8vu.continuation.call_tail.call(next(s.t()),cc))):cc(xs)}).call(this,s.h())})});
return (gensym_2_gmjt2ug2_eud8vv.continuation.call_cc.call(this,next(this)))}).call(this)}),_})).call(this,this.configure('seq.infinite.core').seq.infinite.prototype)}).call(this,this.configure('seq.finite.core seq.finite.mutability').seq.finite)})})())).tconfiguration('std opt continuation','seq.numeric',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2ug2_eud8v8){((function (_){return _.naturals_from=(function (x){return new _.infinite.y((function (n){return n+1}),x)}),_.naturals=_.naturals_from(0),_.n=(function (l,u,s){return (function (lower,upper){return (function (step){return new _.infinite.y((function (n){return n+step}),lower).take((function (x){return (upper-lower)*(upper-x)>0}))}).call(this,Math.abs(s||1)*(lower<upper?1: -1))}).call(this,arguments.length>1?l:0,arguments.length>1?u:l)}),_})).call(this,this.configure('seq.infinite.core seq.infinite.y seq.finite.core').seq)})})())).tconfiguration('std opt continuation','seq.dsl',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2ug2_eud8vz=caterwaul.parse(' -x');
var gensym_2_gmjt2ug2_eud8w0=caterwaul.parse('[_]');
var gensym_2_gmjt2ug2_eud8w1=caterwaul.parse('_[_]');
var gensym_2_gmjt2ug2_eud8w2=caterwaul.parse(' +_');
var gensym_2_gmjt2ug2_eud8w3=caterwaul.parse('_+x');
var gensym_2_gmjt2ug2_eud8w4=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2ug2_eud8w5=caterwaul.parse('qg[fn[f][fn_[ !f.apply(this,arguments)]]]');
var gensym_2_gmjt2ug2_eud8w6=caterwaul.parse('fn[xs][y]');
var gensym_2_gmjt2ug2_eud8w7=caterwaul.parse('fb');
var gensym_2_gmjt2ug2_eud8w8=caterwaul.parse('fn');
var gensym_2_gmjt2ug2_eud8w9=caterwaul.parse('_x.filter(_y)');
var gensym_2_gmjt2ug2_eud8wa=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wb=caterwaul.parse('_x.map(_y)');
var gensym_2_gmjt2ug2_eud8wc=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wd=caterwaul.parse('_x.foldl(_y)');
var gensym_2_gmjt2ug2_eud8we=caterwaul.parse('_,_0,_i');
var gensym_2_gmjt2ug2_eud8wf=caterwaul.parse('_x.filter(c(_y))');
var gensym_2_gmjt2ug2_eud8wg=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wh=caterwaul.parse('_x.each(_y)');
var gensym_2_gmjt2ug2_eud8wi=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wj=caterwaul.parse('_x.foldr(_y)');
var gensym_2_gmjt2ug2_eud8wk=caterwaul.parse('_,_0,_i');
var gensym_2_gmjt2ug2_eud8wl=caterwaul.parse('_x.forall(_y)');
var gensym_2_gmjt2ug2_eud8wm=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wn=caterwaul.parse('_x.exists(_y)');
var gensym_2_gmjt2ug2_eud8wo=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wp=caterwaul.parse('_x.flat_map(_y)');
var gensym_2_gmjt2ug2_eud8wq=caterwaul.parse('_,_i');
var gensym_2_gmjt2ug2_eud8wr=caterwaul.parse('_x.drop(_y)');
var gensym_2_gmjt2ug2_eud8ws=caterwaul.parse('_');
var gensym_2_gmjt2ug2_eud8wt=caterwaul.parse('_x.take(_y)');
var gensym_2_gmjt2ug2_eud8wu=caterwaul.parse('_');
var gensym_2_gmjt2ug2_eud8wv=caterwaul.parse('new caterwaul.seq.infinite.y(_y,_x)');
var gensym_2_gmjt2ug2_eud8ww=caterwaul.parse('_');
var gensym_2_gmjt2ug2_eud8wx=caterwaul.parse('_+_');
var gensym_2_gmjt2ug2_eud8wy=caterwaul.parse('qg[_x].size()+qg[_y].size()');
var gensym_2_gmjt2ug2_eud8wz=caterwaul.parse('_&&_');
var gensym_2_gmjt2ug2_eud8x0=caterwaul.parse('((function (xp){return xp&&xp.size()?_y:xp}).call(this,_x))');
var gensym_2_gmjt2ug2_eud8x1=caterwaul.parse('_||_');
var gensym_2_gmjt2ug2_eud8x2=caterwaul.parse('((function (xp){return xp&&xp.size()?xp:_y}).call(this,_x))');
var gensym_2_gmjt2ug2_eud8x3=caterwaul.parse('_===_');
var gensym_2_gmjt2ug2_eud8x4=caterwaul.parse('qg[l[xp=_x,yp=_y][xp===yp||xp.size()===yp.size()&&xp.zip(yp).forall(fn[p][p[0]===p[1]])]]');
var gensym_2_gmjt2ug2_eud8x5=caterwaul.parse('_!==_');
var gensym_2_gmjt2ug2_eud8x6=caterwaul.parse('qg[l[xp=_x,yp=_y][xp!==yp&&(xp.size()!==yp.size()||xp.zip(yp).exists(fn[p][p[0]!==p[1]]))]]');
var gensym_2_gmjt2ug2_eud8x7=caterwaul.parse('_^_');
var gensym_2_gmjt2ug2_eud8x8=caterwaul.parse('_x.zip(_y)');
var gensym_2_gmjt2ug2_eud8x9=caterwaul.parse('_+_');
var gensym_2_gmjt2ug2_eud8xa=caterwaul.parse('_x.concat(_y)');
var gensym_2_gmjt2ug2_eud8xb=caterwaul.parse(' !_');
var gensym_2_gmjt2ug2_eud8xc=caterwaul.parse('_x.object()');
var gensym_2_gmjt2ug2_eud8xd=caterwaul.parse('_,_');
var gensym_2_gmjt2ug2_eud8xe=caterwaul.parse('_x,_y');
var gensym_2_gmjt2ug2_eud8xf=caterwaul.parse(' ~_');
var gensym_2_gmjt2ug2_eud8xg=caterwaul.parse('qg[new caterwaul.seq.finite(_x)]');
var gensym_2_gmjt2ug2_eud8xh=caterwaul.parse('_?_:_');
var gensym_2_gmjt2ug2_eud8xi=caterwaul.parse('x?y:z');
var gensym_2_gmjt2ug2_eud8xj=caterwaul.parse('_(_)');
var gensym_2_gmjt2ug2_eud8xk=caterwaul.parse('_x(_y)');
var gensym_2_gmjt2ug2_eud8xl=caterwaul.parse('_[_]');
var gensym_2_gmjt2ug2_eud8xm=caterwaul.parse('_x[_y]');
var gensym_2_gmjt2ug2_eud8xn=caterwaul.parse('_._');
var gensym_2_gmjt2ug2_eud8xo=caterwaul.parse('_x._y');
var gensym_2_gmjt2ug2_eud8xp=caterwaul.parse('_');
var gensym_2_gmjt2ug2_eud8xq=caterwaul.parse('qg[_x]');
var gensym_2_gmjt2ug2_eud8xr=caterwaul.parse(' +_');
var gensym_2_gmjt2ug2_eud8xs=caterwaul.parse('N');
var gensym_2_gmjt2ug2_eud8xt=caterwaul.parse('caterwaul.seq.naturals');
var gensym_2_gmjt2ug2_eud8xu=caterwaul.parse('N[_]');
var gensym_2_gmjt2ug2_eud8xv=caterwaul.parse('caterwaul.seq.naturals_from(x)');
var gensym_2_gmjt2ug2_eud8xw=caterwaul.parse('n[_]');
var gensym_2_gmjt2ug2_eud8xx=caterwaul.parse('caterwaul.seq.n(x)');
var gensym_2_gmjt2ug2_eud8xz=caterwaul.parse('p[_]');
var gensym_2_gmjt2ug2_eud8y0=caterwaul.parse('caterwaul.seq.finite.r(x)');
var gensym_2_gmjt2ug2_eud8y1=caterwaul.parse('seq[_]');
var gensym_2_gmjt2ug2_eud8y2=gensym_2_gmjt2ug2_eud8w4;
return (function (gensym_2_gmjt2ug2_eud8v9){this.configure('seq.core seq.infinite.y seq.finite.core seq.finite.zip seq.finite.traversal seq.finite.mutability').seq.dsl=((function (_){return (function (){var rxy=(function (tree){return (function (x,y){return tree.replace({_x:_.macroexpand(x),_y:y&&_.macroexpand(y)})})}),seq=(function (gensym_2_gmjt2ug2_eud8vy){return (function (){return (function (xs){return new this.seq.finite(xs)}).apply(gensym_2_gmjt2ug2_eud8vy,arguments)})})(this),prepend=(function (operator){return (function (x){return ((function (_){return _.data=operator,_})).call(this,gensym_2_gmjt2ug2_eud8vz.replace({x:x}))})}),tree_forms=(function (){var base=seq([gensym_2_gmjt2ug2_eud8w0,gensym_2_gmjt2ug2_eud8w1]),mod=(function (fs,op){return fs.concat(fs.map(prepend(op)))});
return mod(mod(base,'u-'),'u~').concat(seq([gensym_2_gmjt2ug2_eud8w2]))}).call(this),template=(function (op){return (function (t){return ((function (_){return _.data=op,_})).call(this,gensym_2_gmjt2ug2_eud8w3.replace({x:t}))})}),qw=gensym_2_gmjt2ug2_eud8w4.util.qw,not=gensym_2_gmjt2ug2_eud8w5,trees_for=(function (op){return ((function (_){return _.map(template(op.replace(/!$/,'')))})).call(this,((function (_){return op.charAt(op.length-1)==='!'?_.map(prepend('u!')):_})).call(this,tree_forms))});
return _.prefix_substitute=(function (tree,prefix){return tree.rmap((function (n){return (n.data.charAt(0)==='_')&&(new n.constructor((''+(prefix)+''+(n.data.substring(1))+'')))}))}),_.define_functional=(function (op,expansion,xs){return trees_for(op).map((function (t,i){return _.macro(t,(function (l,v,r){return expansion.replace({_x:_.macroexpand(l),_y:i>=8?v:gensym_2_gmjt2ug2_eud8w6.replace({fn:i&2?gensym_2_gmjt2ug2_eud8w7:gensym_2_gmjt2ug2_eud8w8,xs:_.prefix_substitute(xs,i&1?v.data:'_'),y:(i&4?_.macroexpand:(function (x){return x}))(r||v)})})}))}))}),((function (_){return _('%',gensym_2_gmjt2ug2_eud8w9,gensym_2_gmjt2ug2_eud8wa),_('*',gensym_2_gmjt2ug2_eud8wb,gensym_2_gmjt2ug2_eud8wc),_('/',gensym_2_gmjt2ug2_eud8wd,gensym_2_gmjt2ug2_eud8we),_('%!',gensym_2_gmjt2ug2_eud8wf.replace({c:not}),gensym_2_gmjt2ug2_eud8wg),_('*!',gensym_2_gmjt2ug2_eud8wh,gensym_2_gmjt2ug2_eud8wi),_('/!',gensym_2_gmjt2ug2_eud8wj,gensym_2_gmjt2ug2_eud8wk),_('&',gensym_2_gmjt2ug2_eud8wl,gensym_2_gmjt2ug2_eud8wm),_('|',gensym_2_gmjt2ug2_eud8wn,gensym_2_gmjt2ug2_eud8wo),_('-',gensym_2_gmjt2ug2_eud8wp,gensym_2_gmjt2ug2_eud8wq),_('>>',gensym_2_gmjt2ug2_eud8wr,gensym_2_gmjt2ug2_eud8ws),_('<<',gensym_2_gmjt2ug2_eud8wt,gensym_2_gmjt2ug2_eud8wu),_('>>>',gensym_2_gmjt2ug2_eud8wv,gensym_2_gmjt2ug2_eud8ww),_})).call(this,_.define_functional),seq(qw('> < >= <= == !=')).each((function (op){return _.macro(((function (_){return _.data=op,_})).call(this,gensym_2_gmjt2ug2_eud8wx.clone()),rxy(((function (_){return _.data=op,_})).call(this,gensym_2_gmjt2ug2_eud8wy.clone())))})),(function (e){return ((function (_){return _(gensym_2_gmjt2ug2_eud8wz,rxy(gensym_2_gmjt2ug2_eud8x0)),_(gensym_2_gmjt2ug2_eud8x1,rxy(gensym_2_gmjt2ug2_eud8x2)),_(gensym_2_gmjt2ug2_eud8x3,rxy(gensym_2_gmjt2ug2_eud8x4)),_(gensym_2_gmjt2ug2_eud8x5,rxy(gensym_2_gmjt2ug2_eud8x6)),_(gensym_2_gmjt2ug2_eud8x7,rxy(gensym_2_gmjt2ug2_eud8x8)),_(gensym_2_gmjt2ug2_eud8x9,rxy(gensym_2_gmjt2ug2_eud8xa)),_(gensym_2_gmjt2ug2_eud8xb,rxy(gensym_2_gmjt2ug2_eud8xc)),_(gensym_2_gmjt2ug2_eud8xd,rxy(gensym_2_gmjt2ug2_eud8xe)),_(gensym_2_gmjt2ug2_eud8xf,rxy(gensym_2_gmjt2ug2_eud8xg)),_(gensym_2_gmjt2ug2_eud8xh,(function (x,y,z){return gensym_2_gmjt2ug2_eud8xi.replace({x:e(x),y:e(y),z:e(z)})})),(function (rx){return _(gensym_2_gmjt2ug2_eud8xj,rx(gensym_2_gmjt2ug2_eud8xk)),_(gensym_2_gmjt2ug2_eud8xl,rx(gensym_2_gmjt2ug2_eud8xm)),_(gensym_2_gmjt2ug2_eud8xn,rx(gensym_2_gmjt2ug2_eud8xo)),_(gensym_2_gmjt2ug2_eud8xp.as('('),rx(gensym_2_gmjt2ug2_eud8xq))}).call(this,(function (t){return (function (x,y){return t.replace({_x:e(x),_y:y})})})),_(gensym_2_gmjt2ug2_eud8xr,(function (x){return x})),(function (rx){return _(gensym_2_gmjt2ug2_eud8xs,(function (){return gensym_2_gmjt2ug2_eud8xt})),_(gensym_2_gmjt2ug2_eud8xu,rx(gensym_2_gmjt2ug2_eud8xv)),_(gensym_2_gmjt2ug2_eud8xw,rx(gensym_2_gmjt2ug2_eud8xx))}).call(this,(function (t){return (function (x){return t.replace({x:x})})})),seq(qw('sk sv sp')).zip(qw('keys values pairs')).each((function (gensym_2_gmjt2ug2_eud8xy){return (function (){return (function (p){return _(gensym_2_gmjt2ug2_eud8xz.replace({p:p[0]}),(function (x){return gensym_2_gmjt2ug2_eud8y0.replace({r:p[1],x:x})}))}).apply(gensym_2_gmjt2ug2_eud8xy,arguments)})})(this)),_})).call(this,_.macro)}).call(this,(function (x){return _.macroexpand(x)})),this.rmacro(gensym_2_gmjt2ug2_eud8y1,_.macroexpand)}).call(this),_})).call(this,gensym_2_gmjt2ug2_eud8y2.global().clone())})})())).configuration('seq',function (gensym_2_gmjt2ug2_eud8va){this.configure('seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification '+'seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal '+'seq.numeric seq.dsl')});
caterwaul.tconfiguration('std seq','heap',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2liv_4ii0f1=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq');
return (function (gensym_2_gmjt2liv_4ii0ez){this.heap=(function (less){return ((function (c){return c.prototype=((function (_){return _.insert=(function (x){return this.push(x).heapify_up(this.size()-1)}),_.root=(function (){return this[0]}),_.rroot=(function (){return ((function (_){return ((function (_){return (this.size())&&(this[0]=_,this.heapify_down(0)),_})).call(this,this.pop()),_})).call(this,this[0])}),_.swap=(function (i,j){return ((function (_){return (function (temp){return _[j]=_[i],_[i]=temp}).call(this,_[j]),_})).call(this,this)}),_.heapify_up=(function (i){return ((function (_){return (function (p){return (less.call(_,_[i],_[p]))&&(_.swap(i,p).heapify_up(p))}).call(this,i>>1),_})).call(this,this)}),_.heapify_down=(function (i){return ((function (_){return (function (){var s=_.size(),r=i+1<<1,l=r-1,ll=l<s&&less.call(_,_[l],_[i])?l:i,lr=r<s&&less.call(_,_[r],_[ll])?r:ll;
return  !(lr===i)&&(_.swap(lr,i).heapify_down(lr))}).call(this),_})).call(this,this)}),_})).call(this,((function (_){return _.constructor=c,_})).call(this,new gensym_2_gmjt2liv_4ii0f1.seq.finite())),c})).call(this,((function (vars){return null,undefined})))})})})()));
caterwaul.tconfiguration('std seq continuation','memoize',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2p00_1nq84l=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2p00_1nq84m=gensym_2_gmjt2p00_1nq84l;
return (function (gensym_2_gmjt2p00_1nq84j){((function (m){return m.wrap=(function (f){return ((function (_){return _.original=f,_})).call(this,(function (){return (function (as,start){return ((function (_){return _.time= +new Date()-start,_})).call(this,gensym_2_gmjt2p00_1nq84l.continuation.unwind_protect((function (gensym_2_gmjt2p00_1nq7zf){return (function (){return (function (e){return {error:e}}).apply(gensym_2_gmjt2p00_1nq7zf,arguments)})})(this),(function (gensym_2_gmjt2p00_1nq7zg){return (function (){return (function (){return {result:f.apply(this,as)}}).apply(gensym_2_gmjt2p00_1nq7zg,arguments)})})(this)))}).call(this,arguments, +new Date())}))}),m.perform=(function (result){return result.error?gensym_2_gmjt2p00_1nq84m.continuation.unwind(result.error):result.result}),m.from=(function (proxy){return (function (f){return (function (state,g){return (function (){return m.perform(proxy.call(state,this,arguments,g))})}).call(this,{},m.wrap(f))})}),m})).call(this,this.namespace('memoize'))})})()));
caterwaul.tconfiguration('std seq continuation memoize','parser.core',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2sb3_bwlzjb=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation memoize');
var gensym_2_gmjt2sb3_bwlzjc=gensym_2_gmjt2sb3_bwlzjb;
return (function (gensym_2_gmjt2sb3_bwlzj0){((function (_){return _.parse_state=(function (input,i,result,memo){return ((function (_){return this.input=input,this.i=i,this.result=result,this.memo=memo,_})).call(this,undefined)}),((function (s){return s.from_input=(function (input){return new _.parse_state(input,0,null,{})}),((function (_){return _.accept=(function (i,r){return new this.constructor(this.input,i,r,this.memo)}),_.has_input=(function (){return this.i<this.input.length}),_.toString=(function (){return ('ps['+(this.input.substr(this.i))+', '+(this.result)+']')}),_})).call(this,s.prototype),s})).call(this,_.parse_state),_.memoize=gensym_2_gmjt2sb3_bwlzjb.memoize.from((function (c,as,f){return (function (k,m){return k in m?m[k]:(m[k]=f.apply(c,as))}).call(this,(''+(f.original.memo_id)+'|'+(as[0].i)+''),as[0].memo||(as[0].memo={}))})),_.promote_non_states=(function (f){return (function (state){return state instanceof _.parse_state?f.call(this,state):((function (_){return _&&_.result})).call(this,f.call(this,_.parse_state.from_input(state)))})}),_.identify=(function (f){return ((function (_){return _.memo_id=gensym_2_gmjt2sb3_bwlzjc.gensym(),_})).call(this,f)}),_.parser=(function (f){return _.promote_non_states(_.memoize(_.identify(f)))}),_.defparser=(function (name,f){return _.parsers[name]=(function (){return _.parser(f.apply(this,arguments))})}),_.parsers={},_})).call(this,this.namespace('parser'))})})())).tconfiguration('std seq continuation','parser.c',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2sb3_bwlzje=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2sb3_bwlzjf=gensym_2_gmjt2sb3_bwlzje;
var gensym_2_gmjt2sb3_bwlzjg=gensym_2_gmjt2sb3_bwlzje;
var gensym_2_gmjt2sb3_bwlzjh=gensym_2_gmjt2sb3_bwlzje;
return (function (gensym_2_gmjt2sb3_bwlzj1){this.configure('parser.core').parser.defparser('c',(function (x,l){return (function (){var check_index=(function (i,s,p){return i.exists((function (_,_i){return (function (s){return _[('@'+(s)+'')]&&s}).call(this,s.substr(p,_.length))}))}),index_entries=(function (xs){return (function (){var xsp=(new gensym_2_gmjt2sb3_bwlzje.seq.finite(xs)),ls=gensym_2_gmjt2sb3_bwlzjf.seq.finite.keys((xsp.map((function (_,_i){return [_.length,true]}))).object()).map((function (_,_i){return Number(_)}));
return (new gensym_2_gmjt2sb3_bwlzjg.seq.finite(ls.slice().sort((function (x,y){return y-x})))).map((function (l,li){return (xsp.filter((function (_,_i){return _.length===l})).map((function (_,_i){return [('@'+(_)+''),true]})).concat([['length',l]])).object()}))}).call(this)}),add_absolute_anchors_to=(function (x){return (function (parts){return new RegExp(('^'+(parts[1])+'$'),parts[2])}).call(this,/^\/(.*)\/(\w*)$/.exec(x.toString()))}),fail_length=(function (re,s,p,l){return re.test(s.substr(p,l))?p+(l<<1)<=s.length?fail_length(re,s,p,l<<1):l<<1:l}),split_lengths=(function (re,s,p,l,u){return (function (){var b=(function (l,u){return l+1<u?((function (m){return re.test(s.substr(p,m))?b(m,u):b(l,m)})).call(this,(l+(u-l>>1))):l});
return b(l,u)}).call(this)});
return x.constructor===String?(function (st){return (x===st.input.substr(st.i,x.length))&&(st.accept(st.i+x.length,x))}):x instanceof Array?(function (index){return (function (st){return ((function (_){return _&&st.accept(st.i+_.length,_)})).call(this,check_index(index,st.input,st.i))})}).call(this,index_entries(x)):x.constructor===RegExp?(function (x){return (function (st){return ((function (_){return _>l&&((function (_){return st.accept(st.i+_,x.exec(st.input.substr(st.i,_)))})).call(this,split_lengths(x,st.input,st.i,l,_))})).call(this,fail_length(x,st.input,st.i,l))})}).call(this,add_absolute_anchors_to(x)):x.constructor===Function?(function (st){return ((function (_){return _&&st.accept(st.i+_,st.input.substr(st.i,_))})).call(this,x.call(st,st.input,st.i))}):(function (index){return (function (st){return ((function (_){return _&&st.accept(st.i+_.length,x[_])})).call(this,check_index(index,st.input,st.i))})}).call(this,index_entries(gensym_2_gmjt2sb3_bwlzjh.seq.finite.keys(x)))}).call(this)}))})})())).tconfiguration('std opt seq continuation','parser.seq',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2sb3_bwlzjj=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
return (function (gensym_2_gmjt2sb3_bwlzj2){this.configure('parser.core').parser.defparser('seq',(function (){return (function (as){return (function (state){return (function (result){return (gensym_2_gmjt2sb3_bwlzjj.continuation.call_cc.call(this,(function (cc){return (function (gensym_2_gmjt2sb3_bwlzdp){for (var gensym_2_gmjt2sb3_bwlzdq=gensym_2_gmjt2sb3_bwlzdp>=0&&gensym_2_gmjt2sb3_bwlzdp>>3,gensym_2_gmjt2sb3_bwlzdr=gensym_2_gmjt2sb3_bwlzdp>=0&&gensym_2_gmjt2sb3_bwlzdp&7,i=0;
i<gensym_2_gmjt2sb3_bwlzdr;
 ++i)(state=as[i](state))?result.push(state.result):cc(false);
for (var gensym_2_gmjt2sb3_bwlzds=0;
gensym_2_gmjt2sb3_bwlzds<gensym_2_gmjt2sb3_bwlzdq;
 ++gensym_2_gmjt2sb3_bwlzds){(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++;
(state=as[i](state))?result.push(state.result):cc(false);
i++};
return gensym_2_gmjt2sb3_bwlzdp}).call(this,as.length),state.accept(state.i,result)})))}).call(this,[])})}).call(this,arguments)}))})})())).tconfiguration('std opt seq continuation','parser.alt',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2sb3_bwlzjl=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
return (function (gensym_2_gmjt2sb3_bwlzj3){this.configure('parser.core').parser.defparser('alt',(function (){return (function (as){return (function (state){return as.exists((function (_,_i){return _(state)}))})}).call(this,(new gensym_2_gmjt2sb3_bwlzjl.seq.finite(arguments)))}))})})())).tconfiguration('std opt seq continuation','parser.times',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2sb3_bwlzjn=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2sb3_bwlzjo=gensym_2_gmjt2sb3_bwlzjn;
var gensym_2_gmjt2sb3_bwlzjp=gensym_2_gmjt2sb3_bwlzjn;
return (function (gensym_2_gmjt2sb3_bwlzj4){this.configure('parser.core').parser.defparser('times',(function (p,lower,upper){return (function (state){return (function (count,result){return (gensym_2_gmjt2sb3_bwlzjn.continuation.call_cc.call(this,(function (cc){return (function (gensym_2_gmjt2sb3_bwlzdp){for (var gensym_2_gmjt2sb3_bwlzdq=gensym_2_gmjt2sb3_bwlzdp>=0&&gensym_2_gmjt2sb3_bwlzdp>>3,gensym_2_gmjt2sb3_bwlzdr=gensym_2_gmjt2sb3_bwlzdp>=0&&gensym_2_gmjt2sb3_bwlzdp&7,i=0;
i<gensym_2_gmjt2sb3_bwlzdr;
 ++i) ++count,(state=p(state))?result.push(state.result):cc(false);
for (var gensym_2_gmjt2sb3_bwlzds=0;
gensym_2_gmjt2sb3_bwlzds<gensym_2_gmjt2sb3_bwlzdq;
 ++gensym_2_gmjt2sb3_bwlzds){ ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++;
 ++count,(state=p(state))?result.push(state.result):cc(false);
i++};
return gensym_2_gmjt2sb3_bwlzdp}).call(this,lower),true})))&&(gensym_2_gmjt2sb3_bwlzjo.continuation.call_cc.call(this,(function (){var loop=(function (cc){return ( !upper||count++<upper)&&state.has_input()&&((function (_){return (_)&&(state=_),_})).call(this,p(state))?result.push(state.result)&&(gensym_2_gmjt2sb3_bwlzjp.continuation.call_tail.call(loop,cc)):cc(state.accept(state.i,result))});
return loop}).call(this)))}).call(this,0,[])})}))})})())).tconfiguration('std opt seq continuation','parser.opt',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2sb3_bwlzj5){this.configure('parser.core').parser.defparser('opt',(function (p){return (function (state){return (function (){var s=p(state),n=s?s.i:state.i,r=s&&s.result;
return state.accept(n,r)}).call(this)})}))})})())).tconfiguration('std opt seq continuation','parser.match',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2sb3_bwlzj6){((function (_){return _.defparser('match',(function (p){return (function (state){return ((function (_){return _&&state.accept(state.i,state.result)})).call(this,p(state))})})),_.defparser('reject',(function (p){return (function (state){return ((function (_){return  !_&&state.accept(state.i,null)})).call(this,p(state))})})),_})).call(this,this.configure('parser.core').parser)})})())).tconfiguration('std opt seq continuation','parser.bind',caterwaul.precompiled_internal((function (){null;
return (function (gensym_2_gmjt2sb3_bwlzj7){((function (_){return _.defparser('bind',(function (p,f){return (function (state){return ((function (_){return _&&_.accept(_.i,f.call(_,_.result))})).call(this,p(state))})})),_})).call(this,this.configure('parser.core').parser)})})())).tconfiguration('std opt seq continuation','parser.dsl',caterwaul.precompiled_internal((function (){var gensym_2_gmjt2sb3_bwlzju=caterwaul.parse('peg[_]');
var gensym_2_gmjt2sb3_bwlzjv=caterwaul.parse('qg[l*[_bindings][_parser]]');
var gensym_2_gmjt2sb3_bwlzjw=caterwaul.clone('std.qs std.qg std.bind std.lvalue std.cond std.fn std.obj std.ref std.string std opt.unroll opt seq.core seq.finite.core seq.finite.object seq.finite.mutability seq.finite.traversal seq.finite.zip seq.finite.quantification seq.finite.serialization seq.infinite.core seq.infinite.y seq.infinite.transform seq.infinite.traversal seq.numeric seq.dsl seq continuation.core continuation.unwind continuation.cps continuation.delimited continuation');
var gensym_2_gmjt2sb3_bwlzjx=caterwaul.parse('_x=_y');
var gensym_2_gmjt2sb3_bwlzjy=caterwaul.parse('_name(_x,_y)');
var gensym_2_gmjt2sb3_bwlzjz=caterwaul.parse('_name(_x,_y)');
var gensym_2_gmjt2sb3_bwlzk0=caterwaul.parse('_name(_x)');
var gensym_2_gmjt2sb3_bwlzk1=caterwaul.parse('_(_)');
var gensym_2_gmjt2sb3_bwlzk2=caterwaul.parse('_x(_y)');
var gensym_2_gmjt2sb3_bwlzk3=caterwaul.parse('_/_');
var gensym_2_gmjt2sb3_bwlzk4=caterwaul.parse('_%_');
var gensym_2_gmjt2sb3_bwlzk5=caterwaul.parse('_>>_');
var gensym_2_gmjt2sb3_bwlzk6=caterwaul.parse('[_]');
var gensym_2_gmjt2sb3_bwlzk7=caterwaul.parse('_');
var gensym_2_gmjt2sb3_bwlzk8=caterwaul.parse('_[_]');
var gensym_2_gmjt2sb3_bwlzk9=caterwaul.parse('times(_x,_l)');
var gensym_2_gmjt2sb3_bwlzka=caterwaul.parse('_[_,_]');
var gensym_2_gmjt2sb3_bwlzkb=caterwaul.parse('times(_x,_l,_u)');
var gensym_2_gmjt2sb3_bwlzkc=gensym_2_gmjt2sb3_bwlzjw;
return (function (gensym_2_gmjt2sb3_bwlzj8){this.configure('parser.core').rmacro(gensym_2_gmjt2sb3_bwlzju,(function (x){return (function (outer){return gensym_2_gmjt2sb3_bwlzjv.replace({_bindings:new this.syntax(',',gensym_2_gmjt2sb3_bwlzjw.seq.finite.pairs(this.parser.parsers).map((function (_,_i){return gensym_2_gmjt2sb3_bwlzjx.replace({_x:_[0],_y:new outer.ref(_[1])})}))),_parser:this.parser.dsl.macroexpand(x)})}).call(this,this)})),this.parser.dsl=((function (dsl){return ((function (_){return (function (){var e=dsl.macroexpand,fb=(function (op,name){return (function (x,y){return gensym_2_gmjt2sb3_bwlzjy.replace({_name:name,_x:((function (_){return _.data=',',_})).call(this,x.flatten(op).map(e)),_y:e(y)})})}),b=(function (name){return (function (x,y){return gensym_2_gmjt2sb3_bwlzjz.replace({_name:name,_x:e(x),_y:y})})}),u=(function (name){return (function (x){return gensym_2_gmjt2sb3_bwlzk0.replace({_name:name,_x:e(x)})})});
return _(gensym_2_gmjt2sb3_bwlzk1,(function (x,y){return gensym_2_gmjt2sb3_bwlzk2.replace({_x:e(x),_y:y})})),_(gensym_2_gmjt2sb3_bwlzk3,fb('/','alt')),_(gensym_2_gmjt2sb3_bwlzk4,fb('%','seq')),_(gensym_2_gmjt2sb3_bwlzk5,b('bind')),_(gensym_2_gmjt2sb3_bwlzk6,u('opt')),_(gensym_2_gmjt2sb3_bwlzk7.as('('),(function (x){return e(x).as('(')})),_(gensym_2_gmjt2sb3_bwlzk8,(function (x,l){return gensym_2_gmjt2sb3_bwlzk9.replace({_x:e(x),_l:l})})),_(gensym_2_gmjt2sb3_bwlzka,(function (x,l,u){return gensym_2_gmjt2sb3_bwlzkb.replace({_x:e(x),_l:l,_u:u})}))}).call(this),_})).call(this,dsl.macro),dsl})).call(this,gensym_2_gmjt2sb3_bwlzkc.global().clone())})})())).configuration('parser',function (gensym_2_gmjt2sb3_bwlzj9){this.configure('parser.core parser.c parser.seq parser.alt parser.times parser.opt parser.match parser.bind parser.dsl')});
