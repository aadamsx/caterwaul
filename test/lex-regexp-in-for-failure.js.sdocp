sdocp('test/lex-regexp-in-for-failure.js.sdoc', 'Observed failure case:\nfor (var k in hash) /foo/.test(k) || ...\n\nThe problem here is that the lexer assumes that the parens surrounding the for-loop condition end an expression; there needs to be a lexer workaround for block-accepting keywords like this.\n\ntest(function () {\n  caterwaul.lex(\'for (var k in hash) /foo/.test(k) && bar()\');\n  caterwaul.lex(\'if (k in hash) /foo/.test(k) && bar(); else /foo/.test(k) && bar()\');\n  caterwaul.lex(\'if (k in hash) /foo/.test(k) && bar()\');\n  caterwaul.lex(\'while (k in hash) /foo/.test(k) && bar()\');\n  caterwaul.lex(\'with (k) /foo/.test(k) && toString()\');\n});\n');