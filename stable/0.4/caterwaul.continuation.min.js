caterwaul.configuration('continuation.core',function (){this.shallow('continuation',{})}).tconfiguration('std','continuation.unwind',function (){this.configure('std.fn continuation.core').continuation/se[_.unwind_protect=function (escape,f){try {return f()}catch (e){return escape(e)}},_.unwind=function (e){throw e}];this.rmacro(qs[unwind_protect[_][_]],fn[escape,body][qs[_f(fb[e][_escape],fb_[_body])].replace({_f:new this.ref(this.continuation.unwind_protect),_escape:escape,_body:body})]).rmacro(qs[unwind[_]],fn[e][qs[_f(_e)].replace({_f:new this.ref(this.continuation.unwind),_e:e})])}).tconfiguration('std','continuation.cps',function (){let[cps_convert(v,f,b)=f.replace({_:qs[fn[_v][_b]].replace({_v:v,_b:b})})] in this.configure('continuation.core').rmacro(qs[let/cps[_,_<-_][_]],fn[cs,v,f,b][qs[let/cps[cs][_f]].replace({cs:cs,_f:cps_convert(v,f,b)})]).rmacro(qs[let/cps[_<-_][_]],cps_convert)}).tconfiguration('std','continuation.delimited',function (){var magic=this.configure('continuation.core').continuation.magic=this.magic('continuation.delimited');this.continuation.call_cc=function (f){var escaped=false,cc=function (x){escaped=true;throw x},frame={magic:magic,continuation:f,parameters:[cc]};try {while ((frame=frame.continuation.apply(this,frame.parameters))&&frame&&frame.magic===magic);return frame}catch (e){if (escaped)return e;else throw e}};this.continuation.call_tail(f)={magic:magic,continuation:f,parameters:Array.prototype.slice.call(arguments,1)};this.rmacro(qs[call/cc[_]],fn[f][qs[qg[_call_cc.call(this,_f)]].replace({_call_cc:new this.ref(this.continuation.call_cc),_f:f})]).rmacro(qs[call/tail[_(_)]],fn[f,args][qs[qg[_call_tail(_f,_args)]].replace({_call_tail:new this.ref(this.continuation.call_tail),_f:f,_args:args})])}).configuration('continuation',function (){this.configure('continuation.core continuation.unwind continuation.cps continuation.delimited')});