(function(a){return a(a,(function(b){return function(){return ++b}})(0))})(function(f,c,p){var ad=function(al){return al.split(/\s+/)},B=function(al,am){return am&&am.call(al,al)||al},o=function(al){throw new Error(al)},m=(function(an,al,am){return function(){return[am,an,++al]}})(+new Date(),Math.random()*(1<<30)>>>0,c()),U=function(am){var al=m();return["gensym",am||"",al[0].toString(36),al[1].toString(36),al[2].toString(36)].join("_")},M=function(ap,am){for(var an=0,ao=[],al=am.length;an<al;++an){ao.push(ap(am[an],an))}return ao},w=function(am,al){return M(function(an){return an instanceof Array?w(am,an):am(an)})},ab=function(ao){for(var an=0,am=ad(ao),ap={},al=am.length;an<al;++an){ap[am[an]]=true}return s(ap)},Z=(function(am){for(var al in am){if(am.hasOwnProperty(al)){return true}}})({toString:true})?function(ap){for(var ao=1,al=arguments.length,an;ao<al;++ao){if(an=arguments[ao]){for(var am in an){if(g(an,am)){ap[am]=an[am]}}}}return ap}:function(ap){for(var ao=1,al=arguments.length,an;ao<al;++ao){if(an=arguments[ao]){for(var am in an){if(g(an,am)){ap[am]=an[am]}}if(an.toString&&!/\[native code\]/.test(an.toString.toString())){ap.toString=an.toString}}}return ap},Y=U("hash_annotation"),s=function(an){var al=0;for(var am in an){k.call(an,am)&&(al=am.length>al?am.length:al)}an[Y]=al;return an},g=function(am,al){return al!=null&&!(al.length>am[Y])&&k.call(am,al)},k=Object.prototype.hasOwnProperty,ac=function(){var al=function(){return al.init.apply(al,arguments)};return al},ae=typeof caterwaul==="undefined"?p:caterwaul,ak=B(ac(),function(){this.deglobalize=function(){caterwaul=ae;return ak};Z(this,{merge:Z,map:M,unique:c,rmap:w,gensym:U})}),aj=ab(". new ++ -- u++ u-- u+ u- typeof u~ u! ! * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || ? = += -= *= /= %= &= |= ^= <<= >>= >>>= : , return throw case var const break continue void else u; ;"),R=function(ao){for(var an=0,am=[false];an<8;++an){am.push.apply(am,am)}for(var an=0,al=ao.length;an<al;++an){am[ao.charCodeAt(an)]=true}return am},ah=R(".0123456789"),T=R("0123456789"),y=R("0123456789abcdefABCDEFx"),K=R("eE"),i=R(" \n\r\t"),t=R("()[]{}"),r=R("([{"),x=R("+-*/%&|^!~=<>?:;.,"),I=R("\n\r"),j=R("gims"),N=R("'\"/"),n="/".charCodeAt(0),Q="*".charCodeAt(0),l="\\".charCodeAt(0),X="x".charCodeAt(0),L=".".charCodeAt(0),S="0".charCodeAt(0),ag=ab("++ --"),V=R("$_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),J=M(ab,["function","( [ . [] ()","new delete","u++ u-- ++ -- typeof u~ u! u+ u-","* / %","+ -","<< >> >>>","< > <= >= instanceof in","== != === !==","&","^","|","&&","||","case","?","= += -= *= /= %= &= |= ^= <<= >>= >>>=",":",",","return throw break continue void","var const","if else try catch finally for switch with while do",";"]),G=ab("= += -= *= /= %= &= ^= |= <<= >>= >>>= ~ ! new typeof u+ u- -- ++ u-- u++ ? if else function try catch finally for switch case with while do"),E=(function(an){for(var ap={},ao=0,al=an.length;ao<al;++ao){for(var am in an[ao]){g(an[ao],am)&&(ap[am]=ao)}}return s(ap)})(J),v=(function(an){for(var ap=[],aq=0,al=an.length,ao=null;ao=an[aq],ap[aq]=true,aq<al;++aq){for(var am in ao){if(g(ao,am)&&(ap[aq]=ap[aq]&&!g(G,am))){break}}}return ap})(J),A=ab("[] . () * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || = += -= *= /= %= &= |= ^= <<= >>= >>>= , : ;"),W=s({"function":2,"if":1,"do":1,"catch":1,"try":1,"for":1,"while":1,"with":1,"switch":1}),P=s({"if":"else","do":"while","catch":"finally","try":"catch"}),C=ab("[] ()"),af=ab("return throw break continue else"),D=ab("u+ u- u! u~ u++ u-- new typeof finally case var const void delete"),h=ab("; {"),aa=ab("i;"),H=ab("++ --"),q=s({"(":")","[":"]","{":"}","?":":"}),F=ab("[ ("),O=ab("?"),e=ab("function if for while catch void delete new typeof in instanceof"),z=ab("function"),u=ak.syntax_common={_replace:function(al){return(al.l=this.l)&&(this.l.r=al),(al.r=this.r)&&(this.r.l=al),this},_append_to:function(al){return al&&al._append(this),this},_reparent:function(al){return this.p&&this.p[0]===this&&(this.p[0]=al),this},_fold_l:function(al){return this._append(this.l&&this.l._unlink(this)||a)},_append:function(al){return(this[this.length++]=al)&&(al.p=this),this},_fold_r:function(al){return this._append(this.r&&this.r._unlink(this)||a)},_sibling:function(al){return al.p=this.p,(this.r=al).l=this},_fold_lr:function(){return this._fold_l()._fold_r()},_fold_rr:function(){return this._fold_r()._fold_r()},_wrap:function(al){return al.p=this._replace(al).p,this._reparent(al),delete this.l,delete this.r,this._append_to(al)},_unlink:function(al){return this.l&&(this.l.r=this.r),this.r&&(this.r.l=this.l),delete this.l,delete this.r,this._reparent(al)},pop:function(){return --this.length,this},push:function(al){return this[this.length++]=al||a,this},id:function(){var al=U("id");return(this.id=function(){return al})()},each:function(an){for(var am=0,al=this.length;am<al;++am){an(this[am],am)}return this},map:function(an){for(var ao=new this.constructor(this),am=0,al=this.length;am<al;++am){ao.push(an(this[am],am)||this[am])}return ao},reach:function(al){al(this);this.each(function(am){am.reach(al)});return this},rmap:function(am){var al=am(this);return !al||al===this?this.map(function(an){return an.rmap(am)}):al.rmap===p?new this.constructor(al):al},clone:function(){return this.rmap(function(){return false})},collect:function(am){var al=[];this.reach(function(an){am(an)&&al.push(an)});return al},replace:function(al){var am;return k.call(al,this.data)&&(am=al[this.data])?am.constructor===String?B(this.map(function(an){return an.replace(al)}),function(){this.data=am}):am:this.map(function(an){return an.replace(al)})},repopulated_with:function(al){return new this.constructor(this.data,al)},with_data:function(al){return new this.constructor(al,Array.prototype.slice.call(this))},change:function(am,al){return B(new this.constructor(this.data,Array.prototype.slice.call(this)),function(an){an[am]=al})},compose_single:function(al,am){return this.change(al,am(this[al]))},traverse:function(al){al({entering:this});al({exiting:this.each(function(am){am.traverse(al)})});return this},flatten:function(al){al=al||this.data;return al!==this.data?this.as(al):!(g(A,al)&&this.length)?this:g(G,al)?B(new this.constructor(al),bind(function(an){for(var am=this;am&&am.data===al;am=am[1]){an.push(am[0])}an.push(am)},this)):B(new this.constructor(al),bind(function(ao){for(var am=this,an=[];am.data===al;am=am[0]){am[1]&&an.push(am[1])}an.push(am);for(am=an.length-1;am>=0;--am){ao.push(an[am])}},this))},unflatten:function(){var am=this,al=g(G,this.data);return this.length<=2?this:B(new this.constructor(this.data),function(ap){if(al){for(var ao=0,an=am.length-1;ao<an;++ao){ap=ap.push(am[ao]).push(ao<an-2?new am.constructor(am.data):am[ao])[1]}}else{for(var ao=am.length-1;ao>=1;--ao){ap=ap.push(ao>1?new am.constructor(am.data):am[0]).push(am[ao])[0]}}})},as:function(al){return this.data===al?this:new this.constructor(al).push(this)},bindings:function(am){var al=am||{};this.reach(function(an){if(an.binds_a_value){al[an.data]=an.value}});return al},match:function(an,ao){an=an.constructor===String?ak.parse(an):an;ao||(ao={_:an});if(this.is_wildcard()){return ao[this.data]=an,ao}else{if(this.length===an.length&&this.data===an.data){for(var am=0,al=this.length;am<al;++am){if(!this[am].match(an[am],ao)){return null}}return ao}}},toString:function(){var al=[""];this.serialize(al);return al.join("")},structure:function(){if(this.length){return"("+['"'+this.data+'"'].concat(M(function(al){return al.structure()},this)).join(" ")+")"}else{return this.data}}};ak.syntax_subclass=function(am){var al=Array.prototype.slice.call(arguments,1);Z.apply(this,[am.prototype,u].concat(al));am.prototype.constructor=am;return am};var b=ak.parse_hex=function(ao){for(var al=0,an=0,am=ao.length,ap;an<am;++an,al*=16){al+=(ap=ao.charCodeAt(an))<=58?ap-48:(ap&95)-55}return al},ai=ak.parse_octal=function(ao){for(var al=0,an=0,am=ao.length;an<am;++an,al*=8){al+=ao.charCodeAt(an)-48}return al},d=ak.unescape_string=function(ap){for(var ao=0,aq,am=ap.length,al=[],an=false;ao<am;++ao){if(an){an=false,al.push((aq=ap.charAt(ao))==="\\"?"\\":aq==="n"?"\n":aq==="r"?"\r":aq==="b"?"\b":aq==="f"?"\f":aq==="0"?"\u0000":aq==="t"?"\t":aq==="v"?"\v":aq==='"'||aq==="'"?aq:aq==="x"?String.fromCharCode(b(ap.substring(ao,++ao+1))):aq==="u"?String.fromCharCode(b(ap.substring(ao,(ao+=3)+1))):String.fromCharCode(ai(ap.substring(ao,(ao+=2)+1))))}else{if((aq=ap.charAt(ao))==="\\"){an=true}else{al.push(aq)}}}return al.join("")};ak.javascript_tree_type_methods={is_string:function(){return/['"]/.test(this.data.charAt(0))},as_escaped_string:function(){return this.data.substr(1,this.data.length-2)},is_number:function(){return/^-?(0x|\d|\.\d+)/.test(this.data)},as_number:function(){return Number(this.data)},is_boolean:function(){return this.data==="true"||this.data==="false"},as_boolean:function(){return this.data==="true"},is_regexp:function(){return/^\/./.test(this.data)},as_escaped_regexp:function(){return this.data.substring(1,this.data.lastIndexOf("/"))},is_array:function(){return this.data==="["},as_unescaped_string:function(){return d(this.as_escaped_string())},is_wildcard:function(){return this.data.charCodeAt(0)===95},is_identifier:function(){return this.length===0&&/^[A-Za-z_$]\w*$/.test(this.data)&&!this.is_boolean()&&!this.is_null_or_undefined()&&!g(aj,this.data)},has_grouped_block:function(){return g(W,this.data)},is_block:function(){return g(h,this.data)},is_blockless_keyword:function(){return g(af,this.data)},is_null_or_undefined:function(){return this.data==="null"||this.data==="undefined"},is_constant:function(){return this.is_number()||this.is_string()||this.is_boolean()||this.is_regexp()||this.is_null_or_undefined()},left_is_lvalue:function(){return/=$/.test(this.data)||/\+\+$/.test(this.data)||/--$/.test(this.data)},is_empty:function(){return !this.length},has_parameter_list:function(){return this.data==="function"||this.data==="catch"},has_lvalue_list:function(){return this.data==="var"||this.data==="const"},is_dereference:function(){return this.data==="."||this.data==="[]"},is_invocation:function(){return this.data==="()"},is_contextualized_invocation:function(){return this.is_invocation()&&this[0].is_dereference()},is_invisible:function(){return g(aa,this.data)},is_binary_operator:function(){return g(A,this.data)},is_prefix_unary_operator:function(){return g(D,this.data)},is_postfix_unary_operator:function(){return g(H,this.data)},is_unary_operator:function(){return this.is_prefix_unary_operator()||this.is_postfix_unary_operator()},accepts:function(al){return g(P,this.data)&&P[this.data]===(al.data||al)}};ak.javascript_tree_serialization_methods={ends_with_block:function(){var al=this[W[this.data]];return this.data==="{"||g(W,this.data)&&(this.data!=="function"||this.length===3)&&al&&al.ends_with_block()},serialize:function(ao){var am=this.length,ap=this.data,al=";\n",an=function(aq){if(V[ao[ao.length-1].charCodeAt(0)]===V[aq.charCodeAt(0)]){ao.push(" ",aq)}else{ao.push(aq)}};switch(am){case 0:if(g(af,ap)){return an(ap.replace(/^u/,""))}else{if(g(q,ap)){return an(ap),an(q[ap])}else{return an(ap)}}case 1:if(g(D,ap)||g(af,ap)){return an(ap.replace(/^u/,"")),this[0].serialize(ao)}else{if(g(q,ap)){return an(ap),this[0].serialize(ao),an(q[ap])}else{if(g(A,ap)){return an("/* unary "+ap+" node */"),this[0].serialize(ao)}else{return this[0].serialize(ao),an(ap)}}}case 2:if(g(C,ap)){return this[0].serialize(ao),an(ap.charAt(0)),this[1].serialize(ao),an(ap.charAt(1))}else{if(g(W,ap)){return an(ap),this[0].serialize(ao),this[1].serialize(ao)}else{if(g(aa,ap)){return this[0].serialize(ao),this[1].serialize(ao)}else{if(ap===";"){return this[0].serialize(ao),an(al),this[1].serialize(ao)}else{return this[0].serialize(ao),an(ap),this[1].serialize(ao)}}}}default:if(g(O,ap)){return this[0].serialize(ao),an(ap),this[1].serialize(ao),an(":"),this[2].serialize(ao)}else{if(g(W,ap)){return this.accepts(this[2])&&!this[1].ends_with_block()?(an(ap),this[0].serialize(ao),this[1].serialize(ao),an(al),this[2].serialize(ao)):(an(ap),this[0].serialize(ao),this[1].serialize(ao),this[2].serialize(ao))}else{return this.unflatten().serialize(ao)}}}}};ak.ref=ak.syntax_subclass(function(am,al){if(am instanceof this.constructor){this.value=am.value,this.data=am.data}else{this.value=am,this.data=U(al&&al.constructor===String?al:"ref")}},ak.javascript_tree_type_methods,ak.javascript_tree_serialization_methods,{binds_a_value:true,length:0},{replace:function(al){var am;return k.call(al,this.data)&&(am=al[this.data])?am.constructor===String?B(new this.constructor(this.value),function(){this.data=am}):am:this}});ak.syntax=ak.syntax_subclass(function(aq){if(aq instanceof this.constructor){this.data=aq.data,this.length=0}else{this.data=aq&&aq.toString();this.length=0;for(var ao=1,al=arguments.length,an;an=arguments[ao],ao<al;++ao){for(var am=0,at=an.length,ap,ar;an instanceof Array?(ap=an[am],am<at):(ap=an,!am);++am){this._append((ar=ap.constructor)===String||ar===Number||ar===Boolean?new this.constructor(ap):ap)}}}},ak.javascript_tree_type_methods,ak.javascript_tree_serialization_methods);var a=ak.empty=new ak.syntax("");ak.parse=function(aC){if(aC.constructor===ak.syntax){return aC}var aF=aC.toString(),az=0,aR=0,aI=true,aS=false,aH=false,au=false,aG=0,aE="",aN=0,aL=aF.length,am=function(aV){return aF.charCodeAt(aV)},av=[],ao=null,al=null,ay=null,aq=M(function(){return[]},J),an=[],aw=[a],aP=function(aV){return aw.push(aV),aV},at=function(aV){return al?al._sibling(al=aV):(al=aV._append_to(ay)),aP(aV)},aK=this.syntax;if(aL===0){return a}while((az=aN)<aL){while(i[aR=am(aN)]&&aN<aL){az=++aN}aS=au=aH=aE=false;if(t[aR]){aE=!!++aN;aI=r[aR]}else{if(aR===n&&am(aN+1)===Q&&(aN+=2)){while(++aN<aL&&am(aN)!==n||am(aN-1)!==Q){}aE=!++aN}else{if(aR===n&&am(aN+1)===n){while(++aN<aL&&!I[am(aN)]){}aE=false}else{if(N[aR]&&(aG=aR)&&aI&&!(aI=!(aE=aF.charAt(aN)))){while(++aN<aL&&(aR=am(aN))!==aG||aS){aS=!aS&&aR===l}while(++aN<aL&&j[am(aN)]){}aE=true}else{if(aR===S&&y[am(aN+1)]){while(++aN<aL&&y[am(aN)]){}aI=!(aE=true)}else{if(ah[aR]&&(aR!==L||T[am(aN+1)])){while(++aN<aL&&(T[aR=am(aN)]||(aH^(aH|=aR===L))||(au^(au|=K[aR]&&++aN)))){}while(aN<aL&&T[am(aN)]){++aN}aI=!(aE=true)}else{if(x[aR]&&(aE=aI?"u":"",aI=true)){while(aN<aL&&x[am(aN)]&&g(aj,aE+aF.charAt(aN))){aE+=aF.charAt(aN++)}aI=!g(ag,aE)}else{while(++aN<aL&&V[am(aN)]){}aI=g(aj,aE=aF.substring(az,aN))}}}}}}}if(aN===az){throw new Error('Caterwaul lex error at "'+aF.substr(az,40)+'" with leading context "'+aF.substr(az-40,40)+'" (probably a Caterwaul bug)')}if(aE===false){continue}aE=aE===true?aF.substring(az,aN):aE==="u;"?";":aE;aE===ao?(av.pop(),ao=av[av.length-1],al=al?al.p:ay,ay=null):(g(q,aE)?(av.push(ao=q[aE]),ay=at(aP(new aK(aE))),al=null):at(aP(new aK(aE))),g(E,aE)&&aq[E[aE]].push(al||ay));aI|=aE===")"&&al.l&&g(W,al.l.data)}for(var aN=0,aL=aq.length,aA,aU;aU=aq[aN],aA=v[aN],aN<aL;++aN){for(var aM=aA?0:aU.length-1,aD=aU.length,ax=aA?1:-1,aJ,aT,aB;aA?aM<aD:aM>=0;aM+=ax){if(g(A,aT=(aJ=aU[aM]).data)){aJ._fold_lr()}else{if(g(F,aT)&&aJ.l&&!((aB=aJ.l.l)&&g(W,aB.data))&&(aJ.l.data==="."||(aJ.l.data==="function"&&aJ.l.length===2)||!(g(aj,aJ.l.data)||g(e,aJ.l.data)))){an.push(aJ.l._wrap(aP(new aK(aT+q[aT]))).p._fold_r())}else{if(g(H,aT)){aJ._fold_l()}else{if(g(D,aT)){aJ._fold_r()}else{if(g(O,aT)){aJ._fold_lr();var aQ=aJ[1];aJ[1]=aJ[0];aJ[0]=aQ}else{if(g(W,aT)&&aJ.r&&aJ.r.data!==":"){for(var ar=0,aO=W[aT];ar<aO&&aJ.r&&!g(h,aJ.r.data);++ar){aJ._fold_r()}aJ.r&&(aJ.r.data===";"?aJ.push(a):aJ._fold_r());if(g(P,aT)&&P[aT]===(aJ.r&&aJ.r.r&&aJ.r.r.data)){aJ._fold_r().pop()._fold_r()}else{if(g(P,aT)&&P[aT]===(aJ.r&&aJ.r.data)){aJ._fold_r()}}}else{if(g(af,aT)){aJ.r&&aJ.r.data!==";"&&aJ._fold_r()}}}}}}}}}for(var aN=aw.length-1,aU;aN>=0;--aN){(aU=aw[aN]).r&&aU._wrap(aP(new aK("i;"))).p._fold_r()}for(var aN=0,aL=an.length,aU,ap;aN<aL;++aN){(ap=(aU=an[aN])[1]=aU[1][0]||a)&&(ap.p=aU)}while(al.p){al=al.p}for(var aN=aw.length-1,aU;aN>=0;--aN){delete (aU=aw[aN]).p,delete aU.l,delete aU.r}return al};(function(){var al=ak.parse("var _bindings; return(_expression)"),an=ak.parse("_variable = _base._variable"),am=ak.parse("undefined = void(0)");ak.compile=function(aA,au,az){az=Z({gensym_renaming:true},az);var aq=Z({},this._environment||{},au||{},aA.bindings()),aw=[am],ay=U("base");for(var at in aq){if(k.call(aq,at)&&at!=="this"){aw.push(an.replace({_variable:at,_base:ay}))}}var ax=new this.syntax(",",aw).unflatten(),ao=al.replace({_bindings:ax,_expression:aA});if(az.gensym_renaming){var ar=this.gensym_rename_table(ao);for(var at in aq){k.call(aq,at)&&(aq[ar[at]||at]=aq[at])}ao=ao.replace(ar);ay=ar[ay]}var ap=ao.toString();try{return(new Function(ay,ap)).call(aq["this"],aq)}catch(av){throw new Error((av.message||av)+" while compiling "+ap)}};ak.gensym_rename_table=function(ay){var aw={},au=[],ax=/^gensym_(.*)_\d+_[^_]+_[^_]+$/;ay.reach(function(az){var aA=az.data;ax.test(aA)&&(aw[aA]||au.push(aA));aw[aA]=aA.replace(ax,"$1")||"anon"});var ao={},av=function(az){if(!(az in aw)){return az}var aA=ao[az]||0;while(aw[az+(++aA).toString(36)]){}return az+(ao[az]=aA).toString(36)};for(var ap={},ar=0,aq=au.length,at;ar<aq;++ar){ap[at=au[ar]]||(aw[ap[at]=av(aw[at])]=true)}return ap}})();ak.init=function(am){var al=function(ap,an,ao){return ap.constructor===Function||ap.constructor===String?ak.compile(al.call(al,ak.parse(ap)),an,ao):am?ap.rmap(function(aq){return am.call(al,aq,an,ao)}):ap};al.global=ak;al.macroexpander=am;return al};ak.initializer=f;ak.clone=function(){return B(f(f,c).deglobalize(),function(){for(var al in ak){this[al]||(this[al]=ak[al])}})};return caterwaul=ak});