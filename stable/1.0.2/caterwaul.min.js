(function(a){return a(a,(function(b){return function(){return ++b}})(0))})(function(e,c,o){var ad=function(ak){return ak.split(/\s+/)},A=function(ak,al){return al&&al.call(ak,ak)||ak},n=function(ak){throw new Error(ak)},l=(function(am,ak,al){return function(){return[al,am,++ak]}})(+new Date(),Math.random()*(1<<30)>>>0,c()),U=function(al){var ak=l();return["gensym",al||"",ak[0].toString(36),ak[1].toString(36),ak[2].toString(36)].join("_")},H=function(){for(var an=[],am=0,al=arguments.length,ak;am<al;++am){(ak=arguments[am]) instanceof Array?an=an.concat(H.apply(this,ak)):an.push(ak)}return an},M=function(ao,al){for(var am=0,an=[],ak=al.length;am<ak;++am){an.push(ao(al[am],am))}return an},v=function(al,ak){return M(function(am){return am instanceof Array?v(al,am):al(am)})},ab=function(an){for(var am=0,al=ad(an),ao={},ak=al.length;am<ak;++am){ao[al[am]]=true}return r(ao)},Z=function(ao){for(var an=1,ak=arguments.length,am;an<ak;++an){if(am=arguments[an]){for(var al in am){f(am,al)&&(ao[al]=am[al])}}}return ao},Y=U("hash_annotation"),r=function(am){var ak=0;for(var al in am){j.call(am,al)&&(ak=al.length>ak?al.length:ak)}am[Y]=ak;return am},f=function(al,ak){return ak!=null&&!(ak.length>al[Y])&&j.call(al,ak)},j=Object.prototype.hasOwnProperty;var ac=function(){var ak=function(){return ak.init.apply(ak,arguments)};return ak},ae=typeof caterwaul==="undefined"?o:caterwaul,aj=ac();aj.deglobalize=function(){caterwaul=ae;return aj};aj.version=function(ak){return ak?(this._version=ak,ae&&ae.version&&ae.version.constructor===Function&&ae.version()===ak?this.deglobalize():this):this._version};aj.reinitialize=function(ak){var al=(ak||function(am){return am})(this.initializer);return al(al,this.unique).version(this.version())};Z(aj,{merge:Z,map:M,rmap:v,flatten:H,gensym:U,unique:c,initializer:e,variadic:function(ak){return function(){for(var an=[],am=0,al=arguments.length;am<al;++am){an.push(ak.call(this,arguments[am]))}return an}},right_variadic:function(ak){return function(){for(var ao=[],an=0,am=arguments.length-1,al=arguments[am];an<am;++an){ao.push(ak.call(this,arguments[an],al))}return ao}}});var ai=ab(". new ++ -- u++ u-- u+ u- typeof u~ u! ! * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || ? = += -= *= /= %= &= |= ^= <<= >>= >>>= : , return throw case var const break continue void else u; ;"),R=function(an){for(var am=0,al=[false];am<8;++am){al.push.apply(al,al)}for(var am=0,ak=an.length;am<ak;++am){al[an.charCodeAt(am)]=true}return al},ah=R(".0123456789"),T=R("0123456789"),x=R("0123456789abcdefABCDEFx"),K=R("eE"),h=R(" \n\r\t"),s=R("()[]{}"),q=R("([{"),w=R("+-*/%&|^!~=<>?:;.,"),I=R("\n\r"),i=R("gims"),N=R("'\"/"),m="/".charCodeAt(0),Q="*".charCodeAt(0),k="\\".charCodeAt(0),X="x".charCodeAt(0),L=".".charCodeAt(0),S="0".charCodeAt(0),ag=ab("++ --"),V=R("$_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),J=M(ab,["function","( [ . [] ()","new delete","u++ u-- ++ -- typeof u~ u! u+ u-","* / %","+ -","<< >> >>>","< > <= >= instanceof in","== != === !==","&","^","|","&&","||","case","?","= += -= *= /= %= &= |= ^= <<= >>= >>>=",":",",","return throw break continue void","var const","if else try catch finally for switch with while do",";"]),F=ab("= += -= *= /= %= &= ^= |= <<= >>= >>>= ~ ! new typeof u+ u- -- ++ u-- u++ ? if else function try catch finally for switch case with while do"),D=(function(am){for(var ao={},an=0,ak=am.length;an<ak;++an){for(var al in am[an]){f(am[an],al)&&(ao[al]=an)}}return r(ao)})(J),u=(function(am){for(var ao=[],ap=0,ak=am.length,an=null;an=am[ap],ao[ap]=true,ap<ak;++ap){for(var al in an){if(f(an,al)&&(ao[ap]=ao[ap]&&!f(F,al))){break}}}return ao})(J),z=ab("[] . () * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || = += -= *= /= %= &= |= ^= <<= >>= >>>= , : ;"),W=r({"function":2,"if":1,"do":1,"catch":1,"try":1,"for":1,"while":1,"with":1,"switch":1}),P=r({"if":"else","do":"while","catch":"finally","try":"catch"}),B=ab("[] ()"),af=ab("return throw break continue else"),C=ab("u+ u- u! u~ u++ u-- new typeof finally case var const void delete"),g=ab("; {"),aa=ab("i;"),G=ab("++ --"),p=r({"(":")","[":"]","{":"}","?":":"}),E=ab("[ ("),O=ab("?"),d=ab("function if for while catch void delete new typeof in instanceof"),y=ab("function");var t=aj.syntax_common={_replace:function(ak){return(ak.l=this.l)&&(this.l.r=ak),(ak.r=this.r)&&(this.r.l=ak),this},_append_to:function(ak){return ak&&ak._append(this),this},_reparent:function(ak){return this.p&&this.p[0]===this&&(this.p[0]=ak),this},_fold_l:function(ak){return this._append(this.l&&this.l._unlink(this)||a)},_append:function(ak){return(this[this.length++]=ak)&&(ak.p=this),this},_fold_r:function(ak){return this._append(this.r&&this.r._unlink(this)||a)},_sibling:function(ak){return ak.p=this.p,(this.r=ak).l=this},_fold_lr:function(){return this._fold_l()._fold_r()},_fold_rr:function(){return this._fold_r()._fold_r()},_wrap:function(ak){return ak.p=this._replace(ak).p,this._reparent(ak),delete this.l,delete this.r,this._append_to(ak)},_unlink:function(ak){return this.l&&(this.l.r=this.r),this.r&&(this.r.l=this.l),delete this.l,delete this.r,this._reparent(ak)},pop:function(){return --this.length,this},push:function(ak){return this[this.length++]=ak||a,this},id:function(){var ak=U("id");return(this.id=function(){return ak})()},each:function(am){for(var al=0,ak=this.length;al<ak;++al){am(this[al],al)}return this},map:function(am){for(var an=new this.constructor(this),al=0,ak=this.length;al<ak;++al){an.push(am(this[al],al)||this[al])}return an},reach:function(ak){ak(this);this.each(function(al){al.reach(ak)});return this},rmap:function(al){var ak=al(this);return !ak||ak===this?this.map(function(am){return am.rmap(al)}):ak.rmap===o?new this.constructor(ak):ak},clone:function(){return this.rmap(function(){return false})},collect:function(al){var ak=[];this.reach(function(am){al(am)&&ak.push(am)});return ak},replace:function(ak){var al;return j.call(ak,this.data)&&(al=ak[this.data])?al.constructor===String?A(this.map(function(am){return am.replace(ak)}),function(){this.data=al}):al:this.map(function(am){return am.replace(ak)})},repopulated_with:function(ak){return new this.constructor(this.data,ak)},change:function(al,ak){return A(new this.constructor(this.data,Array.prototype.slice.call(this)),function(am){am[al]=ak})},compose_single:function(ak,al){return this.change(ak,al(this[ak]))},traverse:function(ak){ak({entering:this});ak({exiting:this.each(function(al){al.traverse(ak)})});return this},flatten:function(ak){ak=ak||this.data;return ak!==this.data?this.as(ak):!(f(z,ak)&&this.length)?this:f(F,ak)?A(new this.constructor(ak),bind(function(am){for(var al=this;al&&al.data===ak;al=al[1]){am.push(al[0])}am.push(al)},this)):A(new this.constructor(ak),bind(function(an){for(var al=this,am=[];al.data===ak;al=al[0]){al[1]&&am.push(al[1])}am.push(al);for(al=am.length-1;al>=0;--al){an.push(am[al])}},this))},unflatten:function(){var al=this,ak=f(F,this.data);return this.length<=2?this:A(new this.constructor(this.data),function(ao){if(ak){for(var an=0,am=al.length-1;an<am;++an){ao=ao.push(al[an]).push(an<am-2?new al.constructor(al.data):al[an])[1]}}else{for(var an=al.length-1;an>=1;--an){ao=ao.push(an>1?new al.constructor(al.data):al[0]).push(al[an])[0]}}})},as:function(ak){return this.data===ak?this:new this.constructor(ak).push(this)},is_string:function(){return/['"]/.test(this.data.charAt(0))},as_escaped_string:function(){return this.data.substr(1,this.data.length-2)},is_number:function(){return/^-?(0x|\d|\.\d+)/.test(this.data)},as_number:function(){return Number(this.data)},is_boolean:function(){return this.data==="true"||this.data==="false"},as_boolean:function(){return this.data==="true"},is_regexp:function(){return/^\/./.test(this.data)},as_escaped_regexp:function(){return this.data.substring(1,this.data.lastIndexOf("/"))},is_wildcard:function(){return this.data.charCodeAt(0)===95},has_grouped_block:function(){return f(W,this.data)},is_block:function(){return f(g,this.data)},is_blockless_keyword:function(){return f(af,this.data)},is_null_or_undefined:function(){return this.data==="null"||this.data==="undefined"},is_constant:function(){return this.is_number()||this.is_string()||this.is_boolean()||this.is_regexp()||this.is_null_or_undefined()},left_is_lvalue:function(){return/=$/.test(this.data)||/\+\+$/.test(this.data)||/--$/.test(this.data)},is_empty:function(){return !this.length},has_parameter_list:function(){return this.data==="function"||this.data==="catch"},has_lvalue_list:function(){return this.data==="var"||this.data==="const"},is_dereference:function(){return this.data==="."||this.data==="[]"},is_invocation:function(){return this.data==="()"},is_contextualized_invocation:function(){return this.is_invocation()&&this[0].is_dereference()},is_invisible:function(){return f(aa,this.data)},is_binary_operator:function(){return f(z,this.data)},is_prefix_unary_operator:function(){return f(C,this.data)},is_postfix_unary_operator:function(){return f(G,this.data)},is_unary_operator:function(){return this.is_prefix_unary_operator()||this.is_postfix_unary_operator()},accepts:function(ak){return f(P,this.data)&&P[this.data]===(ak.data||ak)},bindings:function(al){var ak=al||{};this.reach(function(am){if(am.binds_a_value){ak[am.data]=am.value}});return ak},match:function(am,an){am=aj.ensure_syntax(am);an||(an={_:am});if(this.is_wildcard()){return an[this.data]=am,an}else{if(this.length===am.length&&this.data===am.data){for(var al=0,ak=this.length;al<ak;++al){if(!this[al].match(am[al],an)){return null}}return an}}},ends_with_block:function(){var ak=this[W[this.data]];return this.data==="{"||f(W,this.data)&&(this.data!=="function"||this.length===3)&&ak&&ak.ends_with_block()},structure:function(){if(this.length){return"("+['"'+this.data+'"'].concat(M(function(ak){return ak.structure()},this)).join(" ")+")"}else{return this.data}},toString:function(){var ak=[""];this.serialize(ak);return ak.join("")},serialize:function(an){var al=this.length,ao=this.data,ak=";\n",am=function(ap){if(V[an[an.length-1].charCodeAt(0)]===V[ap.charCodeAt(0)]){an.push(" ",ap)}else{an.push(ap)}};switch(al){case 0:if(f(af,ao)){return am(ao.replace(/^u/,""))}else{if(f(p,ao)){return am(ao),am(p[ao])}else{return am(ao)}}case 1:if(f(C,ao)||f(af,ao)){return am(ao.replace(/^u/,"")),this[0].serialize(an)}else{if(f(p,ao)){return am(ao),this[0].serialize(an),am(p[ao])}else{if(f(z,ao)){return am("/* unary "+ao+" node */"),this[0].serialize(an)}else{return this[0].serialize(an),am(ao)}}}case 2:if(f(B,ao)){return this[0].serialize(an),am(ao.charAt(0)),this[1].serialize(an),am(ao.charAt(1))}else{if(f(W,ao)){return am(ao),this[0].serialize(an),this[1].serialize(an)}else{if(f(aa,ao)){return this[0].serialize(an),this[1].serialize(an)}else{if(ao===";"){return this[0].serialize(an),am(ak),this[1].serialize(an)}else{return this[0].serialize(an),am(ao),this[1].serialize(an)}}}}default:if(f(O,ao)){return this[0].serialize(an),am(ao),this[1].serialize(an),am(":"),this[2].serialize(an)}else{if(f(W,ao)){return this.accepts(this[2])&&!this[1].ends_with_block()?(am(ao),this[0].serialize(an),this[1].serialize(an),am(ak),this[2].serialize(an)):(am(ao),this[0].serialize(an),this[1].serialize(an),this[2].serialize(an))}else{return this.unflatten().serialize(an)}}}}};aj.ref=function(al,ak){if(al instanceof this.constructor){this.value=al.value,this.data=al.data}else{this.value=al,this.data=U(ak&&ak.constructor===String?ak:"ref")}};Z(aj.ref.prototype,t,{binds_a_value:true,length:0});aj.ref.prototype.replace=function(ak){var al;return j.call(ak,this.data)&&(al=ak[this.data])?al.constructor===String?A(new this.constructor(this.value),function(){this.data=al}):al:this};aj.syntax=function(ap){if(ap instanceof this.constructor){this.data=ap.data,this.length=0}else{this.data=ap&&ap.toString();this.length=0;for(var an=1,ak=arguments.length,am;am=arguments[an],an<ak;++an){for(var al=0,ar=am.length,ao,aq;am instanceof Array?(ao=am[al],al<ar):(ao=am,!al);++al){this._append((aq=ao.constructor)===String||aq===Number||aq===Boolean?new this.constructor(ao):ao)}}}};Z(aj.syntax.prototype,t);var a=aj.empty=new aj.syntax("");aj.parse=function(aB){var aE=aB.toString(),ay=0,aQ=0,aH=true,aR=false,aG=false,at=false,aF=0,aD="",aM=0,aK=aE.length,al=function(aU){return aE.charCodeAt(aU)},au=[],an=null,ak=null,ax=null,ap=M(function(){return[]},J),am=[],av=[a],aO=function(aU){return av.push(aU),aU},ar=function(aU){return ak?ak._sibling(ak=aU):(ak=aU._append_to(ax)),aO(aU)},aJ=this.syntax;if(aK===0){return a}while((ay=aM)<aK){while(h[aQ=al(aM)]&&aM<aK){ay=++aM}aR=at=aG=aD=false;if(s[aQ]){aD=!!++aM;aH=q[aQ]}else{if(aQ===m&&al(aM+1)===Q&&(aM+=2)){while(++aM<aK&&al(aM)!==m||al(aM-1)!==Q){}aD=!++aM}else{if(aQ===m&&al(aM+1)===m){while(++aM<aK&&!I[al(aM)]){}aD=false}else{if(N[aQ]&&(aF=aQ)&&aH&&!(aH=!(aD=aE.charAt(aM)))){while(++aM<aK&&(aQ=al(aM))!==aF||aR){aR=!aR&&aQ===k}while(++aM<aK&&i[al(aM)]){}aD=true}else{if(aQ===S&&x[al(aM+1)]){while(++aM<aK&&x[al(aM)]){}aH=!(aD=true)}else{if(ah[aQ]&&(aQ!==L||T[al(aM+1)])){while(++aM<aK&&(T[aQ=al(aM)]||(aG^(aG|=aQ===L))||(at^(at|=K[aQ]&&++aM)))){}while(aM<aK&&T[al(aM)]){++aM}aH=!(aD=true)}else{if(w[aQ]&&(aD=aH?"u":"",aH=true)){while(aM<aK&&w[al(aM)]&&f(ai,aD+aE.charAt(aM))){aD+=aE.charAt(aM++)}aH=!f(ag,aD)}else{while(++aM<aK&&V[al(aM)]){}aH=f(ai,aD=aE.substring(ay,aM))}}}}}}}if(aM===ay){throw new Error('Caterwaul lex error at "'+aE.substr(ay,40)+'" with leading context "'+aE.substr(ay-40,40)+'" (probably a Caterwaul bug)')}if(aD===false){continue}aD=aD===true?aE.substring(ay,aM):aD==="u;"?";":aD;aD===an?(au.pop(),an=au[au.length-1],ak=ak?ak.p:ax,ax=null):(f(p,aD)?(au.push(an=p[aD]),ax=ar(aO(new aJ(aD))),ak=null):ar(aO(new aJ(aD))),f(D,aD)&&ap[D[aD]].push(ak||ax));aH|=aD===")"&&ak.l&&f(W,ak.l.data)}for(var aM=0,aK=ap.length,az,aT;aT=ap[aM],az=u[aM],aM<aK;++aM){for(var aL=az?0:aT.length-1,aC=aT.length,aw=az?1:-1,aI,aS,aA;az?aL<aC:aL>=0;aL+=aw){if(f(z,aS=(aI=aT[aL]).data)){aI._fold_lr()}else{if(f(E,aS)&&aI.l&&!((aA=aI.l.l)&&f(W,aA.data))&&(aI.l.data==="."||(aI.l.data==="function"&&aI.l.length===2)||!(f(ai,aI.l.data)||f(d,aI.l.data)))){am.push(aI.l._wrap(aO(new aJ(aS+p[aS]))).p._fold_r())}else{if(f(G,aS)){aI._fold_l()}else{if(f(C,aS)){aI._fold_r()}else{if(f(O,aS)){aI._fold_lr();var aP=aI[1];aI[1]=aI[0];aI[0]=aP}else{if(f(W,aS)&&aI.r&&aI.r.data!==":"){for(var aq=0,aN=W[aS];aq<aN&&aI.r&&!f(g,aI.r.data);++aq){aI._fold_r()}aI.r&&(aI.r.data===";"?aI.push(a):aI._fold_r());if(f(P,aS)&&P[aS]===(aI.r&&aI.r.r&&aI.r.r.data)){aI._fold_r().pop()._fold_r()}else{if(f(P,aS)&&P[aS]===(aI.r&&aI.r.data)){aI._fold_r()}}}else{if(f(af,aS)){aI.r&&aI.r.data!==";"&&aI._fold_r()}}}}}}}}}for(var aM=av.length-1,aT;aM>=0;--aM){(aT=av[aM]).r&&aT._wrap(aO(new aJ("i;"))).p._fold_r()}for(var aM=0,aK=am.length,aT,ao;aM<aK;++aM){(ao=(aT=am[aM])[1]=aT[1][0]||a)&&(ao.p=aT)}while(ak.p){ak=ak.p}for(var aM=av.length-1,aT;aM>=0;--aM){delete (aT=av[aM]).p,delete aT.l,delete aT.r}return ak};(function(){var ak=aj.parse("var _bindings; return(_expression)"),am=aj.parse("_variable = _base._variable"),al=aj.parse("undefined = void(0)");aj.compile=function(ay,ar,ax){ax=Z({gensym_renaming:true},ax);var ao=Z({},this._environment||{},ar||{},ay.bindings()),au=[al],aw=U("base");for(var aq in ao){if(j.call(ao,aq)&&aq!=="this"){au.push(am.replace({_variable:aq,_base:aw}))}}var av=new this.syntax(",",au).unflatten(),an=ak.replace({_bindings:av,_expression:ay});if(ax.gensym_renaming){var ap=this.gensym_rename_table(an);for(var aq in ao){j.call(ao,aq)&&(ao[ap[aq]||aq]=ao[aq])}an=an.replace(ap);aw=ap[aw]}try{return(new Function(aw,an)).call(ao["this"],ao)}catch(at){throw new Error(at+" while compiling "+an)}};aj.gensym_rename_table=function(ax){var av={},at=[],aw=/^gensym_(.*)_\d+_[^_]+_[^_]+$/;ax.reach(function(ay){var az=ay.data;aw.test(az)&&(av[az]||at.push(az));av[az]=az.replace(aw,"$1")||"anon"});var an={},au=function(ay){if(!(ay in av)){return ay}var az=an[ay]||0;while(av[ay+(++az).toString(36)]){}return ay+(an[ay]=az).toString(36)};for(var ao={},aq=0,ap=at.length,ar;aq<ap;++aq){ao[ar=at[aq]]||(av[ao[ar]=au(av[ar])]=true)}return ao}})();aj.ensure_syntax=function(ak){return ak&&ak.constructor===String?this.parse(ak):ak};aj.ensure_pattern=function(ak){return ak.constructor===String?this.ensure_pattern(this.parse(ak)):ak.constructor===this.syntax?function(al){return ak.match(al)}:ak};aj.ensure_expander=function(ak){return ak.constructor===String?this.ensure_expander(this.parse(ak)):ak.constructor===this.syntax?function(al){return this.expand(ak.replace(al))}:ak};aj.macro=aj.right_variadic(function(al,an){var am=this.ensure_pattern(al),ak=this.ensure_expander(an);return A(function(ao){var ap=am.call(this,ao);return ap&&ak.call(this,ap)},function(){this.pattern=al,this.expander=an})});aj.macroexpand=function(al){for(var ap=arguments.length?[].concat(this._macros||[]):this._macros||[],ao=1,am=arguments.length,ak;ao<am;++ao){(ak=arguments[ao]) instanceof Array?ap.push.apply(ap,ak):ap.push(ak)}var an={caterwaul:this,macros:ap,expand:function(aq){return aq.rmap(function(at){for(var au=null,ar=ap.length-1;ar>=0;--ar){if(au=ap[ar].call(an,at)){return au}}})}};return an.expand(this.ensure_syntax(al))};var b={};aj.precompiled_internal=function(al){var ak=U("precompiled");return b[ak]=al,ak};aj.is_precompiled=function(ak){return ak.constructor===String&&b[ak]};aj.clone=function(ak){return A(this.merge(ac(),this,this.instance_methods(),{constructor:this}),function(){delete this._id,delete this._macros,delete this._environment})};aj.instance_methods=function(){return{compile:this.compile,parse:this.parse,macroexpand:this.macroexpand,syntax:this.syntax,ref:this.ref,id:this.syntax_common.id,gensym_rename_table:this.gensym_rename_table,init_function:this.init_function||this.macroexpand,instance_methods:this.instance_methods,ensure_syntax:this.ensure_syntax,ensure_pattern:this.ensure_pattern,ensure_expander:this.ensure_expander,environment:function(ak){return arguments.length?(this._environment=ak,this):this._environment},macros:function(){return arguments.length?(this._macros=this.flatten.apply(this,arguments),this):this._macros},toString:function(){return"[caterwaul instance "+this.id()+"]"},init:function(al,ak){return this.is_precompiled(al)||this.init_not_precompiled(al,ak)},init_not_precompiled:function(al,ak){return al.constructor===this.syntax?this.init_function(al):this.compile(this(this.parse(al)),ak)}}};return caterwaul=aj=aj.clone()});caterwaul.version("f9c2aab8c9ceb09bc04da8db47c5b208");