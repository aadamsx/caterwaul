(function(a){return a(a)})(function(f,A,p){var aj=function(ar){return ar.split(/\s+/)},D=function(ar,at){return at&&at.call(ar,ar)||ar},o=function(ar){throw new Error(ar)},c=A||(function(){for(var ar=[],au="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_",at=21,av;at>=0;--at){ar.push(au.charAt(Math.random()*64>>>0))}return ar.join("")})(),aa=(function(ar){return function(at){return[at||"",(++ar).toString(36),c].join("_")}})(0),Z=function(ar){return ar.substr(ar.length-22)===c},i=function(at,ar){return function(){return at.apply(ar,arguments)}},R=function(aw,at){for(var au=0,av=[],ar=at.length;au<ar;++au){av.push(aw(at[au],au))}return av},x=function(at,ar){return R(function(au){return au instanceof Array?x(at,au):at(au)})},ah=function(av){for(var au=0,at=aj(av),aw={},ar=at.length;au<ar;++au){aw[at[au]]=true}return t(aw)},af=(function(at){for(var ar in at){if(at.hasOwnProperty(ar)){return true}}})({toString:true})?function(aw){for(var av=1,ar=arguments.length,au;av<ar;++av){if(au=arguments[av]){for(var at in au){if(g(au,at)){aw[at]=au[at]}}}}return aw}:function(aw){for(var av=1,ar=arguments.length,au;av<ar;++av){if(au=arguments[av]){for(var at in au){if(g(au,at)){aw[at]=au[at]}}if(au.toString&&!/\[native code\]/.test(au.toString.toString())){aw.toString=au.toString}}}return aw},ae=aa("hash"),t=function(au){var ar=0;for(var at in au){l.call(au,at)&&(ar=at.length>ar?at.length:ar)}au[ae]=ar;return au},g=function(at,ar){return ar!=null&&!(ar.length>at[ae])&&l.call(at,ar)},l=Object.prototype.hasOwnProperty,ai=function(){var ar=function(){return ar.init.apply(ar,arguments)};return ar},ak=typeof caterwaul==="undefined"?p:caterwaul,aq=D(ai(),function(){this.deglobalize=function(){caterwaul=ak;return aq};af(this,{merge:af,map:R,rmap:x,gensym:aa,is_gensym:Z})}),ap=ah(". new ++ -- u++ u-- u+ u- typeof u~ u! ! * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || ? = += -= *= /= %= &= |= ^= <<= >>= >>>= : , return throw case var const break continue void else u; ;"),W=function(av){for(var au=0,at=[false];au<8;++au){at.push.apply(at,at)}for(var au=0,ar=av.length;au<ar;++au){at[av.charCodeAt(au)]=true}return at},an=W(".0123456789"),Y=W("0123456789"),z=W("0123456789abcdefABCDEFx"),O=W("eE"),j=W(" \n\r\t"),u=W("()[]{}?:"),r=W("([{?:"),y=W("+-*/%&|^!~=<>?:;.,"),M=W("\n\r"),k=W("gims"),S=W("'\"/"),n="/".charCodeAt(0),X="0".charCodeAt(0),am=ah("++ --"),ab=W("$_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),V="*".charCodeAt(0),m="\\".charCodeAt(0),ad="x".charCodeAt(0),Q=".".charCodeAt(0),K="#".charCodeAt(0),N=R(ah,["function","( [ . [] ()","new delete","u++ u-- ++ -- typeof u~ u! u+ u-","* / %","+ -","<< >> >>>","< > <= >= instanceof in","== != === !==","&","^","|","&&","||","case","? = += -= *= /= %= &= |= ^= <<= >>= >>>=",":",",","return throw break continue void","var const","if else try catch finally for switch with while do",";"]),J=ah("= += -= *= /= %= &= ^= |= <<= >>= >>>= ~ ! new typeof u+ u- -- ++ u-- u++ ? if else function try catch finally for switch case with while do"),G=(function(au){for(var aw={},av=0,ar=au.length;av<ar;++av){for(var at in au[av]){g(au[av],at)&&(aw[at]=av)}}return t(aw)})(N),w=(function(au){for(var aw=[],ax=0,ar=au.length,av=null;av=au[ax],aw[ax]=true,ax<ar;++ax){for(var at in av){if(g(av,at)&&(aw[ax]=aw[ax]&&!g(J,at))){break}}}return aw})(N),C=ah("[] . () * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || = += -= *= /= %= &= |= ^= <<= >>= >>>= , : ;"),ac=t({"function":2,"if":1,"do":1,"catch":1,"try":1,"for":1,"while":1,"with":1,"switch":1}),U=t({"if":"else","do":"while","catch":"finally","try":"catch"}),E=ah("[] ()"),al=ah("return throw break continue else"),F=ah("u+ u- u! u~ u++ u-- new typeof finally case var const void delete"),h=ah("; {"),ag=ah("i;"),L=ah("++ --"),q=t({"(":")","[":"]","{":"}","?":":"}),H=ah("[ ("),T=ah("?"),e=ah("function if for while catch void delete new typeof in instanceof"),B=ah("function"),v=aq.syntax_common={_replace:function(ar){return(ar.l=this.l)&&(this.l.r=ar),(ar.r=this.r)&&(this.r.l=ar),this},_append_to:function(ar){return ar&&ar._append(this),this},_reparent:function(ar){return this.p&&this.p[0]===this&&(this.p[0]=ar),this},_fold_l:function(ar){return this._append(this.l&&this.l._unlink(this)||a)},_append:function(ar){return(this[this.length++]=ar)&&(ar.p=this),this},_fold_r:function(ar){return this._append(this.r&&this.r._unlink(this)||a)},_sibling:function(ar){return ar.p=this.p,(this.r=ar).l=this},_fold_lr:function(){return this._fold_l()._fold_r()},_fold_rr:function(){return this._fold_r()._fold_r()},_wrap:function(ar){return ar.p=this._replace(ar).p,this._reparent(ar),delete this.l,delete this.r,this._append_to(ar)},_unlink:function(ar){return this.l&&(this.l.r=this.r),this.r&&(this.r.l=this.l),delete this.l,delete this.r,this._reparent(ar)},pop:function(){return --this.length,this},push:function(ar){return this[this.length++]=ar||a,this},id:function(){var ar=aa("id");return(this.id=function(){return ar})()},is_caterwaul_syntax:true,each:function(au){for(var at=0,ar=this.length;at<ar;++at){au(this[at],at)}return this},map:function(au){for(var av=new this.constructor(this),at=0,ar=this.length;at<ar;++at){av.push(au(this[at],at)||this[at])}return av},reach:function(ar){ar(this);this.each(function(at){at.reach(ar)});return this},rmap:function(at){var ar=at(this);return !ar||ar===this?this.map(function(au){return au.rmap(at)}):ar===true?this:ar.rmap===p?new this.constructor(ar):ar},peach:function(ar){this.each(function(at){at.peach(ar)});ar(this);return this},pmap:function(at){var ar=this.map(function(au){return au.pmap(at)});return at(ar)},clone:function(){return this.rmap(function(){return false})},collect:function(at){var ar=[];this.reach(function(au){at(au)&&ar.push(au)});return ar},replace:function(ar){var at;return l.call(ar,this.data)&&(at=ar[this.data])?at.constructor===String?D(this.map(function(au){return au.replace(ar)}),function(){this.data=at}):at:this.map(function(au){return au.replace(ar)})},repopulated_with:function(ar){return new this.constructor(this.data,ar)},with_data:function(ar){return new this.constructor(ar,Array.prototype.slice.call(this))},change:function(at,ar){return D(new this.constructor(this.data,Array.prototype.slice.call(this)),function(au){au[at]=ar})},compose_single:function(ar,at){return this.change(ar,at(this[ar]))},slice:function(at,ar){return new this.constructor(this.data,Array.prototype.slice.call(this,at,ar))},traverse:function(ar){ar({entering:this});ar({exiting:this.each(function(at){at.traverse(ar)})});return this},flatten:function(ar){ar=ar||this.data;return ar!==this.data?this.as(ar):!(g(C,ar)&&this.length)?this:g(J,ar)?D(new this.constructor(ar),i(function(au){for(var at=this;at&&at.data===ar;at=at[1]){au.push(at[0])}au.push(at)},this)):D(new this.constructor(ar),i(function(av){for(var at=this,au=[];at.data===ar;at=at[0]){at[1]&&au.push(at[1])}au.push(at);for(at=au.length-1;at>=0;--at){av.push(au[at])}},this))},unflatten:function(){var at=this,ar=g(J,this.data);return this.length<=2?this:D(new this.constructor(this.data),function(aw){if(ar){for(var av=0,au=at.length-1;av<au;++av){aw=aw.push(at[av]).push(av<au-2?new at.constructor(at.data):at[av])[1]}}else{for(var av=at.length-1;av>=1;--av){aw=aw.push(av>1?new at.constructor(at.data):at[0]).push(at[av])[0]}}})},as:function(ar){return this.data===ar?this:new this.constructor(ar).push(this)},bindings:function(at){var ar=at||{};this.reach(function(au){if(au.binds_a_value){ar[au.data]=au.value}});return ar},expressions:function(at){var ar=at||{};this.reach(function(au){if(au.binds_an_expression){ar[au.data]=au.e}});return ar},contains:function(av){var ar=av(this);if(ar){return ar}for(var au=0,at=this.length;au<at;++au){if(ar=this[au].contains(av)){return ar}}},match:function(au,av){au=au.constructor===String?aq.parse(au):au;av||(av={_:au});if(this.is_wildcard()){return av[this.data]=au,av}else{if(this.length===au.length&&this.data===au.data){for(var at=0,ar=this.length;at<ar;++at){if(!this[at].match(au[at],av)){return null}}return av}}},toString:function(){var ar=[""];this.serialize(ar);return ar.join("")},structure:function(){if(this.length){return"("+['"'+this.data+'"'].concat(R(function(ar){return ar.structure()},this)).join(" ")+")"}else{return this.data}}};aq.syntax_subclass=function(au){var at=Array.prototype.slice.call(arguments,1),ar=function(){return au.apply(this,arguments)};af.apply(this,[ar.prototype,v].concat(at));ar.prototype.constructor=ar;return ar};var b=aq.parse_hex=function(av){for(var ar=0,au=0,at=av.length,aw;au<at;++au){ar*=16,ar+=(aw=av.charCodeAt(au))<=58?aw-48:(aw&95)-55}return ar},ao=aq.parse_octal=function(av){for(var ar=0,au=0,at=av.length;au<at;++au){ar*=8,ar+=av.charCodeAt(au)-48}return ar},d=aq.unescape_string=function(aw){for(var av=0,ax,at=aw.length,ar=[],au=false;av<at;++av){if(au){au=false,ar.push((ax=aw.charAt(av))==="\\"?"\\":ax==="n"?"\n":ax==="r"?"\r":ax==="b"?"\b":ax==="f"?"\f":ax==="0"?"\u0000":ax==="t"?"\t":ax==="v"?"\v":ax==='"'||ax==="'"?ax:ax==="x"?String.fromCharCode(b(aw.substring(av,++av+1))):ax==="u"?String.fromCharCode(b(aw.substring(av,(av+=3)+1))):String.fromCharCode(ao(aw.substring(av,(av+=2)+1))))}else{if((ax=aw.charAt(av))==="\\"){au=true}else{ar.push(ax)}}}return ar.join("")};aq.javascript_tree_type_methods={is_string:function(){return/['"]/.test(this.data.charAt(0))},as_escaped_string:function(){return this.data.substr(1,this.data.length-2)},is_number:function(){return/^-?(0x|\d|\.\d+)/.test(this.data)},as_number:function(){return Number(this.data)},is_boolean:function(){return this.data==="true"||this.data==="false"},as_boolean:function(){return this.data==="true"},is_regexp:function(){return/^\/./.test(this.data)},as_escaped_regexp:function(){return this.data.substring(1,this.data.lastIndexOf("/"))},is_array:function(){return this.data==="["},as_unescaped_string:function(){return d(this.as_escaped_string())},is_wildcard:function(){return this.data.charCodeAt(0)===95},is_identifier:function(){return this.length===0&&/^[A-Za-z_$]\w*$/.test(this.data)&&!this.is_boolean()&&!this.is_null_or_undefined()&&!g(ap,this.data)},has_grouped_block:function(){return g(ac,this.data)},is_block:function(){return g(h,this.data)},is_blockless_keyword:function(){return g(al,this.data)},is_null_or_undefined:function(){return this.data==="null"||this.data==="undefined"},is_constant:function(){return this.is_number()||this.is_string()||this.is_boolean()||this.is_regexp()||this.is_null_or_undefined()},left_is_lvalue:function(){return/=$/.test(this.data)||/\+\+$/.test(this.data)||/--$/.test(this.data)},is_empty:function(){return !this.length},has_parameter_list:function(){return this.data==="function"||this.data==="catch"},has_lvalue_list:function(){return this.data==="var"||this.data==="const"},is_dereference:function(){return this.data==="."||this.data==="[]"},is_invocation:function(){return this.data==="()"},is_contextualized_invocation:function(){return this.is_invocation()&&this[0].is_dereference()},is_invisible:function(){return g(ag,this.data)},is_binary_operator:function(){return g(C,this.data)},is_prefix_unary_operator:function(){return g(F,this.data)},is_postfix_unary_operator:function(){return g(L,this.data)},is_unary_operator:function(){return this.is_prefix_unary_operator()||this.is_postfix_unary_operator()},accepts:function(ar){return g(U,this.data)&&U[this.data]===(ar.data||ar)}};aq.javascript_tree_serialization_methods={ends_with_block:function(){var ar=this[ac[this.data]];return this.data==="{"||g(ac,this.data)&&(this.data!=="function"||this.length===3)&&ar&&ar.ends_with_block()},serialize:function(av){var at=this.length,aw=this.data,ar=";\n",au=function(ax){if(ab[av[av.length-1].charCodeAt(0)]===ab[ax.charCodeAt(0)]){av.push(" ",ax)}else{av.push(ax)}};switch(at){case 0:if(g(al,aw)){return au(aw.replace(/^u/,""))}else{if(g(q,aw)){return au(aw),au(q[aw])}else{return au(aw)}}case 1:if(g(F,aw)||g(al,aw)){return au(aw.replace(/^u/,"")),this[0].serialize(av)}else{if(g(q,aw)){return au(aw),this[0].serialize(av),au(q[aw])}else{if(g(C,aw)){return au("/* unary "+aw+" node */"),this[0].serialize(av)}else{return this[0].serialize(av),au(aw)}}}case 2:if(g(E,aw)){return this[0].serialize(av),au(aw.charAt(0)),this[1].serialize(av),au(aw.charAt(1))}else{if(g(ac,aw)){return au(aw),this[0].serialize(av),this[1].serialize(av)}else{if(g(ag,aw)){return this[0].serialize(av),this[1].serialize(av)}else{if(aw===";"){return this[0].serialize(av),au(ar),this[1].serialize(av)}else{return this[0].serialize(av),au(aw),this[1].serialize(av)}}}}default:if(g(T,aw)){return this[0].serialize(av),au(aw),this[1].serialize(av),au(":"),this[2].serialize(av)}else{if(g(ac,aw)){return this.accepts(this[2])&&!this[1].ends_with_block()?(au(aw),this[0].serialize(av),this[1].serialize(av),au(ar),this[2].serialize(av)):(au(aw),this[0].serialize(av),this[1].serialize(av),this[2].serialize(av))}else{return this.unflatten().serialize(av)}}}}};aq.ref_common=af({},aq.javascript_tree_type_methods,aq.javascript_tree_serialization_methods,{replace:function(ar){var at;return l.call(ar,this.data)&&(at=ar[this.data])?at.constructor===String?D(new this.constructor(this.value),function(){this.data=at}):at:this},length:0});aq.ref=aq.syntax_subclass(function(at,ar){if(at instanceof this.constructor){this.value=at.value,this.data=at.data}else{this.value=at,this.data=aa(ar&&ar.constructor===String?ar:"ref")}},aq.ref_common,{binds_a_value:true});aq.expression_ref=aq.syntax_subclass(function(at,ar){if(at instanceof this.constructor){this.e=at.e,this.data=at.data}else{this.e=at,this.data=aa(ar&&ar.constructor===String?ar:"e")}},aq.ref_common,{binds_an_expression:true});aq.syntax=aq.syntax_subclass(function(ax){if(ax instanceof this.constructor){this.data=ax.data,this.length=0}else{this.data=ax&&ax.toString();this.length=0;for(var av=1,ar=arguments.length,au;au=arguments[av],av<ar;++av){for(var at=0,az=au.length,aw,ay;au instanceof Array?(aw=au[at],at<az):(aw=au,!at);++at){this._append((ay=aw.constructor)===String||ay===Number||ay===Boolean?new this.constructor(aw):aw)}}}},aq.javascript_tree_type_methods,aq.javascript_tree_serialization_methods);var a=aq.empty=new aq.syntax("");aq.parse=function(ar){if(ar.constructor===aq.syntax){return ar}var aN=ar.toString(),ax=0,aZ=0,aK=true,aJ=false,a1=false,a0=false,aO=0,aL="",aW=0,aT=aN.length,aE=function(a3){return aN.charCodeAt(a3)},aC=[],aS=null,aA=null,ay=null,at=R(function(){return[]},N),az=[],aM=[a],aU=function(a3){return aM.push(a3),a3},aP=function(a3){return aA?aA._sibling(aA=a3):(aA=a3._append_to(ay)),aU(a3)},au=this.syntax,aB=[];if(aT===0){return a}while((ax=aW)<aT){while(j[aZ=aE(aW)]&&aW<aT){ax=++aW}aJ=a0=a1=aL=false;if(u[aZ]){aL=!!++aW;aK=r[aZ]}else{if(aZ===n&&aE(aW+1)===V&&(aW+=2)){while(++aW<aT&&aE(aW)!==n||aE(aW-1)!==V){}aL=!++aW}else{if(aZ===n&&aE(aW+1)===n){while(++aW<aT&&!M[aE(aW)]){}aL=false}else{if(aZ===K){while(++aW<aT&&!M[aE(aW)]){}aL=false}else{if(S[aZ]&&(aO=aZ)&&aK&&!(aK=!(aL=aN.charAt(aW)))){while(++aW<aT&&(aZ=aE(aW))!==aO||aJ){aJ=!aJ&&aZ===m}while(++aW<aT&&k[aE(aW)]){}aL=true}else{if(aZ===X&&z[aE(aW+1)]){while(++aW<aT&&z[aE(aW)]){}aK=!(aL=true)}else{if(an[aZ]&&(aZ!==Q||Y[aE(aW+1)])){while(++aW<aT&&(Y[aZ=aE(aW)]||(a1^(a1|=aZ===Q))||(a0^(a0|=O[aZ]&&++aW)))){}while(aW<aT&&Y[aE(aW)]){++aW}aK=!(aL=true)}else{if(y[aZ]&&(aL=aK?"u":"",aK=true)){while(aW<aT&&y[aE(aW)]&&g(ap,aL+aN.charAt(aW))){aL+=aN.charAt(aW++)}aK=!g(am,aL)}else{while(++aW<aT&&(ab[aZ=aE(aW)]||aZ>127)){}aK=g(ap,aL=aN.substring(ax,aW))}}}}}}}}if(aW===ax){throw new Error('Caterwaul lex error at "'+aN.substr(ax,40)+'" with leading context "'+aN.substr(ax-40,40)+'" (probably a Caterwaul bug)')}if(aL===false){continue}aL=aL===true?aN.substring(ax,aW):aL==="u;"?";":aL;aL===aS?(aC.pop(),aS=aC[aC.length-1],aA=aA?aA.p:ay,ay=null):(g(q,aL)?(aC.push(aS=q[aL]),ay=aP(aU(new au(aL))),aA=null):aP(aU(new au(aL))),g(G,aL)&&at[G[aL]].push(aA||ay));aK|=aL===")"&&aA.l&&g(ac,aA.l.data)}for(var aW=0,aT=at.length,aI,a2;a2=at[aW],aI=w[aW],aW<aT;++aW){for(var aV=aI?0:a2.length-1,aH=a2.length,aX=aI?1:-1,aF,aY,aG;aI?aV<aH:aV>=0;aV+=aX){if(g(C,aY=(aF=a2[aV]).data)){aF._fold_lr()}else{if(g(H,aY)&&aF.l&&!((aG=aF.l.l)&&g(ac,aG.data))&&(aF.l.data==="."||(aF.l.data==="function"&&aF.l.length===2)||!(g(ap,aF.l.data)||g(e,aF.l.data)))){az.push(aF.l._wrap(aU(new au(aY+q[aY]))).p._fold_r())}else{if(g(L,aY)){aF._fold_l()}else{if(g(F,aY)){aF._fold_r()}else{if(g(T,aY)){aF._fold_lr(),aB.push(aF)}else{if(g(ac,aY)&&aF.r&&aF.r.data!==":"){for(var aQ=0,aD=ac[aY];aQ<aD&&aF.r&&!g(h,aF.r.data);++aQ){aF._fold_r()}aF.r&&(aF.r.data===";"?aF.push(a):aF._fold_r());if(g(U,aY)&&U[aY]===(aF.r&&aF.r.r&&aF.r.r.data)){aF._fold_r().pop()._fold_r()}else{if(g(U,aY)&&U[aY]===(aF.r&&aF.r.data)){aF._fold_r()}}}else{if(g(al,aY)){aF.r&&aF.r.data!==";"&&aF._fold_r()}}}}}}}}}for(var aW=aM.length-1,a2;aW>=0;--aW){(a2=aM[aW]).r&&a2._wrap(aU(new au("i;"))).p._fold_r()}for(var aW=0,aT=az.length,a2,av;aW<aT;++aW){(av=(a2=az[aW])[1]=a2[1][0]||a)&&(av.p=a2)}for(var aW=0,aT=aB.length,a2,aR,aw;aW<aT;++aW){aR=(a2=aB[aW]).length,aw=a2[0],a2[0]=a2[aR-2],a2[1]=aw,a2[2]=a2[aR-1],a2.length=3}while(aA.p){aA=aA.p}for(var aW=aM.length-1,a2;aW>=0;--aW){delete (a2=aM[aW]).p,delete a2.l,delete a2.r}return aA};(function(){var ar=aq.parse("var _bindings; return(_expression)"),av=aq.parse("_variable = _base._variable"),au=aq.parse("undefined = void(0)"),at=aq.parse("(function (_bindings) {return(_body)}).call(this, _expressions)");aq.compile=function(aH,aB,aG){aG=af({gensym_renaming:true},aG);aH=aq.late_bound_tree(aH);var ay=af({},this._environment||{},aB||{},aH.bindings()),aD=[au],aF=aa("base");for(var aA in ay){if(l.call(ay,aA)&&aA!=="this"){aD.push(av.replace({_variable:aA,_base:aF}))}}var aE=new this.syntax(",",aD).unflatten(),aw=ar.replace({_bindings:aE,_expression:aH});if(aG.gensym_renaming){var az=this.gensym_rename_table(aw);for(var aA in ay){l.call(ay,aA)&&(ay[az[aA]||aA]=ay[aA])}aw=aw.replace(az);aF=az[aF]}var ax=aw.toString();try{return(new Function(aF,ax)).call(ay["this"],ay)}catch(aC){throw new Error((aC.message||aC)+" while compiling "+ax)}};aq.late_bound_tree=function(ax,aw){var aB=af({},aw||{},ax.expressions()),aA=new aq.syntax(","),az=new aq.syntax(",");for(var ay in aB){if(l.call(aB,ay)){aA.push(new aq.syntax(ay)),az.push(aB[ay])}}return aA.length?at.replace({_bindings:aA.unflatten(),_expressions:az.unflatten(),_body:ax}):ax};aq.gensym_rename_table=function(aE){var aD={},aB=[];aE.reach(function(aF){var aG=aF.data;if(Z(aG)){aD[aG]||aB.push(aG)}aD[aG]=aG.replace(/^(.*)_[a-z0-9]+_.{22}$/,"$1")||"anon"});var aw={},aC=function(aF){if(!(aF in aD)){return aF}var aG=aw[aF]||0;while(aD[aF+(++aG).toString(36)]){}return aF+(aw[aF]=aG).toString(36)};for(var ax={},az=0,ay=aB.length,aA;az<ay;++az){ax[aA=aB[az]]||(aD[ax[aA]=aC(aD[aA])]=true)}return ax}})();var P=function(at){for(var au=at.split(/\s+/),av=1,ar=au.length,aw=aq[au[0]]();av<ar;++av){aw=aq[au[av]](aw)}return aw};aq.init=function(ar){ar||(ar=function(at){return true});return ar.constructor===Function?D((function(){var at=function(aw,au,av){return typeof aw==="function"||aw.constructor===String?aq.compile(at.call(at,aq.parse(aw)),au,av):aw.rmap(function(ax){return ar.call(at,ax,au,av)})};return at})(),function(){this.global=aq,this.macroexpander=ar}):P(ar)};aq.initializer=f;aq.clone=function(){return D(f(f,c).deglobalize(),function(){for(var ar in aq){this[ar]||(this[ar]=aq[ar])}})};aq.modules=[];aq.module=function(at,ar,au){if(arguments.length===1){return aq[at+"_initializer"]}if(!(at+"_initializer" in aq)){aq.modules.push(at)}au||(au=ar,ar=null);(aq[at+"_initializer"]=ar?aq(ar)(au):au)(aq);return aq};var s=aq.parse("(function (f) {return f(f)})(_x)"),I=aq.parse("module(_name, _f)");aq.replicator=function(){for(var av=0,au=this.modules,aw=[],at=au.length;av<at;++av){aw.push(I.replace({_name:"'"+au[av]+"'",_f:this.parse(this.module(au[av]))}))}for(var av=0,at=aw.length,ar=new this.syntax(".",s.replace({_x:this.parse(this.initializer)}));av<at;++av){ar.push(aw[av])}return ar.unflatten()};return caterwaul=aq});