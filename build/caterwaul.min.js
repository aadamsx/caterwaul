(function(a){return a(a,(function(b){return function(){return ++b}})(0))})(function(f,c,q){var ae=function(am){return am.split(/\s+/)},C=function(am,an){return an&&an.call(am,am)||am},p=function(am){throw new Error(am)},n=(function(ao,am,an){return function(){return[an,ao,++am]}})(+new Date(),Math.random()*(1<<30)>>>0,c()),V=function(an){var am=n();return["gensym",an||"",am[0].toString(36),am[1].toString(36),am[2].toString(36)].join("_")},i=function(an,am){return function(){return an.apply(am,arguments)}},N=function(aq,an){for(var ao=0,ap=[],am=an.length;ao<am;++ao){ap.push(aq(an[ao],ao))}return ap},x=function(an,am){return N(function(ao){return ao instanceof Array?x(an,ao):an(ao)})},ac=function(ap){for(var ao=0,an=ae(ap),aq={},am=an.length;ao<am;++ao){aq[an[ao]]=true}return t(aq)},aa=(function(an){for(var am in an){if(an.hasOwnProperty(am)){return true}}})({toString:true})?function(aq){for(var ap=1,am=arguments.length,ao;ap<am;++ap){if(ao=arguments[ap]){for(var an in ao){if(g(ao,an)){aq[an]=ao[an]}}}}return aq}:function(aq){for(var ap=1,am=arguments.length,ao;ap<am;++ap){if(ao=arguments[ap]){for(var an in ao){if(g(ao,an)){aq[an]=ao[an]}}if(ao.toString&&!/\[native code\]/.test(ao.toString.toString())){aq.toString=ao.toString}}}return aq},Z=V("hash_annotation"),t=function(ao){var am=0;for(var an in ao){l.call(ao,an)&&(am=an.length>am?an.length:am)}ao[Z]=am;return ao},g=function(an,am){return am!=null&&!(am.length>an[Z])&&l.call(an,am)},l=Object.prototype.hasOwnProperty,ad=function(){var am=function(){return am.init.apply(am,arguments)};return am},af=typeof caterwaul==="undefined"?q:caterwaul,al=C(ad(),function(){this.deglobalize=function(){caterwaul=af;return al};aa(this,{merge:aa,map:N,unique:c,rmap:x,gensym:V})}),ak=ac(". new ++ -- u++ u-- u+ u- typeof u~ u! ! * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || ? = += -= *= /= %= &= |= ^= <<= >>= >>>= : , return throw case var const break continue void else u; ;"),S=function(ap){for(var ao=0,an=[false];ao<8;++ao){an.push.apply(an,an)}for(var ao=0,am=ap.length;ao<am;++ao){an[ap.charCodeAt(ao)]=true}return an},ai=S(".0123456789"),U=S("0123456789"),z=S("0123456789abcdefABCDEFx"),L=S("eE"),j=S(" \n\r\t"),u=S("()[]{}"),s=S("([{"),y=S("+-*/%&|^!~=<>?:;.,"),J=S("\n\r"),k=S("gims"),O=S("'\"/"),o="/".charCodeAt(0),R="*".charCodeAt(0),m="\\".charCodeAt(0),Y="x".charCodeAt(0),M=".".charCodeAt(0),T="0".charCodeAt(0),ah=ac("++ --"),W=S("$_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),K=N(ac,["function","( [ . [] ()","new delete","u++ u-- ++ -- typeof u~ u! u+ u-","* / %","+ -","<< >> >>>","< > <= >= instanceof in","== != === !==","&","^","|","&&","||","case","?","= += -= *= /= %= &= |= ^= <<= >>= >>>=",":",",","return throw break continue void","var const","if else try catch finally for switch with while do",";"]),H=ac("= += -= *= /= %= &= ^= |= <<= >>= >>>= ~ ! new typeof u+ u- -- ++ u-- u++ ? if else function try catch finally for switch case with while do"),F=(function(ao){for(var aq={},ap=0,am=ao.length;ap<am;++ap){for(var an in ao[ap]){g(ao[ap],an)&&(aq[an]=ap)}}return t(aq)})(K),w=(function(ao){for(var aq=[],ar=0,am=ao.length,ap=null;ap=ao[ar],aq[ar]=true,ar<am;++ar){for(var an in ap){if(g(ap,an)&&(aq[ar]=aq[ar]&&!g(H,an))){break}}}return aq})(K),B=ac("[] . () * / % + - << >> >>> < > <= >= instanceof in == != === !== & ^ | && || = += -= *= /= %= &= |= ^= <<= >>= >>>= , : ;"),X=t({"function":2,"if":1,"do":1,"catch":1,"try":1,"for":1,"while":1,"with":1,"switch":1}),Q=t({"if":"else","do":"while","catch":"finally","try":"catch"}),D=ac("[] ()"),ag=ac("return throw break continue else"),E=ac("u+ u- u! u~ u++ u-- new typeof finally case var const void delete"),h=ac("; {"),ab=ac("i;"),I=ac("++ --"),r=t({"(":")","[":"]","{":"}","?":":"}),G=ac("[ ("),P=ac("?"),e=ac("function if for while catch void delete new typeof in instanceof"),A=ac("function"),v=al.syntax_common={_replace:function(am){return(am.l=this.l)&&(this.l.r=am),(am.r=this.r)&&(this.r.l=am),this},_append_to:function(am){return am&&am._append(this),this},_reparent:function(am){return this.p&&this.p[0]===this&&(this.p[0]=am),this},_fold_l:function(am){return this._append(this.l&&this.l._unlink(this)||a)},_append:function(am){return(this[this.length++]=am)&&(am.p=this),this},_fold_r:function(am){return this._append(this.r&&this.r._unlink(this)||a)},_sibling:function(am){return am.p=this.p,(this.r=am).l=this},_fold_lr:function(){return this._fold_l()._fold_r()},_fold_rr:function(){return this._fold_r()._fold_r()},_wrap:function(am){return am.p=this._replace(am).p,this._reparent(am),delete this.l,delete this.r,this._append_to(am)},_unlink:function(am){return this.l&&(this.l.r=this.r),this.r&&(this.r.l=this.l),delete this.l,delete this.r,this._reparent(am)},pop:function(){return --this.length,this},push:function(am){return this[this.length++]=am||a,this},id:function(){var am=V("id");return(this.id=function(){return am})()},each:function(ao){for(var an=0,am=this.length;an<am;++an){ao(this[an],an)}return this},map:function(ao){for(var ap=new this.constructor(this),an=0,am=this.length;an<am;++an){ap.push(ao(this[an],an)||this[an])}return ap},reach:function(am){am(this);this.each(function(an){an.reach(am)});return this},rmap:function(an){var am=an(this);return !am||am===this?this.map(function(ao){return ao.rmap(an)}):am.rmap===q?new this.constructor(am):am},clone:function(){return this.rmap(function(){return false})},collect:function(an){var am=[];this.reach(function(ao){an(ao)&&am.push(ao)});return am},replace:function(am){var an;return l.call(am,this.data)&&(an=am[this.data])?an.constructor===String?C(this.map(function(ao){return ao.replace(am)}),function(){this.data=an}):an:this.map(function(ao){return ao.replace(am)})},repopulated_with:function(am){return new this.constructor(this.data,am)},with_data:function(am){return new this.constructor(am,Array.prototype.slice.call(this))},change:function(an,am){return C(new this.constructor(this.data,Array.prototype.slice.call(this)),function(ao){ao[an]=am})},compose_single:function(am,an){return this.change(am,an(this[am]))},traverse:function(am){am({entering:this});am({exiting:this.each(function(an){an.traverse(am)})});return this},flatten:function(am){am=am||this.data;return am!==this.data?this.as(am):!(g(B,am)&&this.length)?this:g(H,am)?C(new this.constructor(am),i(function(ao){for(var an=this;an&&an.data===am;an=an[1]){ao.push(an[0])}ao.push(an)},this)):C(new this.constructor(am),i(function(ap){for(var an=this,ao=[];an.data===am;an=an[0]){an[1]&&ao.push(an[1])}ao.push(an);for(an=ao.length-1;an>=0;--an){ap.push(ao[an])}},this))},unflatten:function(){var an=this,am=g(H,this.data);return this.length<=2?this:C(new this.constructor(this.data),function(aq){if(am){for(var ap=0,ao=an.length-1;ap<ao;++ap){aq=aq.push(an[ap]).push(ap<ao-2?new an.constructor(an.data):an[ap])[1]}}else{for(var ap=an.length-1;ap>=1;--ap){aq=aq.push(ap>1?new an.constructor(an.data):an[0]).push(an[ap])[0]}}})},as:function(am){return this.data===am?this:new this.constructor(am).push(this)},bindings:function(an){var am=an||{};this.reach(function(ao){if(ao.binds_a_value){am[ao.data]=ao.value}});return am},match:function(ao,ap){ao=ao.constructor===String?al.parse(ao):ao;ap||(ap={_:ao});if(this.is_wildcard()){return ap[this.data]=ao,ap}else{if(this.length===ao.length&&this.data===ao.data){for(var an=0,am=this.length;an<am;++an){if(!this[an].match(ao[an],ap)){return null}}return ap}}},toString:function(){var am=[""];this.serialize(am);return am.join("")},structure:function(){if(this.length){return"("+['"'+this.data+'"'].concat(N(function(am){return am.structure()},this)).join(" ")+")"}else{return this.data}}};al.syntax_subclass=function(an){var am=Array.prototype.slice.call(arguments,1);aa.apply(this,[an.prototype,v].concat(am));an.prototype.constructor=an;return an};var b=al.parse_hex=function(ap){for(var am=0,ao=0,an=ap.length,aq;ao<an;++ao,am*=16){am+=(aq=ap.charCodeAt(ao))<=58?aq-48:(aq&95)-55}return am},aj=al.parse_octal=function(ap){for(var am=0,ao=0,an=ap.length;ao<an;++ao,am*=8){am+=ap.charCodeAt(ao)-48}return am},d=al.unescape_string=function(aq){for(var ap=0,ar,an=aq.length,am=[],ao=false;ap<an;++ap){if(ao){ao=false,am.push((ar=aq.charAt(ap))==="\\"?"\\":ar==="n"?"\n":ar==="r"?"\r":ar==="b"?"\b":ar==="f"?"\f":ar==="0"?"\u0000":ar==="t"?"\t":ar==="v"?"\v":ar==='"'||ar==="'"?ar:ar==="x"?String.fromCharCode(b(aq.substring(ap,++ap+1))):ar==="u"?String.fromCharCode(b(aq.substring(ap,(ap+=3)+1))):String.fromCharCode(aj(aq.substring(ap,(ap+=2)+1))))}else{if((ar=aq.charAt(ap))==="\\"){ao=true}else{am.push(ar)}}}return am.join("")};al.javascript_tree_type_methods={is_string:function(){return/['"]/.test(this.data.charAt(0))},as_escaped_string:function(){return this.data.substr(1,this.data.length-2)},is_number:function(){return/^-?(0x|\d|\.\d+)/.test(this.data)},as_number:function(){return Number(this.data)},is_boolean:function(){return this.data==="true"||this.data==="false"},as_boolean:function(){return this.data==="true"},is_regexp:function(){return/^\/./.test(this.data)},as_escaped_regexp:function(){return this.data.substring(1,this.data.lastIndexOf("/"))},is_array:function(){return this.data==="["},as_unescaped_string:function(){return d(this.as_escaped_string())},is_wildcard:function(){return this.data.charCodeAt(0)===95},is_identifier:function(){return this.length===0&&/^[A-Za-z_$]\w*$/.test(this.data)&&!this.is_boolean()&&!this.is_null_or_undefined()&&!g(ak,this.data)},has_grouped_block:function(){return g(X,this.data)},is_block:function(){return g(h,this.data)},is_blockless_keyword:function(){return g(ag,this.data)},is_null_or_undefined:function(){return this.data==="null"||this.data==="undefined"},is_constant:function(){return this.is_number()||this.is_string()||this.is_boolean()||this.is_regexp()||this.is_null_or_undefined()},left_is_lvalue:function(){return/=$/.test(this.data)||/\+\+$/.test(this.data)||/--$/.test(this.data)},is_empty:function(){return !this.length},has_parameter_list:function(){return this.data==="function"||this.data==="catch"},has_lvalue_list:function(){return this.data==="var"||this.data==="const"},is_dereference:function(){return this.data==="."||this.data==="[]"},is_invocation:function(){return this.data==="()"},is_contextualized_invocation:function(){return this.is_invocation()&&this[0].is_dereference()},is_invisible:function(){return g(ab,this.data)},is_binary_operator:function(){return g(B,this.data)},is_prefix_unary_operator:function(){return g(E,this.data)},is_postfix_unary_operator:function(){return g(I,this.data)},is_unary_operator:function(){return this.is_prefix_unary_operator()||this.is_postfix_unary_operator()},accepts:function(am){return g(Q,this.data)&&Q[this.data]===(am.data||am)}};al.javascript_tree_serialization_methods={ends_with_block:function(){var am=this[X[this.data]];return this.data==="{"||g(X,this.data)&&(this.data!=="function"||this.length===3)&&am&&am.ends_with_block()},serialize:function(ap){var an=this.length,aq=this.data,am=";\n",ao=function(ar){if(W[ap[ap.length-1].charCodeAt(0)]===W[ar.charCodeAt(0)]){ap.push(" ",ar)}else{ap.push(ar)}};switch(an){case 0:if(g(ag,aq)){return ao(aq.replace(/^u/,""))}else{if(g(r,aq)){return ao(aq),ao(r[aq])}else{return ao(aq)}}case 1:if(g(E,aq)||g(ag,aq)){return ao(aq.replace(/^u/,"")),this[0].serialize(ap)}else{if(g(r,aq)){return ao(aq),this[0].serialize(ap),ao(r[aq])}else{if(g(B,aq)){return ao("/* unary "+aq+" node */"),this[0].serialize(ap)}else{return this[0].serialize(ap),ao(aq)}}}case 2:if(g(D,aq)){return this[0].serialize(ap),ao(aq.charAt(0)),this[1].serialize(ap),ao(aq.charAt(1))}else{if(g(X,aq)){return ao(aq),this[0].serialize(ap),this[1].serialize(ap)}else{if(g(ab,aq)){return this[0].serialize(ap),this[1].serialize(ap)}else{if(aq===";"){return this[0].serialize(ap),ao(am),this[1].serialize(ap)}else{return this[0].serialize(ap),ao(aq),this[1].serialize(ap)}}}}default:if(g(P,aq)){return this[0].serialize(ap),ao(aq),this[1].serialize(ap),ao(":"),this[2].serialize(ap)}else{if(g(X,aq)){return this.accepts(this[2])&&!this[1].ends_with_block()?(ao(aq),this[0].serialize(ap),this[1].serialize(ap),ao(am),this[2].serialize(ap)):(ao(aq),this[0].serialize(ap),this[1].serialize(ap),this[2].serialize(ap))}else{return this.unflatten().serialize(ap)}}}}};al.ref=al.syntax_subclass(function(an,am){if(an instanceof this.constructor){this.value=an.value,this.data=an.data}else{this.value=an,this.data=V(am&&am.constructor===String?am:"ref")}},al.javascript_tree_type_methods,al.javascript_tree_serialization_methods,{binds_a_value:true,length:0},{replace:function(am){var an;return l.call(am,this.data)&&(an=am[this.data])?an.constructor===String?C(new this.constructor(this.value),function(){this.data=an}):an:this}});al.syntax=al.syntax_subclass(function(ar){if(ar instanceof this.constructor){this.data=ar.data,this.length=0}else{this.data=ar&&ar.toString();this.length=0;for(var ap=1,am=arguments.length,ao;ao=arguments[ap],ap<am;++ap){for(var an=0,au=ao.length,aq,at;ao instanceof Array?(aq=ao[an],an<au):(aq=ao,!an);++an){this._append((at=aq.constructor)===String||at===Number||at===Boolean?new this.constructor(aq):aq)}}}},al.javascript_tree_type_methods,al.javascript_tree_serialization_methods);var a=al.empty=new al.syntax("");al.parse=function(aD){if(aD.constructor===al.syntax){return aD}var aG=aD.toString(),aA=0,aS=0,aJ=true,aT=false,aI=false,av=false,aH=0,aF="",aO=0,aM=aG.length,an=function(aW){return aG.charCodeAt(aW)},aw=[],ap=null,am=null,az=null,ar=N(function(){return[]},K),ao=[],ax=[a],aQ=function(aW){return ax.push(aW),aW},au=function(aW){return am?am._sibling(am=aW):(am=aW._append_to(az)),aQ(aW)},aL=this.syntax;if(aM===0){return a}while((aA=aO)<aM){while(j[aS=an(aO)]&&aO<aM){aA=++aO}aT=av=aI=aF=false;if(u[aS]){aF=!!++aO;aJ=s[aS]}else{if(aS===o&&an(aO+1)===R&&(aO+=2)){while(++aO<aM&&an(aO)!==o||an(aO-1)!==R){}aF=!++aO}else{if(aS===o&&an(aO+1)===o){while(++aO<aM&&!J[an(aO)]){}aF=false}else{if(O[aS]&&(aH=aS)&&aJ&&!(aJ=!(aF=aG.charAt(aO)))){while(++aO<aM&&(aS=an(aO))!==aH||aT){aT=!aT&&aS===m}while(++aO<aM&&k[an(aO)]){}aF=true}else{if(aS===T&&z[an(aO+1)]){while(++aO<aM&&z[an(aO)]){}aJ=!(aF=true)}else{if(ai[aS]&&(aS!==M||U[an(aO+1)])){while(++aO<aM&&(U[aS=an(aO)]||(aI^(aI|=aS===M))||(av^(av|=L[aS]&&++aO)))){}while(aO<aM&&U[an(aO)]){++aO}aJ=!(aF=true)}else{if(y[aS]&&(aF=aJ?"u":"",aJ=true)){while(aO<aM&&y[an(aO)]&&g(ak,aF+aG.charAt(aO))){aF+=aG.charAt(aO++)}aJ=!g(ah,aF)}else{while(++aO<aM&&W[an(aO)]){}aJ=g(ak,aF=aG.substring(aA,aO))}}}}}}}if(aO===aA){throw new Error('Caterwaul lex error at "'+aG.substr(aA,40)+'" with leading context "'+aG.substr(aA-40,40)+'" (probably a Caterwaul bug)')}if(aF===false){continue}aF=aF===true?aG.substring(aA,aO):aF==="u;"?";":aF;aF===ap?(aw.pop(),ap=aw[aw.length-1],am=am?am.p:az,az=null):(g(r,aF)?(aw.push(ap=r[aF]),az=au(aQ(new aL(aF))),am=null):au(aQ(new aL(aF))),g(F,aF)&&ar[F[aF]].push(am||az));aJ|=aF===")"&&am.l&&g(X,am.l.data)}for(var aO=0,aM=ar.length,aB,aV;aV=ar[aO],aB=w[aO],aO<aM;++aO){for(var aN=aB?0:aV.length-1,aE=aV.length,ay=aB?1:-1,aK,aU,aC;aB?aN<aE:aN>=0;aN+=ay){if(g(B,aU=(aK=aV[aN]).data)){aK._fold_lr()}else{if(g(G,aU)&&aK.l&&!((aC=aK.l.l)&&g(X,aC.data))&&(aK.l.data==="."||(aK.l.data==="function"&&aK.l.length===2)||!(g(ak,aK.l.data)||g(e,aK.l.data)))){ao.push(aK.l._wrap(aQ(new aL(aU+r[aU]))).p._fold_r())}else{if(g(I,aU)){aK._fold_l()}else{if(g(E,aU)){aK._fold_r()}else{if(g(P,aU)){aK._fold_lr();var aR=aK[1];aK[1]=aK[0];aK[0]=aR}else{if(g(X,aU)&&aK.r&&aK.r.data!==":"){for(var at=0,aP=X[aU];at<aP&&aK.r&&!g(h,aK.r.data);++at){aK._fold_r()}aK.r&&(aK.r.data===";"?aK.push(a):aK._fold_r());if(g(Q,aU)&&Q[aU]===(aK.r&&aK.r.r&&aK.r.r.data)){aK._fold_r().pop()._fold_r()}else{if(g(Q,aU)&&Q[aU]===(aK.r&&aK.r.data)){aK._fold_r()}}}else{if(g(ag,aU)){aK.r&&aK.r.data!==";"&&aK._fold_r()}}}}}}}}}for(var aO=ax.length-1,aV;aO>=0;--aO){(aV=ax[aO]).r&&aV._wrap(aQ(new aL("i;"))).p._fold_r()}for(var aO=0,aM=ao.length,aV,aq;aO<aM;++aO){(aq=(aV=ao[aO])[1]=aV[1][0]||a)&&(aq.p=aV)}while(am.p){am=am.p}for(var aO=ax.length-1,aV;aO>=0;--aO){delete (aV=ax[aO]).p,delete aV.l,delete aV.r}return am};(function(){var am=al.parse("var _bindings; return(_expression)"),ao=al.parse("_variable = _base._variable"),an=al.parse("undefined = void(0)");al.compile=function(aB,av,aA){aA=aa({gensym_renaming:true},aA);var ar=aa({},this._environment||{},av||{},aB.bindings()),ax=[an],az=V("base");for(var au in ar){if(l.call(ar,au)&&au!=="this"){ax.push(ao.replace({_variable:au,_base:az}))}}var ay=new this.syntax(",",ax).unflatten(),ap=am.replace({_bindings:ay,_expression:aB});if(aA.gensym_renaming){var at=this.gensym_rename_table(ap);for(var au in ar){l.call(ar,au)&&(ar[at[au]||au]=ar[au])}ap=ap.replace(at);az=at[az]}var aq=ap.toString();try{return(new Function(az,aq)).call(ar["this"],ar)}catch(aw){throw new Error((aw.message||aw)+" while compiling "+aq)}};al.gensym_rename_table=function(az){var ax={},av=[],ay=/^gensym_(.*)_\d+_[^_]+_[^_]+$/;az.reach(function(aA){var aB=aA.data;ay.test(aB)&&(ax[aB]||av.push(aB));ax[aB]=aB.replace(ay,"$1")||"anon"});var ap={},aw=function(aA){if(!(aA in ax)){return aA}var aB=ap[aA]||0;while(ax[aA+(++aB).toString(36)]){}return aA+(ap[aA]=aB).toString(36)};for(var aq={},at=0,ar=av.length,au;at<ar;++at){aq[au=av[at]]||(ax[aq[au]=aw(ax[au])]=true)}return aq}})();al.init=function(an){var am=function(aq,ao,ap){return aq.constructor===Function||aq.constructor===String?al.compile(am.call(am,al.parse(aq)),ao,ap):an?aq.rmap(function(ar){return an.call(am,ar,ao,ap)}):aq};am.global=al;am.macroexpander=an;return am};al.initializer=f;al.clone=function(){return C(f(f,c).deglobalize(),function(){for(var am in al){this[am]||(this[am]=al[am])}})};return caterwaul=al});