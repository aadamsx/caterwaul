caterwaul.js_base()(caterwaul.precompiled_internal((function(){var a=new caterwaul.syntax("()",new caterwaul.syntax(".",new caterwaul.syntax("caterwaul"),new caterwaul.syntax("precompiled_internal")),new caterwaul.syntax("_x"));var c=new caterwaul.syntax("new",new caterwaul.syntax("()",new caterwaul.syntax(".",new caterwaul.syntax("caterwaul"),new caterwaul.syntax("syntax")),new caterwaul.syntax("_name")));var b=new caterwaul.syntax("new",new caterwaul.syntax("()",new caterwaul.syntax(".",new caterwaul.syntax("caterwaul"),new caterwaul.syntax("syntax")),new caterwaul.syntax(",",new caterwaul.syntax("_name"),new caterwaul.syntax("_children"))));return(function(d){d.precompile=(function(e){return(function(){var u=d.parse("function (_args) {_body}"),g=d.parse("function ()      {_body}"),D=d.parse("function (_args, _gensym) {_body}"),j=d.parse("function (_gensym)        {_body}"),B=D,h=j,w=(function(M){return(function(N){return(function(O){return(function(){var Q=d.gensym(),P=M.replace({_args:O._args,_gensym:Q,_body:H(O._body,N)});return((function(R){return(N[Q]={tree:P}),R}).call(this,(P)))}).call(this)})})}),K=w(D),z=w(j),H=(function(M,N){return d.macroexpand(M,d.macro(g,z(N)),d.macro(u,K(N)))}),J=(function(M){return(function(){var N=B.match(M)||h.match(M);return(((N)&&(N._gensym.data)))}).call(this)}),L=(function(P,O,N,M){return((O&&P[O])&&((function(Q){return(P[O].compiled=N,P[O].environment=M),Q}).call(this,((function(Q){return(((P[O].compiled)&&((function(){throw new Error(("detected multiple compilations of "+(P[O].tree.serialize())+""))}).call(this)))),Q}).call(this,(P[O]))))))}),E=(function(N,M){return(function(P,O){return(function(Q){return(L(M,J(P),P,d.merge({},this._environment||{},O))),Q}).call(this,(N.call(this,P,O)))})}),o=(function(M){return a.replace({_x:M})}),t=d.parse("(function () {_vars; return (_value)}).call(this)"),I=d.parse("var _var = _value"),A=d.parse("null"),l=(function(M){return"'"+M.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"'"}),y=(function(M){return M.length===0?c.replace({_name:l(M.data)}):(function(){var N=new d.syntax(",",(function(){for(var Q=(M),P=[],S=0,R=Q.length,O;S<R;++S){O=Q[S],P.push(y(O))}return P}).call(this)).unflatten();return(b.replace({_name:l(M.data),_children:N}))}).call(this)}),x=(function(O,N,M){return !O?(""+(O)+""):O.constructor===d.syntax?M[O.id()]||(function(P){return(y(O))}).call(this,((M[O.id()]=N))):(function(){throw new Error(("syntax ref value is not serializable: "+(O)+""))}).call(this)}),v=(function(M,N){return I.replace({_var:M,_value:N})}),f=(function(M){return(function(){var N=(M),P=[];for(var O in N){Object.prototype.hasOwnProperty.call(N,O)&&P.push(v(O,M[O]))}return P}).call(this)}),s=(function(M){return(function(){var O=[],N={};return((function(P){return(M.reach((function(Q){return((Q&&Q.binds_a_value)&&(O.push(v(Q.data,x(Q.value,Q.data,N)))))}))),P}).call(this,(O)))}).call(this)}),G=(function(N,M){return(function(){var O=f(M).concat(s(N));return(O.length?new d.syntax(";",O):A)}).call(this)}),r=(function(N,M){return t.replace({_vars:G(N,M),_value:N})}),p=(function(N,M){return o(r(N,M))}),k=(function(M){return(function(N){return(function(){var O=M[N._gensym.data];return(((O&&O.compiled)&&(p(O.compiled,O.environment))))}).call(this)})}),C=(function(N,M){return d.macroexpand(M,d.macro(h,B,k(N)))}),i=(function(N,M){return(function(){var O={_body:n(N,M._body),_args:M._args};return(M._args?u.replace(O):g.replace(O))}).call(this)}),q=(function(M){return(function(N){return(function(){var O=M[N._gensym.data];return(((O&&O.tree)&&(i(M,N))))}).call(this)})}),n=(function(N,M){return d.macroexpand(M,d.macro(h,B,q(N)))}),F=(function(M,N){return(function(O){return(O.compile=E(O.compile,N)),O}).call(this,(M.clone()))}),m=(function(M,N){return(function(){var P={},O=H(d.parse(N),P);return((function(Q){return(M.compile(O,{caterwaul:F(M,P)})()),Q}).call(this,({references:P,annotated:O})))}).call(this)});return((function(){var M=m(this,e);return(this.compile(n(M.references,C(M.references,M.annotated))))}).call(this))}).call(this)})})}).call(this)))(caterwaul);caterwaul.js_base()(caterwaul.precompiled_internal((function(){null;return(function(a){a.tracer=(function(b,c){return(function(){var d=a.anonymizer("E","S","H","D","I"),f=(function(j,i){return a.macro(d(j),i.constructor===Function?(function(k){return this.expand(i.call(this,k))}):d(i))}),h=(function(){var i=(function(m){return(function(){var n=(function(p){return d(p).replace({"=":m})}),o=(function(p,q){return a.macro(n(p),n(q))});return([o("E[_x     = _y]","H[_, _x           = E[_y]]"),o("E[_x[_y] = _z]","H[_, E[_x][E[_y]] = E[_z]]"),o("E[_x._y  = _z]","H[_, E[_x]._y     = E[_z]]")])}).call(this)}),l=(function(m){return a.macro(d("E[_x + _y]").replace({"+":m}),d("H[_, E[_x] + E[_y]]").replace({"+":m}))}),j=(function(m){return a.macro(d("E[+_x]").replace({"u+":("u"+(m)+"")}),d("H[_, +E[_x]]").replace({"u+":("u"+(m)+"")}))}),k=(function(m){return m.split(/\s+/)});return([f("E[_x]","H[_, _x]"),f("E[]","null"),(function(){for(var o=(k("= += -= *= /= %= &= |= ^= <<= >>= >>>=")),n=[],q=0,p=o.length,m;q<p;++q){m=o[q],n.push(i(m))}return n}).call(this),(function(){for(var o=(k("() [] + - * / % < > <= >= == != === !== in instanceof ^ & | && ||")),n=[],q=0,p=o.length,m;q<p;++q){m=o[q],n.push(l(m))}return n}).call(this),(function(){for(var o=(k("+ - ! ~")),n=[],q=0,p=o.length,m;q<p;++q){m=o[q],n.push(j(m))}return n}).call(this),f("E[(_x)]","(E[_x])"),f("E[++_x]","H[_, ++_x]"),f("E[--_x]","H[_, --_x]"),f("E[_x++]","H[_, _x++]"),f("E[_x--]","H[_, _x--]"),f("E[_x, _y]","E[_x], E[_y]"),f("E[_x._y]","H[_, E[_x]._y]"),f("E[_o._m(_xs)]","D[_, E[_o], _m, [E[_xs]]]"),f("E[_o[_m](_xs)]","I[_, E[_o], E[_m], [E[_xs]]]"),f("E[typeof _x]","H[_, typeof _x]"),f("E[void _x]","H[_, void E[_x]]"),f("E[delete _x]","H[_, delete _x]"),f("E[delete _x._y]","H[_, delete E[_x]._y]"),f("E[delete _x[_y]]","H[_, delete E[_x][E[_y]]]"),f("E[new _x(_y)]","H[_, new H[_x](E[_y])]"),f("E[{_ps}]","H[_, {E[_ps]}]"),f("E[_k: _v]","_k: E[_v]"),f("E[[_xs]]","H[_, [E[_xs]]]"),f("E[_x ? _y : _z]","H[_, E[_x] ? E[_y] : E[_z]]"),f("E[function (_xs) {_body}]","H[_, function (_xs) {S[_body]}]")])}).call(this),e=[f("S[_x]","E[_x]"),f("S[for (_x) _y]","for (S[_x]) S[_y]"),f("S[{_x}]","{S[_x]}"),f("S[for (_x; _y; _z) _body]","for (S[_x]; E[_y]; E[_z]) S[_body]"),f("S[_x; _y]","S[_x]; S[_y]"),f("S[while (_x) _y]","while (E[_x]) S[_y]"),f("S[do _x; while (_y)]","do S[_x]; while (E[_y])"),f("S[_x, _y]","S[_x], S[_y]"),f("S[do {_x} while (_y)]","do {S[_x]} while (E[_y])"),f("S[_x = _y]","_x = E[_y]"),f("S[var _xs]","var S[_xs]"),f("S[try {_x} catch (_e) {_y}]","try {S[_x]} catch (_e) {S[_y]}"),f("S[const _xs]","const S[_xs]"),f("S[try {_x} catch (_e) {_y} finally {_z}]","try {S[_x]} catch (_e) {S[_y]} finally {S[_z]}"),f("S[try {_x} finally {_y}]","try {S[_x]} finally {S[_y]}"),f("S[return _x]","return E[_x]"),f("S[function _f(_args) {_body}]","function _f(_args) {S[_body]}"),f("S[return]","return"),f("S[throw _x]","throw E[_x]"),f("S[break _label]","break _label"),f("S[if (_x) _y]","if (E[_x]) S[_y]"),f("S[break]","break"),f("S[if (_x) _y; else _z]","if (E[_x]) S[_y]; else S[_z]"),f("S[continue _label]","continue _label"),f("S[if (_x) {_y} else _z]","if (E[_x]) {S[_y]} else S[_z]"),f("S[continue]","continue"),f("S[switch (_c) {_body}]","switch (E[_c]) {S[_body]}"),f("S[_label: _stuff]","_label: S[_stuff]"),f("S[with (_x) _y]","with (E[_x]) S[_y]")],g=(function(){var o=(function(v){return((b)&&(b(v)))}),p=(function(v,w){return(function(x){return(w)}).call(this,(((c)&&(c(v,w)))))}),q=(function(v,w,y,x){return(function(){var z=w[y];return((function(A){return(p(v,z.apply(w,x)))}).call(this,((function(A){return(p(v[0],z))}).call(this,(o(v[0]))))))}).call(this)}),s=new a.ref(o),n=new a.ref(p),k=new a.ref(q),u=(function(v){return('"'+(v.data.replace(/(")/g,"\\$1"))+'"')}),r=a.parse("(_before(_tree), _after(_tree, _expression))"),m=a.parse("(_before(_tree), _after(_tree, _object, _method, [_parameters]))"),l=(function(w,v){return r.replace({_before:s,_after:n,_tree:new a.ref(w),_expression:v.as("(")})}),t=(function(v,w,y,x){return m.replace({_before:s,_after:k,_tree:new a.ref(v),_object:w,_method:y,_parameters:x})}),j=(function(v,w){return t(v,w._object,u(w._method),w._parameters)}),i=(function(v,w){return t(v,w._object,w._method,w._parameters)});return([f("H[_tree, _x]",(function(v){return l(v._tree[1],v._x)})),f("D[_tree, _object, _method, [_parameters]]",(function(v){return j(v._tree[1],v)})),f("I[_tree, _object, _method, [_parameters]]",(function(v){return i(v._tree[1],v)}))])}).call(this);return((function(i){return(i.init_function=(function(j){return this.macroexpand(d("S[_x]").replace({_x:j}))})),i}).call(this,(a.clone().macros(h,e,g))))}).call(this)})})}).call(this)))(caterwaul);caterwaul.js_base()(caterwaul.precompiled_internal((function(){var a=new caterwaul.syntax("()",new caterwaul.syntax(".",new caterwaul.syntax(".",new caterwaul.syntax("caterwaul"),new caterwaul.syntax("assertions")),new caterwaul.syntax("_name")),new caterwaul.syntax(",",new caterwaul.syntax(",",new caterwaul.syntax("_expression"),new caterwaul.syntax("_parameters")),new caterwaul.syntax("_ref")));return(function(b){b.assert=(function(d,c){return d||(function(){throw new Error(c)}).call(this)});b.assertions={should_be:(function(d,c,e){return b.assert(d===c,(""+(e.toString())+": "+(d)+" !== "+(c)+""))}),should_not_be:(function(d,c,e){return b.assert(d!==c,(""+(e.toString())+": "+(d)+" === "+(c)+""))})};b.test_case_gensym=b.gensym();b.test_words=(function(c){return(function(){var d=(function(e){return c.parameterized_modifier(e,(function(f){return a.replace({_expression:f._expression,_parameters:f._parameters,_name:e,_ref:new b.ref(f._)})}))});return(b.map(d,["should_be","should_not_be"]))}).call(this)});b.test_base=(function(){return(function(c){return(c.macros((c.macros()||[]).concat(c.test_words(c.js())))),c}).call(this,(this.clone()))});b.test=(function(c){return this.test_base()(c)()})})}).call(this)))(caterwaul);