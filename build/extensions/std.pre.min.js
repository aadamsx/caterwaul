(function(a){a.anonymizer=function(){for(var d={},c=0,b=arguments.length;c<b;++c){d[arguments[c]]=a.gensym()}return function(e){return a.ensure_syntax(e).replace(d)}}})(caterwaul);(function(b){var a=b.anonymizer("i","l","xs","result");b.word_macros=function(c){return[c.modifier("qs",function(d){return new b.ref(d._expression)}),c.modifier("qse",function(d){return new b.ref(this.expand(d._expression))}),c.modifier("wobbly","chuck","(function () {throw _expression}).call(this)"),c.parameterized_modifier("failover","safely","(function () {try {return (_expression)} catch (e) {return (_parameters)}}).call(this)"),c.parameterized_modifier("given","from","fn","(function (_parameters) {return _expression})"),c.parameterized_modifier("bgiven","bfrom","fb","(function (t, f) {return (function () {return f.apply(t, arguments)})})(this, (function (_parameters) {return _expression}))"),c.parameterized_modifier("effect","se","(function (it) {return (_parameters), it}).call(this, (_expression))"),c.parameterized_modifier("then","re","returning","(function (it) {return (_parameters)}).call(this, (_expression))"),c.parameterized_modifier("where","bind","(function () {var _parameters; return (_expression)}).call(this)"),c.parameterized_modifier("when","((_parameters) && (_expression))"),c.parameterized_modifier("unless","(! (_parameters) && (_expression))"),c.parameterized_modifier("otherwise","((_expression) || (_parameters))"),c.parameterized_modifier("when_defined","((_parameters) != null && (_expression))"),c.parameterized_modifier("unless_defined","((_parameters) == null && (_expression))"),c.parameterized_modifier("over",a("(function () {for (var xs = (_parameters), result = [], i = 0, l = xs.length, it; i < l; ++i)it = xs[i], result.push(_expression); return result}).call(this)")),c.parameterized_modifier("over_keys",a("(function () {var x = (_parameters), result = []; for (var it in x) Object.prototype.hasOwnProperty.call(x, it) && result.push(_expression); return result}).call(this)")),c.parameterized_modifier("over_values",a("(function () {var x = (_parameters), result = [], it; for (var k in x) Object.prototype.hasOwnProperty.call(x, k) && (it = x[k], result.push(_expression));return result}).call(this)")),c.parameterized_modifier("until",a("(function () {var result = []; while (! (_parameters)) result.push(_expression); return result}).call(this)"))]}})(caterwaul);(function(a){a.js=function(){var d=function(e,f){return function(g){return a.macro(a.parse(g).replace({_modifiers:a.parse(e)}),f)}};var c=function(e,f){return function(g){return b.modifier(a.parse(g).replace({_modifiers:a.parse(e)}),f)}};var b={modifier:this.right_variadic(function(e,f){return a.map(d(e,f),["_expression /_modifiers","_expression -_modifiers","_expression |_modifiers","_modifiers[_expression]","_modifiers in _expression","_expression, _modifiers"])}),parameterized_modifier:this.right_variadic(function(e,f){return[a.map(c(e,f),["_modifiers[_parameters]","_modifiers._parameters"]),a.map(d(e,f),["_expression <_modifiers> _parameters","_expression -_modifiers- _parameters"])]}),macros:[function(h){var t=h.data,e=t.charAt(0),k=a.syntax;if(e!=="'"&&e!=='"'||!/#\{[^\}]+\}/.test(t)){return false}for(var j=[],n=1,m=t.length-1,r=0,o=false,f=1,p;n<m;++n){if(r){if((p=t.charAt(n))==="}"){--r||j.push(t.substring(f,n))&&(f=n+1),o=false}else{r+=p==="{"}}else{if((p=t.charAt(n))==="#"){o=true}else{if(p==="{"&&o){j.push(t.substring(f,n-1)),f=n+1,++r}else{o=false}}}}j.push(t.substring(f,m));for(var g=new RegExp("\\\\"+e,"g"),n=0,m=j.length;n<m;++n){j[n]=n&1?this.expand(a.parse(j[n].replace(g,e)).as("(")):new k(e+j[n]+e)}return new k("+",j).unflatten().as("(")},this.macro("_left(_args) = _right","_left = (function (_args) {return _right})"),this.macro("_left(_var = arguments) = _right","_left = (function () {var _var = arguments; return _right})")]};return b}})(caterwaul);caterwaul.js_base=function(){var a=this.js();return this.clone().macros(this.word_macros(a),a.macros)};caterwaul.js_base()(caterwaul.precompiled_internal((function(){null;return(function(a){a.seq_macro=(function(b){return b.modifier("seq",(function(){var c=a.seq();return((function(d){return this.expand(c(d._expression))}))}).call(this))});a.seq=(function(){return(function(){var d=a.anonymizer("S"),e=(function(g,f){return a.macro(d(g),f.constructor===Function?(function(h){return this.expand(f.call(this,h))}):d(f))}),b=(function(){var t=(function(D,B,A,C){return(function(){var G=(function(H){return d(H).replace({"+":D})}),E=(function(I,H){return e(G(I),H.constructor===Function?H:G(H))}),F=[E("S[_xs +~[_f]]","S[_xs +[S[_f]]]"),E("S[_xs +~_var[_f]]","S[_xs +_var[S[_f]]]"),E("S[_xs +!~[_f]]","S[_xs +![S[_f]]]"),E("S[_xs +!~_var[_f]]","S[_xs +!_var[S[_f]]]"),E("S[_xs +~!~[_f]]","S[_xs +~![S[_f]]]"),E("S[_xs +~!~_var[_f]]","S[_xs +~!_var[S[_f]]]")];return((function(H){return(H.concat(F))}).call(this,((function(H){return(((C)&&(H.push(E("S[_xs +~![_f]]",C),E("S[_xs +~!_var[_f]]",C))))),H}).call(this,((function(H){return(((A)&&(H.push(E("S[_xs +![_f]]",A),E("S[_xs +!_var[_f]]",A))))),H}).call(this,((function(H){return(H.push(E("S[_xs +[_f]]",B),E("S[_xs +_var[_f]]",B))),H}).call(this,([])))))))))}).call(this)}),o=(function(B,A){return(function(){var C=(function(D){return d(D).replace({"+":B})});return(e(C("S[_xs + _ys]"),A))}).call(this)}),m=a.anonymizer("xs","ys","x","y","i","j","l","lj"),p=(function(A){return m(y(d(A)))}),g=d("(function (xs) {_body}).call(this, S[_xs])"),y=(function(A){return g.replace({_body:A})}),l=(function(A){return(function(){var B=p(A);return((function(C){return B.replace(s(C))}))}).call(this)}),w=l("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], ys.push((_f));                  return ys"),j=l("for (var          _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], (_f);                           return xs"),r=l("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], ys.push.apply(ys, (_f));        return ys"),n=l("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], (_f) && ys.push(_x);            return ys"),i=l("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], (_f) || ys.push(_x);            return ys"),f=l("for (var ys = [], _xi = 0, _xl = xs.length, _x, _y; _xi < _xl; ++_xi) _x = xs[_xi], (_y = (_f)) && ys.push(_y); return ys"),z=l("for (var _x = xs[0], _xi = 1, _xl = xs.length, _x0;            _xi < _xl; ++_xi) _x0 = xs[_xi], _x = (_f);      return _x"),u=l("for (var _xl = xs.length - 1, _xi = _xl - 1, _x0 = xs[_xl], _x; _xi >= 0; --_xi) _x = xs[_xi], _x0 = (_f);      return _x0"),q=l("for (var _x = xs[0], _xi = 0, _xl = xs.length, x; _xi < _xl; ++_xi) {_x = xs[_xi]; if (y = (_f)) return y} return false"),k=l("return xs.concat(S[_ys])"),v=l("for (var ys = S[_ys], pairs = [], i = 0, l = xs.length; i < l; ++i) pairs.push([xs[i], ys[i]]); return pairs"),h=l("for (var ys = S[_ys], pairs = [], i = 0, l = xs.length, lj = ys.length; i < l; ++i) for (var j = 0; j < lj; ++j) pairs.push([xs[i], ys[j]]);return pairs"),s=(function(A){return a.merge({},A,x(A._var))}),x=(function(A){return(function(){var B=A&&A.data||"x";return({_x:B,_xi:(""+(B)+"i"),_xl:(""+(B)+"l"),_x0:(""+(B)+"0")})}).call(this)});return([e("S[_x]","_x"),e("S[_x, _y]","S[_x], S[_y]"),t("|",q),t("*",w,j,r),o("+",k),t("%",n,i,f),o("-",h),t("/",z,u),o("^",v)])}).call(this),c=(function(){var h=(function(n){return i.replace(a.merge({_lower:"0",_step:"1"},n))}),i=d("(function () {for (var r = [], i = _lower, u = _upper, d = u - i; d > 0 ? i < u : i > u; i += _step) r.push(i); return r})()"),o=a.parse("(function () {_body}).call(this)"),k=(function(n){return o.replace({_body:n})}),g=(function(n){return(function(p){return k(d(n)).replace(p)})}),m=g("var ks = [], o = S[_o]; for (var k in o) Object.prototype.hasOwnProperty.call(o, k) && ks.push(k); return ks"),l=g("var vs = [], o = S[_o]; for (var k in o) Object.prototype.hasOwnProperty.call(o, k) && vs.push(o[k]); return vs"),f=g("var ps = [], o = S[_o]; for (var k in o) Object.prototype.hasOwnProperty.call(o, k) && ps.push([k, o[k]]); return ps"),j=g("for (var o = {}, xs = S[_xs], i = 0, l = xs.length, x; i < l; ++i) x = xs[i], o[x[0]] = x[1]; return o");return([e("S[n[_upper]]",h),e("S[_o /keys]",m),e("S[n[_lower, _upper]]",h),e("S[_o /values]",l),e("S[n[_lower, _upper, _step]]",h),e("S[_o /pairs]",f),e("S[_xs |object]",j)])}).call(this);return((function(f){return(f.init_function=(function(g){return this.macroexpand(d("S[_x]").replace({_x:g}))})),f}).call(this,(a.clone().macros(b,c))))}).call(this)})})}).call(this)))(caterwaul);caterwaul.js_all=function(){var a=this.js();return this.clone().macros(this.word_macros(a),a.macros,this.seq_macro(a))};