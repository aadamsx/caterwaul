(function(a){a.anonymizer=function(){for(var d={},c=0,b=arguments.length;c<b;++c){d[arguments[c]]=a.gensym(arguments[c])}return function(e){return a.ensure_syntax(e).replace(d)}}})(caterwaul);(function(b){var a=b.anonymizer("i","l","xs","result");b.word_macros=function(c){return[c.modifier("qs",function(d){return new b.ref(d._expression,"qs")}),c.modifier("qse",function(d){return new b.ref(this.expand(d._expression),"qse")}),c.modifier("reexpand",function(d){return this.expand(this.expand(d._expression))}),c.modifier("noexpand",function(d){return d._expression}),c.modifier("wobbly","chuck","raise","(function () {throw _expression}).call(this)"),c.parameterized_modifier("failover","safely","rescue","(function () {try {return (_expression)} catch (e) {return (_parameters)}}).call(this)"),c.parameterized_modifier("given","(function (_parameters) {return _expression})"),c.parameterized_modifier("bgiven","(function (t, f) {return (function () {return f.apply(t, arguments)})})(this, (function (_parameters) {return _expression}))"),c.modifier("delay","(function (t, f) {return (function () {return f.call(t)})})(this, (function () {return _expression}))"),c.modifier("lazy","(function (t, f, v, vc) {return (function () {return vc ? v : (vc = true, v = f.call(t))})})(this, (function () {return _expression}))"),c.parameterized_modifier("effect","se","(function (it) {return (_parameters), it}).call(this, (_expression))"),c.parameterized_modifier("then","re","returning","(function (it) {return (_parameters)}).call(this, (_expression))"),c.parameterized_modifier("where","bind","(function () {var _parameters; return (_expression)}).call(this)"),c.parameterized_modifier("when","((_parameters) && (_expression))"),c.parameterized_modifier("unless","(! (_parameters) && (_expression))"),c.parameterized_modifier("otherwise","((_expression) || (_parameters))"),c.parameterized_modifier("when_defined","((_parameters) != null && (_expression))"),c.parameterized_modifier("unless_defined","((_parameters) == null && (_expression))"),c.parameterized_modifier("over",a("(function () {for (var xs = (_parameters), result = [], i = 0, l = xs.length, it; i < l; ++i)it = xs[i], result.push(_expression); return result}).call(this)")),c.parameterized_modifier("over_keys",a("(function () {var x = (_parameters), result = []; for (var it in x) Object.prototype.hasOwnProperty.call(x, it) && result.push(_expression); return result}).call(this)")),c.parameterized_modifier("over_values",a("(function () {var x = (_parameters), result = [], it; for (var k in x) Object.prototype.hasOwnProperty.call(x, k) && (it = x[k], result.push(_expression));return result}).call(this)")),c.parameterized_modifier("until",a("(function () {var result = []; while (! (_parameters)) result.push(_expression); return result}).call(this)"))]}})(caterwaul);(function(a){a.js=function(){var d=function(e,f){return function(g){return a.macro(a.parse(g).replace({_modifiers:a.parse(e)}),f)}};var c=function(e,f){return function(g){return b.modifier(a.parse(g).replace({_modifiers:a.parse(e)}),f)}};var b={modifier:this.right_variadic(function(e,f){return a.map(d(e,f),["_expression /_modifiers","_expression -_modifiers","_expression |_modifiers","_modifiers[_expression]","_modifiers in _expression","_expression, _modifiers"])}),parameterized_modifier:this.right_variadic(function(e,f){return[a.map(c(e,f),["_modifiers[_parameters]","_modifiers._parameters"]),a.map(d(e,f),["_expression <_modifiers> _parameters","_expression -_modifiers- _parameters"])]}),macros:[function(h){var t=h.data,e=t.charAt(0),k=a.syntax;if(e!=="'"&&e!=='"'||!/#\{[^\}]+\}/.test(t)){return false}for(var j=[],n=1,m=t.length-1,r=0,o=false,f=1,p;n<m;++n){if(r){if((p=t.charAt(n))==="}"){--r||j.push(t.substring(f,n))&&(f=n+1),o=false}else{r+=p==="{"}}else{if((p=t.charAt(n))==="#"){o=true}else{if(p==="{"&&o){j.push(t.substring(f,n-1)),f=n+1,++r}else{o=false}}}}j.push(t.substring(f,m));for(var g=new RegExp("\\\\"+e,"g"),n=0,m=j.length;n<m;++n){j[n]=n&1?this.expand(a.parse(j[n].replace(g,e)).as("(")):new k(e+j[n]+e)}return new k("+",j).unflatten().as("(")},this.macro("_left(_args) = _right","_left = (function (_args) {return _right})"),this.macro("_left(_var = arguments) = _right","_left = (function () {var _var = arguments; return _right})")]};return b}})(caterwaul);caterwaul.js_base=function(){var a=this.js();return this.clone().macros(this.word_macros(a),a.macros)};caterwaul.js_base()(caterwaul.precompiled_internal((function(){null;return(function(a){a.seq_macro=(function(b){return b.modifier("seq",(function(){var c=a.seq();return((function(d){return this.expand(c(d._expression))}))}).call(this))});a.seq=(function(){return(function(){var d=a.anonymizer("S"),e=(function(g,f){return a.macro(d(g),f.constructor===Function?(function(h){return this.expand(f.call(this,h))}):d(f))}),b=(function(){var H=(function(M,L){return d(L).replace({"*":M})}),E=(function(N,M,L){return e(H(N,M),L.constructor===Function?L:H(N,L))}),y=(function(L,M){return[E(M,("S[_xs "+(L)+"*~[_f]]"),("S[_xs "+(L)+"*[S[_f]]]")),E(M,("S[_xs "+(L)+"*~_var[_f]]"),("S[_xs "+(L)+"*_var[S[_f]]]")),E(M,("S[_xs "+(L)+"*!~[_f]]"),("S[_xs "+(L)+"*![S[_f]]]")),E(M,("S[_xs "+(L)+"*!~_var[_f]]"),("S[_xs "+(L)+"*!_var[S[_f]]]")),E(M,("S[_xs "+(L)+"*~!~[_f]]"),("S[_xs "+(L)+"*~![S[_f]]]")),E(M,("S[_xs "+(L)+"*~!~_var[_f]]"),("S[_xs "+(L)+"*~!_var[S[_f]]]"))]}),p=a.anonymizer("xs","ys","x","y","i","j","l","lj","r","o","k"),w=(function(L){return p(I(d(L)))}),g=d("(function (xs) {_body}).call(this, S[_xs])"),I=(function(L){return g.replace({_body:L})}),o=(function(L){return(function(){var M=w(L);return((function(N){return M.replace(A(N))}))}).call(this)}),F=o("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], ys.push((_f));                                 return ys"),j=o("for (var          _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], (_f);                                          return xs"),z=o("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], ys.push.apply(ys, ys.slice.call((_f)));        return ys"),r=o("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], (_f) && ys.push(_x);                           return ys"),i=o("for (var ys = [], _xi = 0, _xl = xs.length, _x; _xi < _xl; ++_xi) _x = xs[_xi], (_f) || ys.push(_x);                           return ys"),f=o("for (var ys = [], _xi = 0, _xl = xs.length, _x, _y; _xi < _xl; ++_xi) _x = xs[_xi], (_y = (_f)) && ys.push(_y);                return ys"),J=o("for (var _x = xs[0], _xi = 1, _xl = xs.length, _x0;            _xi < _xl; ++_xi) _x0 = xs[_xi], _x = (_f);                     return _x"),B=o("for (var _xl = xs.length - 1, _xi = _xl - 1, _x0 = xs[_xl], _x; _xi >= 0; --_xi) _x = xs[_xi], _x0 = (_f);                     return _x0"),x=o("for (var _x = xs[0], _xi = 0, _xl = xs.length, x; _xi < _xl; ++_xi) {_x = xs[_xi]; if (y = (_f)) return y} return false"),n=o("return xs.concat(S[_ys])"),C=o("for (var ys = S[_ys], pairs = [], i = 0, l = xs.length; i < l; ++i) pairs.push([xs[i], ys[i]]); return pairs"),h=o("for (var ys = S[_ys], pairs = [], i = 0, l = xs.length, lj = ys.length; i < l; ++i) for (var j = 0; j < lj; ++j) pairs.push([xs[i], ys[j]]);return pairs"),D=o("var r = {};        for (var _x in xs) if (Object.prototype.hasOwnProperty.call(xs, _x)) r[_f] = xs[_x];                        return r"),k=o("                   for (var _x in xs) if (Object.prototype.hasOwnProperty.call(xs, _x)) _f;                                    return xs"),v=o("var r = {};        for (var _x in xs) if (Object.prototype.hasOwnProperty.call(xs, _x) &&      (_f))  r[_x] = xs[_x];          return r"),m=o("var r = {};        for (var _x in xs) if (Object.prototype.hasOwnProperty.call(xs, _x) &&    ! (_f))  r[_x] = xs[_x];          return r"),u=o("var r = {}, x;     for (var _x in xs) if (Object.prototype.hasOwnProperty.call(xs, _x) && (x = (_f))) r[x]  = xs[_x];          return r"),s=o("var r = {}, _x;    for (var  k in xs) if (Object.prototype.hasOwnProperty.call(xs, k)) _x = xs[k], r[k] = (_f);                return r"),K=o("var _x;            for (var  k in xs) if (Object.prototype.hasOwnProperty.call(xs, k)) _x = xs[k], _f;                         return xs"),q=o("var r = {}, _x;    for (var  k in xs) if (Object.prototype.hasOwnProperty.call(xs, k)) _x = xs[k],        (_f) && (r[k] = _x); return r"),l=o("var r = {}, _x;    for (var  k in xs) if (Object.prototype.hasOwnProperty.call(xs, k)) _x = xs[k],        (_f) || (r[k] = _x); return r"),t=o("var r = {}, _x, x; for (var  k in xs) if (Object.prototype.hasOwnProperty.call(xs, k)) _x = xs[k], x = (_f), x && (r[k] =  x); return r"),A=(function(L){return a.merge({},L,G(L._var))}),G=(function(L){return(function(){var M=L&&L.data||"x";return({_x:M,_xi:(""+(M)+"i"),_xl:(""+(M)+"l"),_x0:(""+(M)+"0")})}).call(this)});return((function(){var L=(function(O,R,P,N,Q){return(function(){var S=O&&("%"+(O)+"");return((function(T){return(T.concat(y(S,R)))}).call(this,((function(T){return(((Q)&&(T.push(E(R,("S[_xs "+(S)+"*~![_f]]"),Q),E(R,("S[_xs "+(S)+"*~!_var[_f]]"),Q))))),T}).call(this,((function(T){return(((N)&&(T.push(E(R,("S[_xs "+(S)+"*![_f]]"),N),E(R,("S[_xs "+(S)+"*!_var[_f]]"),N))))),T}).call(this,((function(T){return(T.push(E(R,("S[_xs "+(S)+"*[_f]]"),P),E(R,("S[_xs "+(S)+"*_var[_f]]"),P))),T}).call(this,([])))))))))}).call(this)}),M=(function(O,N){return(function(){var P=(function(Q){return d(Q).replace({"+":O})});return(e(P("S[_xs + _ys]"),N))}).call(this)});return([e("S[_x]","_x"),e("S[_x, _y]","S[_x], S[_y]"),L("","|",x),e("S[(_x)]","(S[_x])"),L("","*",F,j,z),M("+",n),L("","%",r,i,f),M("-",h),L("","/",J,B),M("^",C),L("k","*",D,k),L("v","*",s,K),L("k","%",v,m,u),L("v","%",q,l,t)])}).call(this))}).call(this),c=(function(){var h=(function(n){return i.replace(a.merge({_lower:"0",_step:"1"},n))}),i=d("(function (i, u, s) {if ((u - i) * s <= 0) return [];for (var r = [], d = u - i; d > 0 ? i < u : i > u; i += s) r.push(i); return r})((_lower), (_upper), (_step))"),o=d("(function (o) {_body}).call(this, (S[_o]))"),k=(function(n){return o.replace({_body:n})}),g=(function(n){return(function(){var p=k(d(n));return((function(q){return p.replace(q)}))}).call(this)}),m=g("var ks = []; for (var k in o) Object.prototype.hasOwnProperty.call(o, k) && ks.push(k); return ks"),l=g("var vs = []; for (var k in o) Object.prototype.hasOwnProperty.call(o, k) && vs.push(o[k]); return vs"),f=g("var ps = []; for (var k in o) Object.prototype.hasOwnProperty.call(o, k) && ps.push([k, o[k]]); return ps"),j=g("for (var r = {}, i = 0, l = o.length, x; i < l; ++i) x = o[i], r[x[0]] = x[1]; return r");return([e("S[n[_upper]]",h),e("S[_o /keys]",m),e("S[_o |object]",j),e("S[n[_lower, _upper]]",h),e("S[_o /values]",l),e("S[_o -object]",j),e("S[n[_lower, _upper, _step]]",h),e("S[_o /pairs]",f),e("S[_o /object]",j)])}).call(this);return((function(f){return(f.init_function=(function(g){return this.macroexpand(d("S[_x]").replace({_x:g}))})),f}).call(this,(a.clone().macros(b,c))))}).call(this)})})}).call(this)))(caterwaul);caterwaul.js_base()(caterwaul.precompiled_internal((function(){null;return(function(a){(function(){var f=(function(g){return a.macro((""+(g)+" _x"),('_x["'+(/[a-z]/.test(g)?g:"u"+g)+'"]()'))}),e=(function(g){return a.macro(("_x "+(g)+" _y"),('_x["'+(g)+'"](_y)'))}),c=(function(g){return g.split(/\s+/)}),d=(function(){for(var h=(c("! ~ + - new void typeof")),i=[],k=0,g=h.length,j;k<g;++k){j=h[k],i.push(f(j))}return i}).call(this),b=(function(){for(var h=(c("+ - * / % ^ | & << >> >>> += -= *= /= %= ^= |= &= <<= >>= >>>= == != === !== < > <= >= in instanceof")),i=[],k=0,g=h.length,j;k<g;++k){j=h[k],i.push(e(j))}return i}).call(this);return(a.overload_macro=(function(g){return g.modifier("overload",(function(){var h=a.overload();return((function(i){return this.expand(h(i._expression))}))}).call(this))}),a.overload=(function(){return a.clone().macros(d,b)}))}).call(this)})}).call(this)))(caterwaul);caterwaul.js_all=function(){var a=this.js();return this.clone().macros(this.word_macros(a),a.macros,this.overload_macro(a),this.seq_macro(a))};