sdocp('lib/unit.js.sdoc', 'Unit testing library functions\n\nvar already_failed = false;\nvar on_error = function (e) {throw new Error(e)};\n\nvar log = function (message) {};\n\nvar eq = function (x, y, message) {\n  if (x == y) return true;\n  else        return on_error((message ? message + \': \' : \'\') + \'\\n\' + x + \'\\n\\n!==\\n\\n\' + y);\n};\n\nvar aeq = function (xs, ys, message) {\n  eq(xs.length, ys.length, xs + \' == \' + ys + \': \' + message + \' (length check)\');\n  for (var i = 0, l = xs.length; i < l; ++i)\n    eq(xs[i], ys[i], message + \' (element check: \' + i + \')\');\n  return true;\n};\n\nvar test = function (f) {\n  if (already_failed) return on_error(\'Already failed, so skipping test\');\n  try {f()}\n  catch (e) {\n    already_failed = true;\n    on_error(e instanceof Error ? e.toString() : e);\n    on_error(\'(Test failure for \' + f.toString() + \')\');\n  }\n};\n');